{"version":3,"sources":["api/DateTime.js","api/TeamParams.js","api/SessionTypes.js","api/SessionParams.js","scheduling/Instance.js","api/PageFormat.js","scheduling/utilities.js","api/EventParams.js","inputs/TextInput.js","inputs/NumberInput.js","inputs/BooleanInput.js","ui/BasicsForm.js","inputs/DateTimeInput.js","ui/SessionForm.js","inputs/TeamList.js","ui/DetailView.js","inputs/TextAreaInput.js","ui/InitForm.js","ui/TopBar.js","scheduling/Scheduler.js","ui/DayScheduleView.js","ui/SingleScheduleView.js","ui/IndivScheduleView.js","inputs/VolunteerInput.js","ui/VolunteerView.js","ui/SponsorView.js","templates/PdfDoc.js","outputs/SessionOutputs.js","outputs/TeamOutputs.js","outputs/SignOutputs.js","outputs/DataOutputs.js","outputs/VolunteerOutputs.js","templates/PptPres.js","outputs/PresentationOutput.js","outputs/Zipper.js","outputs/SingleOutput.js","ui/OutputGenView.js","ui/FullScheduleView.js","App.js","registerServiceWorker.js","index.js"],"names":["DateTime","mins","days","this","x","d","Math","floor","h","m","zh","zm","length","inc","_mins","value","displayTime","res","split","parseInt","dayIdx","justTime","_days","includes","indexOf","o","_class","TeamParams","id","number","name","affiliation","pitNum","extraTime","excludeJudging","startTime","endTime","isSurrogate","schedule","_name","replace","_number","T","SessionType","uid","priority","defaultTitle","defaultLocs","fillerPolicy","POLICIES","blank","_priority","_defaultTitle","_fillerPolicy","_defaultLocs","console","log","V","Object","values","TYPES","forEach","v","surrogates","JUDGING","INSPECTION","MATCH_ROUND","MATCH_ROUND_PRACTICE","MATCH_FILLER","MATCH_FILLER_PRACTICE","BREAK","SessionParams","type","nLocs","noPractice","_id","_type","_noprac","A","i","push","locations","universal","actualStartTime","clone","actualEndTime","nSims","len","buf","overlap","errors","instances","extraTimeFirst","extraTimeEvery","appliesTo","usesSurrogates","_locations","pop","_schedule","_nSims","_startTime","_actualStartTime","_endTime","_actualEndTime","_len","_overlap","_buf","_errors","_instances","_extraTimeFirst","_extraTimeEvery","_universal","_appliesTo","_usesSurrogates","S","Instance","session_id","num","time","teams","loc","standins","extra","I","PageFormat","_header","logoTopLeft","logoTopRight","logoBotLeft","logoBotRight","titleFontSize","baseFontSize","footerText","PreComputedImages","header","flllogo","_logoTopLeft","gamelogo","_logoTopRight","mqlogo","_logoBotLeft","firstlogo","_logoBotRight","customLogos","_footer","_baseFontSize","_titleFontSize","E","shuffle","a","j","random","overlaps","b","hasDone","team","filter","saveToFile_csv","filename","content","file","Blob","window","navigator","msSaveOrOpenBlob","document","createElement","url","URL","createObjectURL","href","download","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","freeze","key","object","EventParams","thaw","version","title","nTeams","_version","uid_counter","sort","minTravel","sessions","pilot","consolidatedAwards","awardStyle","AWARD_STYLES","judgesAwards","awards","AWARD_NAMES","nTables","nPracs","sponsors","national","local","nationalSponsors","addNationalSponsor","_volunteers","tempNames","pageFormat","Infinity","lines","t","savedName","savedNum","savedAffil","savedPit","l","shift","fields","nAwardsNeeded","distances","map","abs","closestIdx","findIndex","min","awardStyleIdx","actualStart","actualEnd","ceil","nJudgings","startLunch","max","endLunch","getSession","nDays","nightStart","nightEnd","timeAvailable","s","rdOverlap","rdLen","timePerMatch","matchLen","matchBuf","roundOneLength","roundOneEnd","dif","bufDiff","first","volunteers","buildVolunteerSheet","nJudges","find","numberOfVols","count","per","staff","Volunteers","roles","vol","pdf","session","grid","cols","applyingBreaks","applies","slice","br","instance","colSpan","diff","dummy","getTeam","w","row","compact","minTravelTime","hadASurrogate","sessionID","filt","newMins","idx","splice","excl","startA","endA","startB","endB","sId","teamA","teamB","iA","iB","canA","canB","canDo","locA","locB","sA","eA","sB","eB","dA","_teams","maxId","_title","_sessions","_awards","_judgesAwards","_consolidatedAwards","_awardStyle","nTrophies","round","_minTravel","_extraTime","_nTables","_display","_pilot","p","TextInput","props","handleChange","bind","uniqueId","enableUniqueIds","event","val","target","onChange","hidden","nolabel","sm","large","for","nextUniqueId","label","lastUniqueId","React","Component","NumberInput","Number","step","BooleanInput","toggleChecked","disabled","color","onClick","BasicsForm","state","getDataGrid","checked","selectedIdx","updateTitle","updateMinTravel","updateExtraTime","updateNDays","updateDays","updateAwardStyle","toggleAward","updateConsolidatedAwards","readOnly","newTitle","data","setState","updatedAwards","changes","cell","col","dayInput","valueRenderer","sheetRenderer","className","children","onCellsChanged","cosmetic","advanced","caret","awardPerc","aIdx","substring","DateTimeInput","handleTimeChange","handleDateChange","buildInput","day","pattern","timeValue","immutable","SessionForm","updateName","updateStartTime","updateEndTime","updateLen","updateOverlap","updateBuf","updateNSims","updateNLocs","updateExtraFirst","updateExtraEvery","updateLocs","updateNoprac","handleDelete","alert","onDelete","truth","onToggle","TeamList","toAdd","selectedTeam","modal","toggle","updateCells","deleteTeam","changeToAdd","addTeams","setTeamExclude","setTeamExtra","setTeamStartTime","setTeamEndTime","ev","size","isOpen","buildModal","width","rowRenderer","DetailView","activeTab","selectedSession","handleScheduleChange","updateSessions","updateTeams","toggleAdvanced","toggleModal","toggleApplies","updateUniversal","deleteSession","addSession","tab","syncLocs","container","include","lg","md","pills","tabId","renderSessions","TextAreaInput","style","rows","placeholder","InitForm","updateNTeams","updateNTables","updatePilot","updateTeamNames","updateNPracs","newN","newTime","e","onSubmit","handleSubmit","TopBar","onFileChange","f","files","reader","FileReader","onload","onLoad","result","readAsText","light","expand","alt","src","navbar","nav","inNavbar","data-tip","right","rel","divider","onSave","place","effect","accept","ref","Scheduler","empty","willWork","timeInc","end","tableSession","offset","locOffset","numOffset","locD","now","L","lastNTeams","Array","everyN","extraTimeTeams","roundsSinceExtra","flag","extraRoundsNeeded","extraRoundsMade","extraRounds","whenDone","sortThingsOut","initialFill","swapFill","oneSetOfTeams","fillInstance","k","fixed","evaluate","swapFillSession","lostTeams","instance_A","tA","instance_B","tB","DayScheduleView","getItems","sorted","items","sTime","eTime","contents","break","SingleScheduleView","swapee","select","editable","onSwap","y","renderAsTable","IndivScheduleView","VolunteerInput","handleCountChange","handleNameChange","updateVol","newCount","VolunteerView","toggleEditable","downloadTemplate","deleteVol","importVols","startsWith","SponsorView","addSponsor","deleteSponsor","arr","extension","addLocalSponsor","join","readAsDataURL","deleteLocalSponsor","img","height","pdfMake","vfs","pdfFonts","PdfDoc","format","landscape","_format","imageDict","logo1","logo2","logo3","logo4","styleDict","fontSize","bold","alignment","footer","header2","signTitle","signSubtitle","certTitle","certSubtitle","tablebody","tablehead","breakrow","fillColor","teamEntry","doc","text","margin","background","portraitBackground","pageMargins","pageSize","images","styles","pageOrientation","landscapeBackground","blob","pageBreak","canvas","x1","y1","x2","y2","lineWidth","createPdf","err","message","open","Promise","resolve","reject","getBlob","error","image","table","widths","fit","layout","_filename","MakeSessionPDF","maxLocs","addContent","headerRows","dontBreakRows","toString","sessionPage","getSessionDataGrid","addPageBreak","chomp","MakeDaySchedulePdf","MakePracticeTableSignupPdf","timeIncPrac","MakeTeamListPDF","MakeAllTeamsPDF","getIndivDataGrid","N","keepWithHeaderRows","curStyle","MakeIndivTeamsPDF","teamPage","MakeHangerPDF","spot","MakePitSignsPdf","MakeLocationSignsPdf","MakeAwardCertPdf","F","DrawLine","MakeParticipationCertPdf","MakeScoringSystemCSV","csv","rankingMatches","allRounds","getSessions","TimeToExcel","tmp","allJudging","practiceMatches","allPRounds","MakeAppImportCsv","fill","flat","MakeVolunteerListPdf","colorDark","MakeSigninPdf","keys","PptPres","logos","pptx","PptxGenJS","setLayout","defineSlideMaster","bkgd","objects","sizing","options","align","fontFace","autoFit","rect","addNewSlide","addText","winner","slide","save","MakeClosingPresentation","nationals","addTitle","addWinner","Zipper","saveFunc","_event","_idx","zipname","funcs","zipPDF","zipCSV","zipSponsors","zipPPT","zip","JSZip","generateAsync","then","saveAs","folder","getBlobPromise","zipAllLogos","ppt","im","uri","base64","SingleOutput","getPDF","getCSV","getSponsors","getPPT","z","DownloadZip","funcNames","OutputGenView","pdf_modal","running","progress","downloadOne","downloadSelected","checkAll","checkNone","updateBaseSize","updateTitleSize","updateFooter","onTLChange","onTRChange","onBLChange","downloadAll","onBRChange","get","toDo","ProcessGiven","FilesLeft","ProcessNext","C","block","check","FullScheduleView","updatePDFSettings","updateVolunteers","updateSponsors","sID","swapTeams","App","display","eventParams","processing","initSchedule","customise","generate","update","initState","buildAllTables","populateFLL","scrollTo","fillAllTables","fname","json_str","JSON","stringify","saveToFile_json","parse","mainWindow","fluid","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","ReactDOM","render","getElementById","process","origin","addEventListener","fetch","response","status","headers","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.04c346b4.chunk.js","sourcesContent":["export class DateTime {\n  constructor(mins, days = ['Day 1']) {\n    this.mins = mins;\n    this.days = days;\n  }\n\n  displayTime() {\n    if (!this.mins) return '--:--';\n    let x = this.mins % (24 * 60);\n    let d = Math.floor(this.mins / (24 * 60));\n    let h = Math.floor(x / 60);\n    let m = x % 60;\n    let zh = h < 10 ? '0' : '';\n    let zm = m < 10 ? '0' : '';\n    return (\n      (this.days.length > 1 ? this.days[d] + ' ' : '') + zh + h + ':' + zm + m\n    );\n  }\n\n  justDay() {\n    let d = Math.floor(this.mins / (24 * 60));\n    return this.days[d];\n  }\n\n  justTime() {\n    let x = this.mins % (24 * 60);\n    let h = Math.floor(x / 60);\n    let m = x % 60;\n    let zh = h < 10 ? '0' : '';\n    let zm = m < 10 ? '0' : '';\n    return zh + h + ':' + zm + m;\n  }\n\n  get mins() {\n    return this._mins;\n  }\n\n  set mins(value) {\n    this._mins = value;\n  }\n\n  get time() {\n    return this.displayTime();\n  }\n\n  set time(value) {\n    let res = value.split(':');\n    this._mins =\n      parseInt(res[0], 10) * 60 + parseInt(res[1], 10) + this.dayIdx * 24 * 60;\n  }\n\n  get dayIdx() {\n    return Math.floor(this._mins / (24 * 60));\n  }\n\n  get timeValue() {\n    return this.justTime();\n  }\n\n  get day() {\n    return this._days[this.dayIdx];\n  }\n\n  set day(value) {\n    if (this.days.includes(value))\n      this.mins =\n        (this.mins ? this.mins % (24 * 60) : 0) +\n        this.days.indexOf(value) * 24 * 60;\n  }\n\n  get days() {\n    return this._days;\n  }\n\n  set days(value) {\n    this._days = value;\n  }\n\n  clone(inc = 0) {\n    return new DateTime(this.mins + inc, this.days);\n  }\n\n  static freeze(o) {\n    return {\n      _class: 'DateTime',\n      mins: o.mins,\n      days: o.days\n    };\n  }\n\n  static thaw(o) {\n    return new DateTime(o.mins, o.days);\n  }\n}\n","import { DateTime } from './DateTime';\n\nexport class TeamParams {\n  constructor(id, number) {\n    this.number = number;\n    this.name = 'Team ' + number;\n\n    // this.id = new ShortUniqueId();\n    this.id = id;\n\n    // So far unused\n    this.affiliation = number;\n    this.pitNum = number;\n    this.extraTime = false;\n    this.excludeJudging = false;\n    this.startTime = new DateTime(null);\n    this.endTime = new DateTime(null);\n    this.isSurrogate = false;\n    this.schedule = [];\n  }\n\n  get name() {\n    return this._name;\n  }\n\n  set name(value) {\n    this._name = value.replace(/\\s+/g, ' ');\n  }\n\n  get number() {\n    return this._number;\n  }\n\n  set number(value) {\n    this._number = value;\n  }\n\n  static freeze(o) {\n    return {\n      _class: 'TeamParams',\n      number: o.number,\n      name: o.name,\n      id: o.id,\n      affiliation: o.affiliation,\n      pitNum: o.pitNum,\n      extraTime: o.extraTime,\n      excludeJudging: o.excludeJudging,\n      startTime: o.startTime,\n      endTime: o.endTime,\n      isSurrogate: o.isSurrogate,\n      schedule: o.schedule\n    };\n  }\n\n  static thaw(o) {\n    let T = new TeamParams(o.id, o.number);\n    T.name = o.name;\n    T.affiliation = o.affiliation;\n    T.pitNum = o.pitNum;\n    T.extraTime = o.extraTime;\n    T.excludeJudging = o.excludeJudging;\n    T.startTime = o.startTime;\n    T.endTime = o.endTime;\n    T.isSurrogate = o.isSurrogate;\n    T.schedule = o.schedule;\n    return T;\n  }\n}\n","export class SessionType {\n  constructor(\n    uid,\n    name,\n    priority,\n    defaultTitle,\n    defaultLocs,\n    fillerPolicy = POLICIES.blank\n  ) {\n    this._name = name;\n    this._priority = priority;\n    this._defaultTitle = defaultTitle;\n    this._fillerPolicy = fillerPolicy;\n    this._defaultLocs = defaultLocs;\n  }\n\n  get name() {\n    return this._name;\n  }\n\n  get priority() {\n    return this._priority;\n  }\n\n  get defaultTitle() {\n    return this._defaultTitle;\n  }\n\n  get fillerPolicy() {\n    return this._fillerPolicy;\n  }\n\n  get defaultLocs() {\n    return this._defaultLocs;\n  }\n\n  static freeze(o) {\n    return {\n      _class: 'SessionType',\n      _name: o.name\n    };\n  }\n\n  static thaw(o) {\n    // console.log(TYPES);\n    // console.log(Object.keys(TYPES));\n    console.log('Object name:');\n    console.log(o._name);\n    let V = null;\n    Object.values(TYPES).forEach(v => {\n      if (o._name === v.name) console.log('MATCH');\n      if (o._name === v.name) V = v;\n    });\n    return V;\n  }\n}\n\nexport const POLICIES = { blank: 'Leave blanks', surrogates: 'Use surrogates' };\n\nexport const TYPES = {\n  JUDGING: new SessionType(16, 'Judging', 8, 'Judging', 'Room'),\n  INSPECTION: new SessionType(24, 'Inspection', 12, 'Inspection', 'Room'),\n  MATCH_ROUND: new SessionType(\n    32,\n    'Rounds',\n    16,\n    'Round',\n    'Table',\n    POLICIES.surrogates\n  ),\n  MATCH_ROUND_PRACTICE: new SessionType(\n    33,\n    'Practice Rounds',\n    128,\n    'Practice Round',\n    'Table',\n    POLICIES.surrogates\n  ),\n  MATCH_FILLER: new SessionType(\n    48,\n    'Matches',\n    32,\n    'Qualifying Match',\n    'Field',\n    POLICIES.surrogates\n  ),\n  MATCH_FILLER_PRACTICE: new SessionType(\n    49,\n    'Practice Matches',\n    129,\n    'Practice Match',\n    'Field',\n    POLICIES.surrogates\n  ),\n  BREAK: new SessionType(64, 'Breaks', 0, 'Break', 'Everywhere')\n};\n","import { TYPES } from \"./SessionTypes\";\n\nexport default class SessionParams {\n  constructor(\n    uid,\n    type,\n    name,\n    nLocs = 4,\n    startTime = null,\n    endTime = null,\n    noPractice = false\n  ) {\n    this._id = uid;\n    this._type = type;\n\n    this.name = name ? name : this.type.defaultTitle + \" \" + this._id;\n    this._noprac = noPractice;\n\n    let A = [];\n    for (let i = 1; i <= nLocs; i++) A.push(this.type.defaultLocs + \" \" + i);\n    this.locations = A;\n\n    this.universal = false;\n\n    this.startTime = startTime;\n    this.endTime = endTime;\n    if (this.startTime) this.actualStartTime = startTime.clone();\n    if (this.endTime) this.actualEndTime = endTime.clone();\n\n    this.nSims = this.locations.length;\n    this.len = 30;\n    this.buf = 15;\n    this.overlap = 0;\n\n    this.schedule = []; // To be filled in later\n    this.errors = 0;\n\n    this.instances = 1; // Can be changed in later versions, specifically for TYPE_MATCH_FILLER.\n    this.extraTimeFirst = false; // Should the first round be a little longer?\n    this.extraTimeEvery = 0; // Extra time every N round\n    this.appliesTo = []; // Which sessions a break applies to\n    this.usesSurrogates = false;\n  }\n\n  // These are immutable\n  get type() {\n    return this._type;\n  }\n\n  get id() {\n    return this._id;\n  }\n\n  get name() {\n    return this._name;\n  }\n\n  set name(value) {\n    this._name = value;\n  }\n\n  get nLocs() {\n    return this._locations.length;\n  }\n\n  set nLocs(value) {\n    while (this.nLocs < value)\n      this._locations.push(this.type.defaultLocs + \" \" + (this.nLocs + 1));\n    while (this.nLocs > value) this._locations.pop();\n    if (this.type === TYPES.JUDGING) this.nSims = this.nLocs;\n  }\n\n  get locations() {\n    return this._locations;\n  }\n\n  set locations(value) {\n    this._locations = value;\n  }\n\n  get schedule() {\n    return this._schedule;\n  }\n\n  set schedule(value) {\n    this._schedule = value;\n  }\n\n  get nSims() {\n    return this._nSims;\n  }\n\n  set nSims(value) {\n    this._nSims = value;\n  }\n\n  get startTime() {\n    return this._startTime;\n  }\n\n  // TODO clone value here so we don't have to everywhere else.\n  set startTime(value) {\n    this._startTime = value;\n    if (value) this._actualStartTime = value.clone();\n  }\n\n  get endTime() {\n    return this._endTime;\n  }\n\n  set endTime(value) {\n    this._endTime = value;\n  }\n\n  get actualEndTime() {\n    if (this.type === TYPES.BREAK) return this._endTime;\n    return this._actualEndTime;\n  }\n\n  set actualEndTime(value) {\n    this._actualEndTime = value;\n  }\n\n  get actualStartTime() {\n    if (this.type === TYPES.BREAK) return this._startTime;\n    return this._actualStartTime;\n  }\n\n  set actualStartTime(value) {\n    this._actualStartTime = value;\n  }\n\n  get len() {\n    return this._type === TYPES.BREAK ? 0 : this._len;\n  }\n\n  set len(value) {\n    this._len = value;\n  }\n\n  get overlap() {\n    return this._overlap;\n  }\n\n  set overlap(value) {\n    if (value >= 0) this._overlap = value;\n  }\n\n  get buf() {\n    return this._type === TYPES.BREAK\n      ? this.endTime.mins - this.startTime.mins\n      : this._buf;\n  }\n\n  set buf(value) {\n    this._buf = value;\n  }\n\n  get errors() {\n    return this._errors;\n  }\n\n  set errors(value) {\n    this._errors = value;\n  }\n\n  get instances() {\n    return this._instances;\n  }\n\n  set instances(value) {\n    this._instances = value;\n  }\n\n  get extraTimeFirst() {\n    return this._extraTimeFirst;\n  }\n\n  set extraTimeFirst(value) {\n    this._extraTimeFirst = value;\n  }\n\n  get extraTimeEvery() {\n    return this._extraTimeEvery;\n  }\n\n  set extraTimeEvery(value) {\n    this._extraTimeEvery = value;\n  }\n\n  get universal() {\n    return this._universal;\n  }\n\n  set universal(value) {\n    this._universal = value;\n  }\n\n  get appliesTo() {\n    return this._appliesTo;\n  }\n\n  set appliesTo(value) {\n    this._appliesTo = value;\n  }\n\n  get noPractice() {\n    return this._noprac;\n  }\n\n  set noPractice(value) {\n    this._noprac = value;\n  }\n\n  // Does this session apply to id?\n  applies(id) {\n    if (this.universal) return true;\n    else return this.appliesTo.includes(id);\n  }\n\n  get usesSurrogates() {\n    return this._usesSurrogates;\n  }\n\n  set usesSurrogates(value) {\n    this._usesSurrogates = value;\n  }\n\n  static freeze(o) {\n    return {\n      _class: \"SessionParams\",\n      _id: o._id,\n      _type: o._type,\n      _name: o._name,\n      _locations: o._locations,\n      _universal: o._universal,\n      _startTime: o._startTime,\n      _endTime: o._endTime,\n      _actualStartTime: o._actualStartTime,\n      _actualEndTime: o._actualEndTime,\n      _nSims: o._nSims,\n      _len: o._len,\n      _buf: o._buf,\n      _overlap: o._overlap,\n      _schedule: o._schedule,\n      _errors: o._errors,\n      _instances: o._instances,\n      _extraTimeFirst: o._extraTimeFirst,\n      _extraTimeEvery: o._extraTimeEvery,\n      _appliesTo: o._appliesTo,\n      _noprac: o._noprac,\n      _usesSurrogates: o._usesSurrogates,\n    };\n  }\n\n  static thaw(o) {\n    let S = new SessionParams(o._id, o._type, o._name);\n    S._locations = o._locations;\n    S._universal = o._universal;\n    S._startTime = o._startTime;\n    S._endTime = o._endTime;\n    if (S._endTime.mins === null && o._actualEndTime.mins === null)\n      S._endTime = S._startTime.clone(30);\n    else if (S._endTime.mins === null) {\n      S._endTime = o._actualEndTime.clone();\n    }\n    S._actualStartTime = o._actualStartTime;\n    S._actualEndTime = o._actualEndTime;\n    S._nSims = o._nSims;\n    S._len = o._len;\n    S._buf = o._buf;\n    S._overlap = o._overlap;\n    if (typeof o._overlap === \"undefined\") S._overlap = 0;\n    S._schedule = o._schedule;\n    S._errors = o._errors;\n    S._instances = o._instances;\n    S._extraTimeFirst = o._extraTimeFirst;\n    S._extraTimeEvery = o._extraTimeEvery;\n    S._appliesTo = o._appliesTo;\n    S._noprac = o._noprac;\n    S._usesSurrogates = o._usesSurrogates;\n    return S;\n  }\n}\n","/**\n num: Count of instance\n time: Time (mins) of instance\n teams: List of teams in instance\n loc: Location offset (i.e. for staggered sessions, location index of where the teams begin)\n extra: true/false if extra time is allocated\n */\nexport default class Instance {\n  constructor(session_id, num, time, teams, loc) {\n    this.session_id = session_id;\n    this.num = num;\n    this.time = time;\n    this.teams = teams;\n    this.loc = loc;\n    this.surrogates = 0;\n    this.standins = 0;\n    this.extra = false;\n  }\n\n  static freeze(o) {\n    return {\n      _class: 'Instance',\n      session_id: o.session_id,\n      num: o.num,\n      time: o.time,\n      teams: o.teams,\n      loc: o.loc,\n      surrogates: o.surrogates,\n      standins: o.standins,\n      extra: o.extra\n    };\n  }\n\n  static thaw(o) {\n    let I = new Instance(o.session_id, o.num, o.time, o.teams, o.loc);\n    I.surrogates = o.surrogates;\n    I.standins = o.standins;\n    I.extra = o.extra;\n    return I;\n  }\n}\n","//import {toDataUrl} from \"../scheduling/utilities\";\n// import header from \"../resources/FIRST_header.png\";\n// import flllogo from \"../resources/flllogo.jpg\";\n// import gamelogo from \"../resources/gamelogo.jpg\";\n// import mqlogo from \"../resources/mqlogo.png\";\n// import firstlogo from \"../resources/firstlogo.png\";\n\nimport PreComputedImages from \"../resources/images.json\";\n\nexport class PageFormat {\n    constructor() {\n        this._header = null;\n        this.logoTopLeft = null;\n        this.logoTopRight = null;\n        this.logoBotLeft = null;\n        this.logoBotRight = null;\n        this.titleFontSize = 22;\n        this.baseFontSize = 12;\n        this.footerText = 'www.firstaustralia.org';\n\n        if (PreComputedImages.header)\n            this._header = PreComputedImages.header;\n        // else\n        //    toDataUrl(header, (base) => {this.header= base;});\n        if (PreComputedImages.flllogo)\n            this._logoTopLeft = PreComputedImages.flllogo;\n        // else\n        //     toDataUrl(flllogo, (base) => {this.logoTopLeft = base;});\n        if (PreComputedImages.gamelogo)\n            this._logoTopRight = PreComputedImages.gamelogo;\n        // else\n        //     toDataUrl(gamelogo, (base) => {this.logoTopRight = base;});\n        if (PreComputedImages.mqlogo)\n            this._logoBotLeft = PreComputedImages.mqlogo;\n        // else\n        //    toDataUrl(mqlogo, (base) => {this.logoBotLeft = base;});\n        if (PreComputedImages.firstlogo)\n            this._logoBotRight = PreComputedImages.firstlogo;\n        // else\n        //     toDataUrl(firstlogo, (base) => {this.logoBotRight = base;});\n\n        this.customLogos = false;\n\n        console.log(this.customLogos);\n    }\n\n    get footerText() {\n        return this._footer;\n    }\n\n    set footerText(x) {\n        this._footer = x;\n    }\n\n    get baseFontSize() {\n        return this._baseFontSize;\n    }\n\n    set baseFontSize(x) {\n        this._baseFontSize = x;\n    }\n\n    get titleFontSize() {\n        return this._titleFontSize;\n    }\n\n    set titleFontSize(x) {\n        this._titleFontSize = x;\n    }\n\n    get logoTopLeft() {\n        return this._logoTopLeft\n    }\n\n    set logoTopLeft(x) {\n        this.customLogos = (this._logoTopLeft !== x || this.customLogos);\n        this._logoTopLeft = x;\n    }\n\n    get logoBotLeft() {\n        return this._logoBotLeft\n    }\n\n    set logoBotLeft(x) {\n        this.customLogos = (this._logoBotLeft !== x || this.customLogos);\n        this._logoBotLeft = x;\n    }\n\n    get logoTopRight() {\n        return this._logoTopRight\n    }\n\n    set logoTopRight(x) {\n        this.customLogos = (this._logoTopRight !== x || this.customLogos);\n        this._logoTopRight = x;\n    }\n\n    get logoBotRight() {\n        return this._logoBotRight\n    }\n\n    set logoBotRight(x) {\n        this.customLogos = (this._logoBotRight !== x || this.customLogos);\n        this._logoBotRight = x;\n    }\n\n    get header() {\n        return this._header\n    }\n\n    set header(x) {\n        this.customLogos = (this._header !== x || this.customLogos);\n        this._header = x;\n    }\n\n    static freeze(o) {\n        console.log(\"Custom logos\" + o.customLogos);\n        return o.customLogos ? {\n            _class: 'PageFormat',\n            _titleFontSize: o._titleFontSize,\n            _baseFontSize: o._baseFontSize,\n            _header: o._header,\n            _logoTopLeft: o._logoTopLeft,\n            _logoBotLeft: o._logoBotLeft,\n            _logoTopRight: o._logoTopRight,\n            _logoBotRight: o._logoBotRight,\n            _footer: o._footer\n        } : {\n            _class: 'PageFormat',\n            _titleFontSize: o._titleFontSize,\n            _baseFontSize: o._baseFontSize,\n            _footer: o._footer\n        };\n    }\n\n    static thaw(o) {\n        console.log(\"THAW\");\n        console.log(o);\n        console.log(o._header);\n        let E = new PageFormat();\n        E._baseFontSize = o._baseFontSize;\n        E._titleFontSize = o._titleFontSize;\n        if (o._header) E._header = o._header;\n        if (o._logoTopLeft) E._logoTopLeft = o._logoTopLeft;\n        if (o._logoBotLeft) E._logoBotLeft = o._logoBotLeft;\n        if (o._logoTopRight) E._logoTopRight = o._logoTopRight;\n        if (o._logoBotRight) E._logoBotRight = o._logoBotRight;\n        E._footer = o._footer;\n        return E;\n    }\n\n}\n","import { DateTime } from '../api/DateTime';\nimport { EventParams } from '../api/EventParams';\nimport SessionParams from '../api/SessionParams';\nimport { TeamParams } from '../api/TeamParams';\nimport Instance from '../scheduling/Instance';\nimport { SessionType } from '../api/SessionTypes';\nimport { PageFormat } from '../api/PageFormat';\n\n//https://stackoverflow.com/questions/6832596/how-to-compare-software-version-number-using-js-only-number, LeJared\nexport function cmpVersions(a, b) {\n  var i, diff;\n  var regExStrip0 = /(\\.0+)+$/;\n  var segmentsA = a.replace(regExStrip0, '').split('.');\n  var segmentsB = b.replace(regExStrip0, '').split('.');\n  var l = Math.min(segmentsA.length, segmentsB.length);\n\n  for (i = 0; i < l; i++) {\n    diff = parseInt(segmentsA[i], 10) - parseInt(segmentsB[i], 10);\n    if (diff) {\n      return diff;\n    }\n  }\n  return segmentsA.length - segmentsB.length;\n}\n\n/**\n * Shuffles array in place.\n * @param {Array} a items The array containing the items.\n */\nexport function shuffle(a) {\n  var j, x, i;\n  for (i = a.length; i; i--) {\n    j = Math.floor(Math.random() * i);\n    x = a[i - 1];\n    a[i - 1] = a[j];\n    a[j] = x;\n  }\n\n  return a;\n}\n\n/** Checks if two session overlap at all **/\nexport function overlaps(a, b) {\n  if (\n    a.actualStartTime.mins === b.actualStartTime.mins ||\n    a.actualEndTime.mins === b.actualEndTime.mins\n  )\n    return true;\n  if (\n    a.actualStartTime.mins < b.actualStartTime.mins &&\n    a.actualEndTime.mins > b.actualStartTime.mins\n  )\n    return true;\n  return (\n    b.actualStartTime.mins < a.actualStartTime.mins &&\n    b.actualEndTime.mins > a.actualStartTime.mins\n  );\n}\n\n/**\n Returns how many times a team has done a given session\n **/\nexport function hasDone(team, id) {\n  return team.schedule.filter(i => i.session_id === id).length;\n}\n\nexport function saveToFile_json(filename, content) {\n  let file = new Blob([content], { type: 'application/json' });\n  if (window.navigator.msSaveOrOpenBlob)\n    // IE10+\n    window.navigator.msSaveOrOpenBlob(file, filename);\n  else {\n    // Others\n    var a = document.createElement('a'),\n      url = URL.createObjectURL(file);\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    setTimeout(function() {\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n    }, 0);\n  }\n}\n\nexport function saveToFile_csv(filename, content) {\n  let file = new Blob([content], { type: 'application/csv' });\n  if (window.navigator.msSaveOrOpenBlob)\n    // IE10+\n    window.navigator.msSaveOrOpenBlob(file, filename);\n  else {\n    // Others\n    var a = document.createElement('a'),\n      url = URL.createObjectURL(file);\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    setTimeout(function() {\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n    }, 0);\n  }\n}\n\n// Replacer function for JSON.stringify\n// Saves any class instance as an object with its data and a class descriptor.\nexport function freeze(key, object) {\n  if (object instanceof DateTime) {\n    return DateTime.freeze(object);\n  } else if (object instanceof EventParams) {\n    return EventParams.freeze(object);\n  } else if (object instanceof SessionParams) {\n    return SessionParams.freeze(object);\n  } else if (object instanceof TeamParams) {\n    return TeamParams.freeze(object);\n  } else if (object instanceof Instance) {\n    return Instance.freeze(object);\n  } else if (object instanceof SessionType) {\n    return SessionType.freeze(object);\n  } else if (object instanceof PageFormat) {\n    return PageFormat.freeze(object);\n  } else return object;\n}\n\n// Reviver function for JSON.parse\n// Returns any object as an instance of its class descriptor and data\nexport function thaw(key, value) {\n  if (value instanceof Object && value._class) {\n    switch (value._class) {\n      case 'DateTime':\n        return DateTime.thaw(value);\n      case 'EventParams':\n        return EventParams.thaw(value);\n      case 'SessionParams':\n        return SessionParams.thaw(value);\n      case 'TeamParams':\n        return TeamParams.thaw(value);\n      case 'Instance':\n        return Instance.thaw(value);\n      case 'SessionType':\n        return SessionType.thaw(value);\n      case 'PageFormat':\n        return PageFormat.thaw(value);\n      default:\n        return value;\n    }\n  } else {\n    return value;\n  }\n}\n\nexport function getBase64Image(img) {\n  // console.log(\"Image source\");\n  // console.log(img.src);\n  if (img.src.substring(0, 4) === 'data') return img.src;\n  // Create an empty canvas element\n  let canvas = document.createElement('canvas');\n  canvas.width = img.naturalWidth;\n  canvas.height = img.naturalHeight;\n\n  // Copy the image contents to the canvas\n  let ctx = canvas.getContext('2d');\n  ctx.drawImage(img, 0, 0);\n\n  // Get the data-URL formatted image\n  // Firefox supports PNG and JPEG. You could check img.src to\n  // guess the original format, but be aware the using \"image/jpg\"\n  // will re-encode the image.\n\n  let dataURL = '';\n  if (img.src.search(new RegExp('.png', 'i')) !== -1) {\n    dataURL = canvas.toDataURL('image/png');\n  } else if (img.src.search(new RegExp('.jpe?g', 'i')) !== -1) {\n    dataURL = canvas.toDataURL('image/jpeg');\n  }\n  if (img.src.substring(0, 4) === 'data') dataURL = img.src;\n  console.log(dataURL);\n  return dataURL;\n}\n\nexport function toDataUrl(url, callback) {\n  var xhr = new XMLHttpRequest();\n  xhr.onload = function() {\n    var reader = new FileReader();\n    reader.onloadend = function() {\n      callback(reader.result);\n    };\n    reader.readAsDataURL(xhr.response);\n  };\n  xhr.open('GET', url);\n  xhr.responseType = 'blob';\n  xhr.send();\n}\n","import { TeamParams } from \"./TeamParams\";\nimport { TYPES } from \"./SessionTypes\";\nimport { DateTime } from \"./DateTime\";\nimport SessionParams from \"./SessionParams\";\n\n//import {toDataUrl} from \"../scheduling/utilities\";\n\nimport Instance from \"../scheduling/Instance\";\nimport { overlaps, shuffle } from \"../scheduling/utilities\";\n\nimport { PageFormat } from \"./PageFormat\";\n\n// National sponsors\n// import mqlogo from \"../resources/national-sponsors/mq.png\";\n// import fordlogo from \"../resources/national-sponsors/ford.png\";\n// import googlelogo from \"../resources/national-sponsors/google.jpg\";\n// import legoedlogo from \"../resources/national-sponsors/legoEd.png\";\nimport PreComputedImages from \"../resources/images.json\";\nimport Volunteers from \"../templates/volunteers.json\";\n\nexport class EventParams {\n  static AWARD_STYLES = [\n    \"Champion only\",\n    \"Required only\",\n    \"Required and optional (winner only)\",\n    \"Required and optional (1 finalist )\",\n    \"Required and optional (2 finalist )\",\n    \"Required and optional (3 finalist )\",\n  ];\n\n  static AWARD_NAMES = [\n    [\"Champion's Award\"],\n    [\n      \"Coach/Mentor Award\",\n      \"Robotprestatie Award\",\n      \"Robotontwerp Award\",\n      \"Innovatieproject Award\",\n      \"Core Values Award\",\n      \"Champion's Award\",\n    ],\n    [\n      \"Jury Award\",\n      \"Rising All-Star Award\",\n      \"Engineering Excellence Award\",\n      \"Breakthrough Award\",\n      \"Coach/Mentor Award\",\n      \"Robotprestatie Award\",\n      \"Robotontwerp Award\",\n      \"Innovatieproject Award\",\n      \"Core Values Award\",\n      \"Champion's Award\",\n    ],\n    [\n      \"Motivate Award Finalist\",\n      \"Motivate Award Winner\",\n      \"Rising All-Star Award Finalist\",\n      \"Rising All-Star Award Winner\",\n      \"Engineering Excellence Award Finalist\",\n      \"Engineering Excellence Award Winner\",\n      \"Breakthrough Award Finalist\",\n      \"Breakthrough Award Winner\",\n      \"Coach/Mentor Award Finalist\",\n      \"Coach/Mentor Award Winner\",\n      \"Robot Performance Award Finalist\",\n      \"Robot Performance Award Winner\",\n      \"Robot Design Award Finalist\",\n      \"Robot Design Award Winner\",\n      \"Innovation Project Award Finalist\",\n      \"Innovation Project Award Winner\",\n      \"Core Values Award Finalist\",\n      \"Core Values Award Winner\",\n      \"Champion's Award Finalist\",\n      \"Champion's Award Winner\",\n    ],\n    [\n      \"Motivate Award Finalist\",\n      \"Motivate Award Finalist\",\n      \"Motivate Award Winner\",\n      \"Rising All-Star Award Finalist\",\n      \"Rising All-Star Award Finalist\",\n      \"Rising All-Star Award Winner\",\n      \"Engineering Excellence Award Finalist\",\n      \"Engineering Excellence Award Finalist\",\n      \"Engineering Excellence Award Winner\",\n      \"Breakthrough Award Finalist\",\n      \"Breakthrough Award Finalist\",\n      \"Breakthrough Award Winner\",\n      \"Coach/Mentor Award Finalist\",\n      \"Coach/Mentor Award Finalist\",\n      \"Coach/Mentor Award Winner\",\n      \"Robot Performance Award Finalist\",\n      \"Robot Performance Award Finalist\",\n      \"Robot Performance Award Winner\",\n      \"Robot Design Award Finalist\",\n      \"Robot Design Award Finalist\",\n      \"Robot Design Award Winner\",\n      \"Innovation Project Award Finalist\",\n      \"Innovation Project Award Finalist\",\n      \"Innovation Project Award Winner\",\n      \"Core Values Award Finalist\",\n      \"Core Values Award Finalist\",\n      \"Core Values Award Winner\",\n      \"Champion's Award Finalist\",\n      \"Champion's Award Finalist\",\n      \"Champion's Award Winner\",\n    ],\n    [\n      \"Motivate Award Finalist\",\n      \"Motivate Award Finalist\",\n      \"Motivate Award Finalist\",\n      \"Motivate Award Winner\",\n      \"Rising All-Star Award Finalist\",\n      \"Rising All-Star Award Finalist\",\n      \"Rising All-Star Award Finalist\",\n      \"Rising All-Star Award Winner\",\n      \"Engineering Excellence Award Finalist\",\n      \"Engineering Excellence Award Finalist\",\n      \"Engineering Excellence Award Finalist\",\n      \"Engineering Excellence Award Winner\",\n      \"Breakthrough Award Finalist\",\n      \"Breakthrough Award Finalist\",\n      \"Breakthrough Award Finalist\",\n      \"Breakthrough Award Winner\",\n      \"Coach/Mentor Award Finalist\",\n      \"Coach/Mentor Award Finalist\",\n      \"Coach/Mentor Award Finalist\",\n      \"Coach/Mentor Award Winner\",\n      \"Robot Performance Award Finalist\",\n      \"Robot Performance Award Finalist\",\n      \"Robot Performance Award Finalist\",\n      \"Robot Performance Award Winner\",\n      \"Robot Design Award Finalist\",\n      \"Robot Design Award Finalist\",\n      \"Robot Design Award Finalist\",\n      \"Robot Design Award Winner\",\n      \"Innovation Project Award Finalist\",\n      \"Innovation Project Award Finalist\",\n      \"Innovation Project Award Finalist\",\n      \"Innovation Project Award Winner\",\n      \"Core Values Award Finalist\",\n      \"Core Values Award Finalist\",\n      \"Core Values Award Finalist\",\n      \"Core Values Award Winner\",\n      \"Champion's Award Finalist\",\n      \"Champion's Award Finalist\",\n      \"Champion's Award Finalist\",\n      \"Champion's Award Winner\",\n    ],\n  ];\n\n  constructor(\n    version,\n    title = \"Tournament\",\n    nTeams = 24,\n    startTime = new DateTime(9 * 60),\n    endTime = new DateTime(9 * 17)\n  ) {\n    this._version = version;\n    this.title = title;\n    let id = Math.floor(Math.random() * 100 + 1);\n    let A = [];\n    while (nTeams > 0) {\n      A.push(new TeamParams(id, nTeams));\n      nTeams--;\n      id += Math.floor(Math.random() * 100 + 1);\n    }\n\n    this.uid_counter = 1;\n\n    this.teams = A.sort((a, b) => {\n      return parseInt(a.number, 10) - parseInt(b.number, 10);\n    });\n\n    this.startTime = startTime;\n    this.endTime = endTime;\n\n    this.minTravel = 10;\n    this.extraTime = 5;\n    this.sessions = [];\n    this.days = [\"Day 1\"];\n    this.startTime.days = this.days;\n    this.endTime.days = this.days;\n    this.pilot = false;\n    this.consolidatedAwards = false;\n    this.awardStyle = EventParams.AWARD_STYLES[2];\n    this.judgesAwards = 0;\n    this.awards = EventParams.AWARD_NAMES[2];\n    this.nTables = 4;\n    this.nPracs = 0;\n    this.sponsors = {\n      national: [],\n      local: [],\n    };\n    PreComputedImages.nationalSponsors.forEach((x) =>\n      this.addNationalSponsor(x)\n    );\n\n    this._volunteers = null;\n    this.tempNames = null;\n    this.pageFormat = null;\n\n    // console.log(this.logoBotRight);\n    this.errors = Infinity;\n    // this.populateFLL();\n  }\n\n  populateFLL() {\n    // Set team names\n    if (this.tempNames) {\n      let lines = this.tempNames.split(\"\\n\");\n      this.teams.forEach((t) => {\n        let savedName = t.name;\n        let savedNum = t.number;\n        let savedAffil = t.affiliation;\n        let savedPit = t.pitNum;\n        if (lines.length > 0) {\n          let l = lines.shift().replace(/,/g, \"\\t\");\n          let fields = l.split(\"\\t\");\n          if (fields.length > 3) {\n            t.number = fields[0];\n            t.name = fields[1];\n            t.affiliation = fields[2];\n            t.pitNum = fields[3];\n          } else if (fields.length > 2) {\n            t.number = fields[0];\n            t.name = fields[1];\n            t.affiliation = fields[2];\n          } else if (fields.length > 1) {\n            t.number = fields[0];\n            t.name = fields[1];\n          } else {\n            t.name = l;\n          }\n        }\n        if (t.name === \"\") t.name = savedName;\n        if (t.number === \"\") t.number = savedNum;\n        if (t.affiliation === \"\") t.affiliation = savedAffil;\n        if (t.pitNum === \"\") t.pitNum = savedPit;\n      });\n    }\n    // toDataUrl(mqlogo, (base) => {this.addNationalSponsor(base);});\n    // toDataUrl(googlelogo, (base) => {this.addNationalSponsor(base);});\n    // toDataUrl(fordlogo, (base) => {this.addNationalSponsor(base);});\n    // toDataUrl(legoedlogo, (base) => {this.addNationalSponsor(base);});\n    this.pageFormat = new PageFormat();\n    console.log(\"B\");\n\n    this.teams = this.teams.sort((a, b) => {\n      return parseInt(a.number, 10) - parseInt(b.number, 10);\n    });\n\n    const nAwardsNeeded = this.nTeams * 0.4;\n    const distances = EventParams.AWARD_NAMES.map((a) =>\n      Math.abs(a.length - nAwardsNeeded)\n    );\n    console.log(distances);\n    const closestIdx = distances.findIndex((d) => d === Math.min(...distances));\n    this.awardStyleIdx = closestIdx;\n    // this.consolidatedAwards = this.nTeams * 0.4 < 8;\n    // console.log(this.consolidatedAwards);\n    // console.log(this.nTeams * 0.4);\n    // let nCoreAwards = this.consolidatedAwards ? 4 : 10;\n    // this.judgesAwards = Math.min(\n    //   Math.max(Math.ceil(this.nTeams * 0.4) - nCoreAwards, 0),\n    //   6\n    // );\n\n    // First guesses at all schedule parameters.  User can then tweak to their hearts' content without auto updates\n    let actualStart = this.startTime.clone(30);\n    let actualEnd = this.endTime.clone(this.consolidatedAwards ? -30 : -60);\n    let nLocs = Math.ceil(this.nTeams / 4); // At a guess, see 4 teams each\n    let nJudgings = Math.ceil(this.nTeams / nLocs);\n\n    let startLunch = new DateTime(\n      Math.max(actualStart.mins + nJudgings * 15, 12 * 60),\n      this.days\n    );\n    let endLunch = startLunch.clone(30);\n\n    this.sessions.push(\n      new SessionParams(\n        this.uid_counter++,\n        TYPES.BREAK,\n        \"Opening Ceremony\",\n        1,\n        this.startTime.clone(),\n        actualStart.clone(),\n        true\n      )\n    );\n    this.getSession(this.uid_counter - 1).universal = true;\n    this.sessions.push(\n      new SessionParams(\n        this.uid_counter++,\n        TYPES.BREAK,\n        \"Lunch\" + (this.nDays > 1 ? \" 1\" : \"\"),\n        1,\n        startLunch.clone(),\n        endLunch.clone()\n      )\n    );\n    this.getSession(this.uid_counter - 1).universal = true;\n    this.sessions.push(\n      new SessionParams(\n        this.uid_counter++,\n        TYPES.BREAK,\n        \"Closing Ceremony\",\n        1,\n        actualEnd.clone(),\n        this.endTime.clone(),\n        true\n      )\n    );\n    this.getSession(this.uid_counter - 1).universal = true;\n\n    let nightStart = new DateTime(this.endTime.mins % (24 * 60), this.days);\n    let nightEnd = this.startTime.clone();\n\n    for (let i = 1; i < this.days.length; i++) {\n      nightEnd = nightEnd.clone(24 * 60);\n      this.sessions.push(\n        new SessionParams(\n          this.uid_counter++,\n          TYPES.BREAK,\n          \"Night\" + (this.nDays > 2 ? \" \" + i : \"\"),\n          1,\n          nightStart.clone(),\n          nightEnd.clone(),\n          true\n        )\n      );\n      this.getSession(this.uid_counter - 1).universal = true;\n      nightStart = nightStart.clone(24 * 60);\n\n      this.sessions.push(\n        new SessionParams(\n          this.uid_counter++,\n          TYPES.BREAK,\n          \"Lunch \" + (i + 1),\n          1,\n          startLunch.clone(24 * 60),\n          endLunch.clone(24 * 60)\n        )\n      );\n      this.getSession(this.uid_counter - 1).universal = true;\n    }\n\n    let timeAvailable = this.endTime.mins - this.startTime.mins;\n    this.sessions\n      .filter((s) => s.type === TYPES.BREAK)\n      .forEach((s) => {\n        timeAvailable = timeAvailable - (s.endTime.mins - s.startTime.mins);\n      });\n\n    if (this.pilot) {\n      // let rdLen = matchLen + matchBuf;\n      // let rdBuf = 0;\n      let rdLen = 10;\n      let rdBuf = 5;\n      let rdOverlap =\n        this.nTables === 2 ? 0 : 15 - Math.ceil(30 / this.nTables);\n\n      timeAvailable =\n        timeAvailable - (this.nTeams / 2) * (rdLen + rdBuf - rdOverlap);\n      let timePerMatch = Math.floor(\n        timeAvailable / ((this.nTeams * (2 + this.nPracs)) / 2)\n      );\n\n      let matchLen = Math.min(timePerMatch, 4);\n      let matchBuf = Math.max(timePerMatch - matchLen - 1, 0);\n      let matchOverlap = 0; //If matches need an overlap, set it here.\n\n      let nSims = 2;\n      for (let i = 1; i <= this.nPracs; i++) {\n        let S = new SessionParams(\n          this.uid_counter++,\n          TYPES.MATCH_ROUND_PRACTICE,\n          \"Practice Round \" + i,\n          this.nTables,\n          actualStart.clone(),\n          actualEnd.clone()\n        );\n        S.nSims = nSims;\n        S.len = matchLen;\n        S.buf = matchBuf;\n        S.overlap = 0;\n        this.sessions.push(S);\n      }\n      for (let i = 1; i <= 3; i++) {\n        let S = new SessionParams(\n          this.uid_counter++,\n          TYPES.MATCH_ROUND,\n          \"Round \" + i,\n          this.nTables,\n          actualStart.clone(),\n          actualEnd.clone()\n        );\n        S.nSims = nSims;\n        S.len = i === 1 ? rdLen : matchLen;\n        S.buf = i === 1 ? rdBuf : matchBuf;\n        S.overlap = i === 1 ? rdOverlap : matchOverlap;\n        this.sessions.push(S);\n      }\n      let roundOneLength = (rdLen + rdBuf - rdOverlap) * (this.nTeams / 2);\n      let roundOneEnd = actualStart.mins + roundOneLength;\n      console.log(this.sessions[1]);\n      console.log(roundOneEnd);\n      let dif = Math.ceil(roundOneEnd - this.sessions[1].startTime.mins);\n      console.log(dif);\n      if (dif > 0) {\n        this.sessions[1].startTime = this.sessions[1].startTime.clone(dif);\n        this.sessions[1].endTime = this.sessions[1].endTime.clone(dif);\n      }\n    } else {\n      let timePerMatch = Math.floor(\n        timeAvailable / ((this.nTeams * (3 + this.nPracs)) / 2)\n      );\n\n      let matchLen = Math.min(timePerMatch, 4);\n      let matchBuf = Math.max(timePerMatch - matchLen - 1, 0);\n      let matchOverlap = 0; //If matches need an overlap, set it here.\n\n      let bufDiff = 3 + this.nPracs - 1; // Make the first round slower than the rest\n\n      let nSims = 2;\n      let first = true;\n      for (let i = 1; i <= this.nPracs; i++) {\n        let S = new SessionParams(\n          this.uid_counter++,\n          TYPES.MATCH_ROUND_PRACTICE,\n          \"Practice Round \" + i,\n          this.nTables,\n          actualStart.clone(),\n          actualEnd.clone()\n        );\n        S.nSims = nSims;\n        S.len = matchLen;\n        S.buf = first ? matchBuf + bufDiff : matchBuf - 1;\n        S.overlap = matchOverlap;\n        this.sessions.push(S);\n        first = false;\n      }\n      for (let i = 1; i <= 3; i++) {\n        let S = new SessionParams(\n          this.uid_counter++,\n          TYPES.MATCH_ROUND,\n          \"Round \" + i,\n          this.nTables,\n          actualStart.clone(),\n          actualEnd.clone()\n        );\n        S.nSims = nSims;\n        S.len = matchLen;\n        S.buf = first ? matchBuf + bufDiff : matchBuf - 1;\n        S.overlap = matchOverlap;\n        this.sessions.push(S);\n        first = false;\n      }\n      // this.sessions.push(new SessionParams(this.uid_counter++, TYPES.JUDGING, \"Robot Design Judging\", nLocs,\n      //     actualStart.clone(), actualEnd.clone()));\n      // this.sessions.push(new SessionParams(this.uid_counter++, TYPES.JUDGING, \"Core Values Judging\", nLocs,\n      //     actualStart.clone(), actualEnd.clone()));\n    }\n    this.sessions.push(\n      new SessionParams(\n        this.uid_counter++,\n        TYPES.JUDGING,\n        \"Judging\",\n        nLocs,\n        actualStart.clone(),\n        actualEnd.clone()\n      )\n    );\n\n    this.sessions.sort((a, b) => {\n      return a.startTime === b.startTime\n        ? a.id - b.id\n        : a.startTime.mins - b.startTime.mins;\n    });\n\n    this.volunteers = [];\n    this.buildVolunteerSheet();\n  }\n\n  buildVolunteerSheet(nJudges) {\n    if (!nJudges) {\n      nJudges = this.sessions.find((s) => {\n        return s.type === TYPES.JUDGING;\n      }).nLocs;\n    }\n    // NOTE: Have to make sure that if volunters have already been designed, we just update the numbers.\n    if (this.volunteers.length > 0) {\n      // Just recalculate the number of volunteers\n      this.volunteers.forEach((v) => {\n        let numberOfVols = v.count;\n        if (v.per === \"1\") numberOfVols *= 1;\n        else if (v.per === \"RDJ\")\n          // Volunteers per robot design judging session\n          numberOfVols *= nJudges;\n        else if (v.per === \"CVJ\")\n          // Volunteers per core values judging session\n          numberOfVols *= nJudges;\n        else if (v.per === \"RPJ\")\n          // Volunteers per project judging session\n          numberOfVols *= nJudges;\n        else if (v.per === \"J\")\n          // Volunteers per project judging session\n          numberOfVols *= nJudges;\n        else if (v.per === \"T\")\n          // Volunteers per robot table\n          numberOfVols *= this.nTables;\n        nJudges = this.sessions.find((s) => {\n          return s.type === TYPES.JUDGING;\n        }).nLocs;\n        while (v.staff.length < numberOfVols) v.staff.push(\"\");\n        while (v.staff.length > numberOfVols) {\n          let S = v.staff.pop();\n          if (S !== \"\") {\n            v.staff.push(S);\n            break;\n          }\n        }\n      });\n    } else {\n      Volunteers.roles.forEach((v) => {\n        let vol = { name: v.name, count: v.count, per: v.per };\n        vol.staff = [];\n        let numberOfVols = v.count;\n        if (v.per === \"1\") numberOfVols *= 1;\n        else if (v.per === \"RDJ\")\n          // Volunteers per robot design judging session\n          numberOfVols *= nJudges;\n        else if (v.per === \"CVJ\")\n          // Volunteers per core values judging session\n          numberOfVols *= nJudges;\n        else if (v.per === \"RPJ\")\n          // Volunteers per project judging session\n          numberOfVols *= nJudges;\n        else if (v.per === \"T\")\n          // Volunteers per robot table\n          numberOfVols *= this.nTables;\n        for (let i = 0; i < numberOfVols; i++) vol.staff.push(\"\");\n        this.volunteers.push(vol);\n      });\n    }\n  }\n\n  get nJudges() {\n    return this.sessions.find((s) => {\n      return s.type === TYPES.JUDGING;\n    }).nLocs;\n  }\n\n  get nTeams() {\n    return this._teams.length;\n  }\n\n  //Given a new number of teams, update things...\n  set nTeams(value) {\n    while (this.teams.length < value) {\n      let maxId = 0;\n      this.teams.forEach((t) => {\n        maxId = maxId > t.id ? maxId : t.id;\n      });\n      maxId += Math.floor(Math.random() * 100 + 1);\n      this.teams.push(new TeamParams(maxId, this.teams.length + 1));\n    }\n    while (this.teams.length > value) this.teams.pop();\n    this.teams = this.teams.sort((a, b) => {\n      return parseInt(a.number, 10) - parseInt(b.number, 10);\n    });\n  }\n\n  getTeam(id) {\n    for (let i = 0; i < this.teams.length; i++) {\n      if (this.teams[i].id === id) return this.teams[i];\n    }\n    return null;\n  }\n\n  getSession(id) {\n    for (let i = 0; i < this.sessions.length; i++) {\n      if (this.sessions[i].id === id) return this.sessions[i];\n    }\n    return null;\n  }\n\n  getSessions(type) {\n    let A = [];\n    for (let i = 0; i < this.sessions.length; i++) {\n      if (this.sessions[i].type === type) A.push(this.sessions[i]);\n    }\n    return A;\n  }\n\n  getSessionDataGrid(id, pdf = false) {\n    let session = this.getSession(id);\n    let grid = [];\n    let cols = [{ value: \"#\" }, { value: \"Tijd\" }];\n    session.locations.forEach((x) => cols.push({ value: x }));\n    grid.push(cols);\n\n    let applyingBreaks = [];\n    this.sessions\n      .filter((S) => S.type === TYPES.BREAK && S.applies(session.id))\n      .forEach((S) => {\n        if (overlaps(S, session)) applyingBreaks.push(S);\n      });\n    let schedule = session.schedule.slice();\n    applyingBreaks.forEach((br) =>\n      schedule.push(new Instance(br.id, \"\", br.actualStartTime, null))\n    );\n\n    schedule\n      .sort((a, b) => a.time.mins - b.time.mins)\n      .forEach((instance) => {\n        let A = [];\n        A.push({ value: instance.num });\n        A.push({ value: instance.time.time });\n        if (this.getSession(instance.session_id).type === TYPES.BREAK) {\n          A.push({\n            value: this.getSession(instance.session_id).name,\n            colSpan: session.nLocs,\n          });\n          grid.push(A);\n        } else {\n          let diff = session.nLocs;\n          for (let dummy = 0; dummy < instance.loc; dummy++) {\n            diff--;\n            A.push({ value: \"\" });\n          }\n          for (let i = 0; i < instance.teams.length; i++) {\n            let x = instance.teams[i];\n            diff--;\n            if (pdf)\n              A.push({\n                value: x\n                  ? this.getTeam(x).number + \"\\n\" + this.getTeam(x).name\n                  : \" X \",\n              });\n            else\n              A.push({\n                value: x ? this.getTeam(x).number : \" X \",\n                id: x ? x : null,\n              });\n          }\n          while (diff-- > 0) A.push({ value: \"\" });\n          grid.push(A);\n        }\n      });\n    return grid;\n  }\n\n  getPilotDataGrid() {\n    let T = [];\n    this.teams.forEach((t) => T.push(t));\n    shuffle(T);\n    let grid = [];\n    let w = this.nJudges;\n    while (T.length > 0) {\n      let row = [];\n      for (let i = 0; i < w; i++) {\n        let x = T.pop();\n        row.push({ value: x ? x.number + \"\\n\" + x.name : \" X \" });\n      }\n      grid.push(row);\n    }\n    return grid;\n  }\n\n  getIndivDataGrid(compact = false) {\n    // Always sort before doing things if you need a particular order.\n    this.teams.sort((a, b) => a.number - b.number);\n    this.sessions.sort((a, b) => {\n      return a.id - b.id;\n    });\n    this.teams.forEach((team) => {\n      team.schedule.sort((a, b) => {\n        return (\n          this.getSession(a.session_id).id - this.getSession(b.session_id).id\n        );\n      });\n    });\n\n    let grid = [];\n    let usesSurrogates = false;\n    this.sessions.forEach((s) => {\n      if (s.usesSurrogates) usesSurrogates = true;\n    });\n    grid[0] = [{ value: \"Team\", colSpan: 2 }];\n    for (let i = 0; i < this.sessions.length; i++) {\n      if (this.sessions[i].type === TYPES.BREAK) continue;\n      grid[0].push({ colSpan: compact ? 2 : 3, value: this.sessions[i].name });\n    }\n    grid[0].push({ value: \"Min. Reistijd\" });\n    if (usesSurrogates)\n      grid[0].push({ colSpan: compact ? 2 : 3, value: \"Surrogate\" });\n    grid[1] = [{ value: \"#\" }, { value: \"Naam\" }];\n    for (let i = 0; i < this.sessions.length; i++) {\n      if (this.sessions[i].type === TYPES.BREAK) continue;\n      for (let j = 0; j < this.sessions[i].instances; j++) {\n        if (!compact) grid[1].push({ value: \"#\" });\n        grid[1].push({ value: \"Tijd\" });\n        grid[1].push({ value: \"Loc\" });\n      }\n    }\n    grid[1].push({ value: \"\" });\n    if (usesSurrogates) {\n      if (!compact) grid[1].push({ value: \"#\" });\n      grid[1].push({ value: \"Tijd\" });\n      grid[1].push({ value: \"Loc\" });\n    }\n\n    for (let i = 0; i < this.teams.length; i++) {\n      let row = [];\n      let team = this.teams[i];\n      row.push({ value: team.number });\n      row.push({ value: team.name });\n      for (let j = 0; j < team.schedule.length; j++) {\n        if (this.getSession(team.schedule[j].session_id).type === TYPES.BREAK)\n          continue;\n        if (\n          team.schedule[j].teams &&\n          team.schedule[j].teams.length -\n            team.schedule[j].teams.indexOf(team.id) <=\n            team.schedule[j].surrogates\n        )\n          continue; // Surrogate\n        if (!team.schedule[j].teams) {\n          row.push({ value: \"\" });\n          row.push({ value: \"\" });\n          row.push({ value: \"\" });\n        } else {\n          if (!compact) row.push({ value: team.schedule[j].num });\n          row.push({ value: team.schedule[j].time.time });\n          if (team.schedule[j].loc === -1) row.push({ value: \"--\" });\n          else\n            row.push({\n              value: this.getSession(team.schedule[j].session_id).locations[\n                team.schedule[j].teams.indexOf(team.id) + team.schedule[j].loc\n              ],\n            });\n        }\n      }\n      // row.push({value: \"?\"});\n      row.push({ value: \"\" + this.minTravelTime(team) });\n      let hadASurrogate = false;\n      for (let j = 0; j < team.schedule.length; j++) {\n        if (!team.schedule[j].teams) continue;\n        if (\n          !(\n            team.schedule[j].teams.length -\n              team.schedule[j].teams.indexOf(team.uid) >\n            team.schedule[j].surrogates\n          )\n        ) {\n          hadASurrogate = true;\n          if (!compact) row.push({ value: team.schedule[j].num });\n          row.push({ value: team.schedule[j].time.time });\n          if (team.schedule[j].loc === -1) row.push({ value: \"--\" });\n          else\n            row.push({\n              value: this.getSession(team.schedule[j].session_id).locations[\n                team.schedule[j].teams.indexOf(team.id) + team.schedule[j].loc\n              ],\n            });\n        }\n      }\n      if (!hadASurrogate && usesSurrogates) {\n        if (!compact) row.push({ value: \"\" });\n        row.push({ value: \"\" });\n        row.push({ value: \"\" });\n      }\n      grid.push(row);\n    }\n    return grid;\n  }\n\n  /**\n     Increments given time, skipping breaks.\n     @return Returns the incremented time.\n     */\n  timeInc(time, inc, sessionID) {\n    let filt = sessionID\n      ? (x) => x.type === TYPES.BREAK && x.applies(sessionID)\n      : (x) => x.type === TYPES.BREAK;\n    let newMins = time.mins + inc;\n    this.sessions.filter(filt).forEach((x) => {\n      if (\n        time.mins + inc >= x.actualStartTime.mins &&\n        time.mins < x.actualEndTime.mins\n      )\n        newMins = x.actualEndTime.mins;\n    });\n    return newMins;\n  }\n\n  /**\n     Increments given time, ceremonies and nights.\n     @return Returns the incremented time.\n     */\n  timeIncPrac(time, inc) {\n    let filt = (x) => x.type === TYPES.BREAK && x.noPractice;\n    let newMins = time.mins + inc;\n    this.sessions.filter(filt).forEach((x) => {\n      if (\n        time.mins + inc >= x.actualStartTime.mins &&\n        time.mins < x.actualEndTime.mins\n      )\n        newMins = x.actualEndTime.mins;\n    });\n    return newMins;\n  }\n\n  /** Assuming the given session has the most up-to-date location names, synchronise other session to this **/\n  syncLocs(S) {\n    console.log(\"Sync\");\n    if (S.type !== TYPES.MATCH_ROUND && S.type !== TYPES.MATCH_ROUND_PRACTICE)\n      return;\n    this.sessions\n      .filter(\n        (x) =>\n          x.type === TYPES.MATCH_ROUND || x.type === TYPES.MATCH_ROUND_PRACTICE\n      )\n      .forEach((x) => {\n        x.locations = S.locations;\n        console.log(x);\n      });\n  }\n\n  get version() {\n    return this._version;\n  }\n\n  get title() {\n    return this._title;\n  }\n\n  set title(value) {\n    this._title = value;\n  }\n\n  get startTime() {\n    return this._startTime;\n  }\n\n  set startTime(value) {\n    this._startTime = value;\n  }\n\n  get endTime() {\n    return this._endTime;\n  }\n\n  set endTime(value) {\n    this._endTime = value;\n  }\n\n  get sessions() {\n    return this._sessions;\n  }\n\n  set sessions(value) {\n    this._sessions = value;\n  }\n\n  get teams() {\n    return this._teams;\n  }\n\n  set teams(value) {\n    this._teams = value;\n  }\n\n  get awards() {\n    return this._awards;\n  }\n\n  set awards(value) {\n    this._awards = value;\n  }\n\n  get judgesAwards() {\n    return this._judgesAwards;\n  }\n\n  set judgesAwards(value) {\n    this._judgesAwards = value;\n  }\n\n  get consolidatedAwards() {\n    return this._consolidatedAwards;\n  }\n\n  set consolidatedAwards(value) {\n    this._consolidatedAwards = value;\n  }\n\n  get awardStyle() {\n    return this._awardStyle;\n  }\n\n  set awardStyle(value) {\n    this._awardStyle = value;\n  }\n\n  get awardStyleIdx() {\n    return EventParams.AWARD_STYLES.findIndex((x) => {\n      return x === this._awardStyle;\n    });\n  }\n\n  set awardStyleIdx(value) {\n    console.log(value);\n    this._awardStyle = EventParams.AWARD_STYLES[value];\n    this._awards = EventParams.AWARD_NAMES[value];\n    console.log(this._awards);\n  }\n\n  get awardPerc() {\n    let idx = this.awardStyleIdx;\n    console.log(\"Award style index: \" + this.awardStyleIdx);\n    console.log(\"Award style: \" + this._awardStyle);\n\n    let nTrophies = this.awards.length;\n    //   EventParams.AWARD_NAMES[this.awardStyleIdx].length + this.judgesAwards;\n    return Math.round((100 * nTrophies) / this.nTeams);\n  }\n\n  get minTravel() {\n    return this._minTravel;\n  }\n\n  set minTravel(value) {\n    this._minTravel = value;\n  }\n\n  get extraTime() {\n    return this._extraTime;\n  }\n\n  set extraTime(value) {\n    this._extraTime = value;\n  }\n\n  get nTables() {\n    return this._nTables;\n  }\n\n  set nTables(value) {\n    this._nTables = value;\n  }\n\n  get display() {\n    return this._display;\n  }\n\n  set display(d) {\n    this._display = d;\n  }\n\n  get pilot() {\n    return this._pilot;\n  }\n\n  set pilot(p) {\n    this._pilot = p;\n  }\n\n  get volunteers() {\n    return this._volunteers;\n  }\n\n  set volunteers(p) {\n    this._volunteers = p;\n  }\n\n  get nDays() {\n    return this._days.length;\n  }\n\n  set nDays(value) {\n    let A = this.days;\n    while (A.length < value) A.push(\"Dag \" + (this.days.length + 1));\n    while (A.length > value) A.pop();\n    this.days = A;\n  }\n\n  get days() {\n    return this._days;\n  }\n\n  // When changing the days, we have to make sure every DateTime gets the updated reference.\n  set days(value) {\n    this._days = value;\n    this.startTime.days = this._days;\n    this.endTime.days = this._days;\n    this.sessions.forEach((S) => {\n      S.startTime.days = this._days;\n      S.actualStartTime.days = this._days;\n      S.endTime.days = this._days;\n      S.actualEndTime.days = this._days;\n    });\n    this.teams.forEach((T) => {\n      T.startTime.days = this._days;\n      T.endTime.days = this._days;\n    });\n  }\n\n  addLocalSponsor(value) {\n    this.sponsors.local.push(value);\n  }\n\n  addNationalSponsor(value) {\n    this.sponsors.national.push(value);\n  }\n\n  deleteLocalSponsor(idx) {\n    this.sponsors.local.splice(idx, 1);\n  }\n\n  static freeze(o) {\n    return {\n      _class: \"EventParams\",\n      _version: o._version,\n      _title: o._title,\n      _teams: o._teams,\n      uid_counter: o.uid_counter,\n      _startTime: o._startTime,\n      _endTime: o._endTime,\n      _sessions: o._sessions,\n      _days: o._days,\n      _pilot: o._pilot,\n      _nTables: o._nTables,\n      errors: o.errors,\n      _extraTime: o._extraTime,\n      _minTravel: o._minTravel,\n      _judgesAwards: o._judgesAwards,\n      _awards: o._awards,\n      _consolidatedAwards: o._consolidatedAwards,\n      _awardStyle: o._awardStyle,\n      _volunteers: o._volunteers,\n      pageFormat: o.pageFormat,\n      sponsors: o.sponsors.local,\n    };\n  }\n\n  static thaw(o) {\n    let E = new EventParams(o._version, o._title);\n    console.log(\"Saved object:\");\n    console.log(o);\n    E._teams = o._teams;\n    E.uid_counter = o.uid_counter;\n    E._startTime = o._startTime;\n    E._endTime = o._endTime;\n    E._minTravel = o._minTravel;\n    E._extraTime = o._extraTime;\n    E._sessions = o._sessions;\n    E._days = o._days;\n    E._pilot = o._pilot;\n    E._nTables = o._nTables || 4;\n    E.errors = o.errors;\n    E._judgesAwards = o._judgesAwards;\n    E._awards = o._awards;\n    E._consolidatedAwards = o._consolidatedAwards;\n    E._awardStyle = o._awardStyle || EventParams.AWARD_STYLES[2];\n    E._volunteers = o._volunteers;\n    E.sponsors.local = o.sponsors;\n    E.pageFormat = o.pageFormat;\n    if (!E.errors) E.errors = Infinity;\n    console.log(E);\n    return E;\n  }\n\n  /** ========================== UTILITIES ========================== **/\n\n  /**\n     Return true if the team can do the given instance.\n     Returns false if they don't have time to come from a previous instance or go to a later one.\n     if 'excl' is given, do not consider that session ID when checking this.\n     **/\n  canDo(team, instance, excl) {\n    if (\n      team.extraTime &&\n      !instance.extra &&\n      this.getSession(instance.session_id).type !== TYPES.BREAK\n    )\n      return false;\n    if (\n      team.excludeJudging &&\n      this.getSession(instance.session_id).type === TYPES.JUDGING\n    )\n      return false;\n    for (let i = 0; i < team.schedule.length; i++) {\n      if (this.getSession(team.schedule[i].session_id).type === TYPES.BREAK) {\n        if (\n          !this.getSession(team.schedule[i].session_id).applies(\n            instance.session_id\n          )\n        )\n          continue;\n        if (this.getSession(instance.session_id).type === TYPES.BREAK) continue;\n      }\n      let startA = team.schedule[i].time.mins;\n      if (excl && team.schedule[i].session_id === excl) continue;\n      let extra = 0;\n      if (team.schedule[i].extra) extra = this.extraTime;\n      let endA = 0;\n      if (this.getSession(team.schedule[i].session_id).type === TYPES.BREAK)\n        endA = startA + this.getSession(team.schedule[i].session_id).len;\n      else\n        endA =\n          startA +\n          this.getSession(team.schedule[i].session_id).len +\n          extra +\n          this.minTravel;\n      let startB = instance.time.mins;\n      extra = 0;\n      if (instance.extra) extra = this.extraTime;\n\n      let endB = 0;\n      if (this.getSession(team.schedule[i].session_id).type === TYPES.BREAK)\n        endB = startB + this.getSession(instance.session_id).len;\n      else\n        endB =\n          startB +\n          this.getSession(instance.session_id).len +\n          this.minTravel +\n          extra;\n      if (\n        (team.startTime.mins && startB < team.startTime.mins) ||\n        (team.endTime.mins && endB > team.endTime.mins)\n      )\n        return false;\n      if (\n        startA === startB ||\n        (startA < startB && endA > startB) ||\n        (startB < startA && endB > startA)\n      )\n        return false;\n    }\n    return true;\n  }\n\n  swapTeams(sId, teamA, teamB) {\n    let a = this.getTeam(teamA);\n    let b = this.getTeam(teamB);\n    let iA = null;\n    let iB = null;\n    let canA = false;\n    let canB = false;\n    console.log(a);\n    a.schedule.forEach((i) => {\n      if (i.session_id === sId) iA = i;\n    });\n    console.log(b);\n    b.schedule.forEach((i) => {\n      if (i.session_id === sId) iB = i;\n    });\n\n    if (this.canDo(a, iB, sId)) canA = true;\n    if (this.canDo(b, iA, sId)) canB = true;\n\n    if (canA && canB) {\n      let locA = iA.teams.indexOf(teamA);\n      let locB = iB.teams.indexOf(teamB);\n      iA.teams[locA] = teamB;\n      iB.teams[locB] = teamA;\n      a.schedule.splice(a.schedule.indexOf(iA), 1);\n      a.schedule.push(iB);\n      b.schedule.splice(b.schedule.indexOf(iB), 1);\n      b.schedule.push(iA);\n      console.log(iA.teams);\n      console.log(iB.teams);\n      return null;\n    } else if (canA) {\n      return \"Team \" + b.number + \" can't do that swap.\";\n    } else if (canB) {\n      return \"Team \" + a.number + \" can't do that swap.\";\n    } else {\n      return \"Neither team can do that\";\n    }\n  }\n\n  minTravelTime(team) {\n    let minTravel = Infinity;\n    team.schedule\n      .filter((i) => this.getSession(i.session_id).type !== TYPES.BREAK)\n      .forEach((i) => {\n        team.schedule\n          .filter((i) => this.getSession(i.session_id).type !== TYPES.BREAK)\n          .forEach((j) => {\n            if (i !== j) {\n              let sA = i.time.mins;\n              let eA =\n                i.time.mins +\n                this.getSession(i.session_id).len +\n                (i.extraTime ? this.extraTime : 0);\n              let sB = j.time.mins;\n              let eB =\n                j.time.mins +\n                this.getSession(j.session_id).len +\n                (i.extraTime ? this.extraTime : 0);\n              let dA = sB - eA;\n              let dB = sA - eB;\n              let d = dA < 0 ? dB : dA;\n              minTravel = minTravel > d ? d : minTravel;\n            }\n          });\n      });\n    return minTravel;\n  }\n}\n","import React from 'react';\n\nimport { Input, Col, FormGroup, Label } from 'reactstrap';\nimport uniqueId from 'react-html-id';\n\nexport default class TextInput extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n\n    uniqueId.enableUniqueIds(this);\n  }\n\n  handleChange(event) {\n    const val = event.target.value;\n    this.props.onChange(val);\n  }\n\n  render() {\n    return (\n      <FormGroup row>\n        <Label\n          hidden={this.props.nolabel}\n          sm={this.props.large ? 2 : 6}\n          for={this.nextUniqueId()}\n        >\n          {this.props.label}\n        </Label>\n        <Col sm={this.props.nolabel ? 12 : this.props.large ? 10 : 6}>\n          <Input\n            type='text'\n            id={this.lastUniqueId()}\n            value={this.props.value}\n            onChange={this.handleChange}\n          />\n        </Col>\n      </FormGroup>\n    );\n  }\n}\n","import React from 'react';\n\nimport { Input, Col, FormGroup, Label } from 'reactstrap';\nimport uniqueId from 'react-html-id';\n\nexport default class NumberInput extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n\n    uniqueId.enableUniqueIds(this);\n  }\n\n  handleChange(event) {\n    const val = Number.parseInt(event.target.value, 10);\n    this.props.onChange(val);\n  }\n\n  render() {\n    return (\n      <FormGroup row>\n        <Label sm={this.props.large ? 2 : 6} for={this.nextUniqueId()}>\n          {this.props.label}\n        </Label>\n        <Col sm={this.props.large ? 10 : 6}>\n          <Input\n            type='number'\n            min={this.props.min}\n            step={this.props.step || 1}\n            max={this.props.max}\n            id={this.lastUniqueId()}\n            value={this.props.value}\n            onChange={this.handleChange}\n          />\n        </Col>\n      </FormGroup>\n    );\n  }\n}\n","import React from 'react';\n\nimport { FormGroup, Label, Button, Col } from 'reactstrap';\nimport uniqueId from 'react-html-id';\n\nexport default class BooleanInput extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.toggleChecked = this.toggleChecked.bind(this);\n    uniqueId.enableUniqueIds(this);\n  }\n\n  toggleChecked() {\n    this.props.onChange(!this.props.value);\n  }\n\n  render() {\n    return (\n      <FormGroup row>\n        <Label sm={this.props.large ? 2 : 6} for={this.nextUniqueId()}>\n          {this.props.label}\n        </Label>\n        <Col sm={this.props.large ? 10 : 6}>\n          <Button\n            disabled={this.props.disabled}\n            color={this.props.value ? 'success' : 'danger'}\n            onClick={this.toggleChecked}\n          >\n            {this.props.value ? 'Yes' : 'No'}\n          </Button>\n        </Col>\n      </FormGroup>\n    );\n  }\n}\n","import React from \"react\";\nimport TextInput from \"../inputs/TextInput\";\nimport NumberInput from \"../inputs/NumberInput\";\n//import BooleanInput from '../inputs/BooleanInput';\n\nimport { EventParams } from \"../api/EventParams\";\n\nimport {\n  Container,\n  Table,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownItem,\n  DropdownMenu,\n  FormGroup,\n  Label,\n  Col,\n} from \"reactstrap\";\n\nimport ReactDataSheet from \"react-datasheet\";\nimport BooleanInput from \"../inputs/BooleanInput\";\n\nexport default class BasicsForm extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      grid: this.getDataGrid(),\n      awards: this.props.event.awards.map((a) => ({\n        name: a,\n        checked: true,\n      })),\n      selectedIdx: EventParams.AWARD_STYLES.findIndex((x) => {\n        return x === this.props.event.awardStyle;\n      }),\n    };\n\n    this.updateTitle = this.updateTitle.bind(this);\n    this.updateMinTravel = this.updateMinTravel.bind(this);\n    this.updateExtraTime = this.updateExtraTime.bind(this);\n    this.updateNDays = this.updateNDays.bind(this);\n    this.updateDays = this.updateDays.bind(this);\n    // this.updateJudgesAwards = this.updateJudgesAwards.bind(this);\n    this.updateAwardStyle = this.updateAwardStyle.bind(this);\n    this.toggleAward = this.toggleAward.bind(this);\n    this.updateConsolidatedAwards = this.updateConsolidatedAwards.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.getDataGrid = this.getDataGrid.bind(this);\n  }\n\n  getDataGrid() {\n    let grid = [];\n    for (let i = 0; i < this.props.event.days.length; i++) {\n      grid.push([]);\n      grid[i].push({ value: \"Day \" + (i + 1), readOnly: true });\n      grid[i].push({ value: this.props.event.days[i] });\n    }\n    return grid;\n  }\n\n  updateTitle(newTitle) {\n    let data = this.props.event;\n    data.title = newTitle;\n    this.handleChange(data);\n  }\n\n  updateMinTravel(value) {\n    let data = this.props.event;\n    data.minTravel = value;\n    this.handleChange(data);\n  }\n\n  // updateJudgesAwards(value) {\n  //     let data = this.props.event;\n  //     data.judgesAwards = value;\n  //     this.handleChange(data);\n  // }\n\n  updateConsolidatedAwards(value) {\n    let data = this.props.event;\n    data.consolidatedAwards = value;\n    this.handleChange(data);\n  }\n\n  updateAwardStyle(value) {\n    let data = this.props.event;\n    data.awardStyleIdx = value;\n    data.awards = EventParams.AWARD_NAMES[value];\n    this.setState({\n      selectedIdx: value,\n      awards: EventParams.AWARD_NAMES[value].map((a) => ({\n        name: a,\n        checked: true,\n      })),\n    });\n    this.handleChange(data);\n  }\n\n  toggleAward(name) {\n    const updatedAwards = this.state.awards.map((a) =>\n      a.name === name ? { ...a, checked: !a.checked } : a\n    );\n\n    let data = this.props.event;\n    data.awards = updatedAwards.filter((a) => a.checked).map((a) => a.name);\n\n    this.setState({\n      awards: updatedAwards,\n    });\n  }\n\n  updateExtraTime(value) {\n    let data = this.props.event;\n    data.extraTime = value;\n    this.handleChange(data);\n  }\n\n  updateDays(changes) {\n    const grid = this.state.grid.map((row) => [...row]);\n    changes.forEach(({ cell, row, col, value }) => {\n      grid[row][col] = { ...grid[row][col], value };\n    });\n    this.setState({ grid });\n    let A = [];\n    for (let i = 0; i < grid.length; i++) {\n      A.push(grid[i][1].value);\n    }\n    let S = this.props.event;\n    S.days = A;\n    this.props.onChange(S);\n  }\n\n  updateNDays(value) {\n    let E = this.props.event;\n    E.nDays = value;\n    this.setState({ grid: this.getDataGrid() });\n    this.handleChange(E);\n  }\n\n  handleChange(data) {\n    this.props.onChange(data);\n  }\n\n  render() {\n    let dayInput = (\n      <div>\n        {/*<NumberInput label=\"Number of days\" large value={this.props.event.days.length} onChange={this.updateNDays}/>*/}\n        <ReactDataSheet\n          data={this.state.grid}\n          valueRenderer={(cell) => cell.value}\n          sheetRenderer={(props) => (\n            <Table className=\"datagrid-custom\">\n              <thead>\n                <tr>\n                  <th>Day number</th>\n                  <th>Name</th>\n                </tr>\n              </thead>\n              <tbody>{props.children}</tbody>\n            </Table>\n          )}\n          onCellsChanged={(changes) => this.updateDays(changes)}\n        />\n      </div>\n    );\n    return (\n      <Container>\n        <TextInput\n          large\n          label=\"Title: \"\n          value={this.props.event.title}\n          onChange={this.updateTitle}\n        />\n        <hr />\n        {this.props.cosmetic || (\n          <NumberInput\n            label=\"Min. travel (mins)\"\n            large\n            value={this.props.event.minTravel}\n            onChange={this.updateMinTravel}\n          />\n        )}\n        {this.props.advanced && !this.props.cosmetic && (\n          <NumberInput\n            label=\"Extra time (mins)\"\n            large\n            value={this.props.event.extraTime}\n            onChange={this.updateExtraTime}\n          />\n        )}\n        <hr />\n        <h3>Days:</h3>\n        {dayInput}\n        <br />\n        <hr />\n        <h3>Awards:</h3>\n        <br />\n        <FormGroup row>\n          <Label sm={2} for={\"awardStyleDropDown\"}>\n            Preset\n          </Label>\n          <Col sm={10}>\n            <UncontrolledDropdown>\n              <DropdownToggle caret>\n                {EventParams.AWARD_STYLES[this.state.selectedIdx]}\n              </DropdownToggle>\n              <DropdownMenu>\n                {EventParams.AWARD_STYLES.map((x, i) => {\n                  return (\n                    <DropdownItem\n                      key={i}\n                      onClick={() => {\n                        this.updateAwardStyle(i);\n                      }}\n                    >\n                      {x}\n                    </DropdownItem>\n                  );\n                })}\n              </DropdownMenu>\n            </UncontrolledDropdown>\n          </Col>\n        </FormGroup>\n        {this.props.event.awardPerc}% of teams will receive awards\n        <FormGroup>\n          <Label sm={2} for={\"awardStyleDropDown\"}>\n            Awards\n          </Label>\n          <Table>\n            <tbody>\n              {this.state.awards.map(({ name, checked }, aIdx) => (\n                <tr key={aIdx}>\n                  <td>\n                    {name}{\" \"}\n                    {[\"Motiv\", \"Risin\", \"Engin\", \"Break\"].includes(\n                      name.substring(0, 5)\n                    ) && \"(optional)\"}\n                  </td>\n                  <td>\n                    {[\"Motiv\", \"Risin\", \"Engin\", \"Break\"].includes(\n                      name.substring(0, 5)\n                    ) && (\n                      <BooleanInput\n                        onChange={() => this.toggleAward(name)}\n                        value={checked}\n                      />\n                    )}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </Table>\n        </FormGroup>\n        {/*<BooleanInput large label=\"Award format\" value={this.props.event.consolidatedAwards}\n                              onChange={this.updateConsolidatedAwards}/>*/}\n        {/* <NumberInput large label=\"Number of judges awards\" value={this.props.event.judgesAwards}\n                             onChange={this.updateJudgesAwards} min={0}/> */}\n      </Container>\n    );\n  }\n}\n","import React from 'react';\n\nimport { Input, Col, FormGroup, Label } from 'reactstrap';\nimport uniqueId from 'react-html-id';\n\nimport { DateTime } from '../api/DateTime';\n\nexport default class DateTimeInput extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleTimeChange = this.handleTimeChange.bind(this);\n    this.handleDateChange = this.handleDateChange.bind(this);\n    this.buildInput = this.buildInput.bind(this);\n\n    uniqueId.enableUniqueIds(this);\n  }\n\n  handleTimeChange(event) {\n    let x = this.props.value;\n    if (!x) x = new DateTime(0);\n    if (event.target.value) x.time = event.target.value;\n    this.props.onChange(x);\n  }\n\n  handleDateChange(event) {\n    let x = this.props.value;\n    x.day = event.target.value;\n    this.props.onChange(x);\n  }\n\n  buildInput() {\n    if (this.props.value.days.length > 1) {\n      return (\n        <FormGroup>\n          <Input\n            type='select'\n            name='select'\n            onChange={this.handleDateChange}\n            value={\n              this.props.value.days[\n                Math.floor(this.props.value.mins / (24 * 60))\n              ]\n            }\n          >\n            {this.props.value.days.map((d, idx) => (\n              <option key={idx}>{d}</option>\n            ))}\n          </Input>\n          <Input\n            type='time'\n            id={this.lastUniqueId()}\n            pattern='[0-2][0-9]:[0-5][0-9]'\n            step='900'\n            value={this.props.value.mins ? this.props.value.timeValue : null}\n            onChange={this.handleTimeChange}\n          />\n        </FormGroup>\n      );\n    } else {\n      return (\n        <Input\n          type='time'\n          id={this.lastUniqueId()}\n          pattern='[0-2][0-9]:[0-5][0-9]'\n          step='900'\n          value={this.props.value.mins ? this.props.value.timeValue : null}\n          onChange={this.handleTimeChange}\n        />\n      );\n    }\n  }\n\n  render() {\n    return (\n      <FormGroup row>\n        <Label sm={this.props.large ? 2 : 6} for={this.nextUniqueId()}>\n          {this.props.label}\n        </Label>\n        <Col sm={this.props.large ? 10 : 6}>\n          {this.props.immutable ? this.props.value.time : this.buildInput()}\n        </Col>\n      </FormGroup>\n    );\n  }\n}\n","import React from 'react';\n// import ReactDOM from 'react-dom';\nimport {TYPES} from '../api/SessionTypes';\n\nimport MdRemoveCircleOutline from 'react-icons/lib/md/remove-circle-outline';\n\nimport {Form, Table, Button} from 'reactstrap';\nimport TextInput from '../inputs/TextInput';\nimport DateTimeInput from \"../inputs/DateTimeInput\";\nimport NumberInput from \"../inputs/NumberInput\";\nimport BooleanInput from \"../inputs/BooleanInput\";\n\nimport ReactDataSheet from 'react-datasheet';\n\nexport default class SessionForm extends React.Component {\n    constructor(props) {\n        super(props);\n        // Default values....\n        this.updateName = this.updateName.bind(this);\n        this.updateStartTime = this.updateStartTime.bind(this);\n        this.updateEndTime = this.updateEndTime.bind(this);\n        this.updateLen = this.updateLen.bind(this);\n        this.updateOverlap = this.updateOverlap.bind(this);\n        this.updateBuf = this.updateBuf.bind(this);\n        this.updateNSims = this.updateNSims.bind(this);\n        this.updateNLocs = this.updateNLocs.bind(this);\n        this.updateExtraFirst = this.updateExtraFirst.bind(this);\n        this.updateExtraEvery = this.updateExtraEvery.bind(this);\n        this.getDataGrid = this.getDataGrid.bind(this);\n        this.updateLocs = this.updateLocs.bind(this);\n        this.updateNoprac = this.updateNoprac.bind(this);\n        this.handleDelete = this.handleDelete.bind(this);\n    }\n\n    updateName(value) {\n        let S = this.props.session;\n        S.name = value;\n        this.props.onChange(S);\n    }\n\n    updateStartTime(value) {\n        let S = this.props.session;\n        S.startTime = value;\n        this.props.onChange(S);\n    }\n\n    updateEndTime(value) {\n        let S = this.props.session;\n        S.endTime = value;\n        this.props.onChange(S);\n    }\n\n    updateLen(value) {\n        let S = this.props.session;\n        S.len = value;\n        S.overlap = Math.floor(Math.min(S.overlap, (S.len + S.buf) - (S.len + S.buf) * S.nSims / S.nLocs));\n        this.props.onChange(S);\n    }\n\n    updateOverlap(value) {\n        let S = this.props.session;\n\n        // If overlap means matches will happen too quickly, don't update it.\n        if (value > (S.len + S.buf) - (S.len + S.buf) * S.nSims / S.nLocs) {\n            alert(\"Overlap is too large\");\n        } else {\n            S.overlap = value;\n            this.props.onChange(S);\n        }\n    }\n\n    updateBuf(value) {\n        let S = this.props.session;\n        S.buf = value;\n        S.overlap = Math.floor(Math.min(S.overlap, (S.len + S.buf) - (S.len + S.buf) * S.nSims / S.nLocs));\n        this.props.onChange(S);\n    }\n\n    updateNSims(value) {\n        let S = this.props.session;\n        S.nSims = value;\n        S.overlap = Math.floor(Math.min(S.overlap, (S.len + S.buf) - (S.len + S.buf) * S.nSims / S.nLocs));\n        this.props.onChange(S);\n    }\n\n    updateNoprac(value) {\n        let S = this.props.session;\n        S.noPractice = value;\n        this.props.onChange(S);\n    }\n\n    updateNLocs(value) {\n        let S = this.props.session;\n        S.nLocs = value;\n\n        S.overlap = Math.floor(Math.min(S.overlap, (S.len + S.buf) - (S.len + S.buf) * S.nSims / S.nLocs));\n        this.setState({grid: this.getDataGrid()});\n        this.props.onChange(S);\n    }\n\n    updateExtraFirst(value) {\n        let S = this.props.session;\n        S.extraTimeFirst = value;\n        this.props.onChange(S);\n    }\n\n    updateExtraEvery(value) {\n        let S = this.props.session;\n        S.extraTimeEvery = value;\n        this.props.onChange(S);\n    }\n\n    getDataGrid() {\n        let grid = [];\n        for (let i = 0; i < this.props.session.nLocs; i++) {\n            grid.push([]);\n            grid[i].push({value: \"Name of \" + this.props.session.type.defaultLocs + \" \" + (i + 1), readOnly: true});\n            grid[i].push({value: this.props.session.locations[i]});\n        }\n        return grid;\n    }\n\n    updateLocs(changes) {\n        const grid = this.getDataGrid().map(row => [...row]);\n        changes.forEach(({cell, row, col, value}) => {\n            grid[row][col] = {...grid[row][col], value}\n        });\n        this.setState({grid});\n        let A = [];\n        for (let i = 0; i < grid.length; i++) {\n            A.push(grid[i][1].value);\n        }\n        let S = this.props.session;\n        S.locations = A;\n        this.props.onChange(S);\n    }\n\n    handleDelete() {\n        this.props.onDelete(this.props.session);\n    }\n\n    render() {\n        let truth = this.props.session.startTime.mins < this.props.session.actualStartTime.mins;\n        if (this.props.cosmetic) {\n            return (\n                <div className=\"session-form\">\n                    <Form>\n                        <TextInput label=\"Title\" nolabel value={this.props.session.name} onChange={this.updateName}/>\n                        {this.props.session.type !== TYPES.BREAK && <ReactDataSheet\n                            data={this.getDataGrid()}\n                            valueRenderer={(cell) => cell.value}\n                            sheetRenderer={(props) => (\n                                <Table className=\"datagrid-custom\">\n                                    <tbody>\n                                    {props.children}\n                                    </tbody>\n                                </Table>\n                            )}\n                            onCellsChanged={(changes) => this.updateLocs(changes)}\n                        />}\n\n                    </Form>\n                </div>\n            );\n        } else {\n            return (\n                <div className=\"session-form\">\n                    <Form>\n                        {this.props.advanced ?\n                            <TextInput label=\"Title\" nolabel value={this.props.session.name}\n                                       onChange={this.updateName}/> :\n                            <h3>{this.props.session.name}</h3>\n                        }\n                        <DateTimeInput label={\"Start time\" + ((truth) ? \"*\" : \"\")} value={this.props.session.startTime}\n                                       onChange={this.updateStartTime}/>\n                        <DateTimeInput label=\"Will be done by\" immutable={this.props.session.type !== TYPES.BREAK}\n                                       value={(this.props.session.type !== TYPES.BREAK) ? this.props.session.actualEndTime : this.props.session.endTime}\n                                       onChange={this.updateEndTime}/>\n                        {this.props.session.type !== TYPES.BREAK &&\n                        <NumberInput label=\"Duration (mins)\" min={1} value={this.props.session.len}\n                                     onChange={this.updateLen}/>}\n                        {this.props.session.type !== TYPES.BREAK &&\n                        <NumberInput label=\"Buffer/cleanup time (mins)\" min={0} value={this.props.session.buf}\n                                     onChange={this.updateBuf}/>}\n                        {(this.props.session.type === TYPES.MATCH_ROUND || this.props.session.type === TYPES.MATCH_ROUND_PRACTICE) &&\n                        <NumberInput label=\"Overlap (mins)\" min={0} value={this.props.session.overlap}\n                                     onChange={this.updateOverlap}/>}\n                        {this.props.session.type !== TYPES.BREAK && (\n                            this.props.session.type === TYPES.JUDGING ?\n                                <NumberInput label=\"Number of rooms\" min={1} value={this.props.session.locations.length}\n                                             onChange={this.updateNLocs}/> :\n                                <NumberInput label=\"Number of tables\" min={1}\n                                             value={this.props.session.locations.length} onChange={this.updateNLocs}/>)}\n                        {(this.props.session.type === TYPES.MATCH_ROUND || this.props.session.type === TYPES.MATCH_ROUND_PRACTICE) &&\n                        <NumberInput label=\"Simultaneous Teams\" min={1} value={this.props.session.nSims}\n                                     onChange={this.updateNSims}/>\n                        }\n                        {this.props.advanced && this.props.session.type !== TYPES.BREAK &&\n                        <BooleanInput label=\"Extra time first?\" value={this.props.session.extraTimeFirst}\n                                      onChange={this.updateExtraFirst}/>}\n                        {this.props.advanced && this.props.session.type === TYPES.BREAK &&\n                        <BooleanInput label=\"Apply to practice times?\" value={this.props.session.noPractice}\n                                      onChange={this.updateNoprac}/>}\n                        {this.props.advanced && this.props.session.type !== TYPES.BREAK &&\n                        <NumberInput label=\"Extra time every N\" value={this.props.session.extraTimeEvery} min={0}\n                                     onChange={this.updateExtraEvery}/>}\n                        {this.props.session.type !== TYPES.BREAK && <strong>Locations</strong>}\n                        {this.props.session.type !== TYPES.BREAK && <ReactDataSheet\n                            data={this.getDataGrid()}\n                            valueRenderer={(cell) => cell.value}\n                            sheetRenderer={(props) => (\n                                <Table className=\"datagrid-custom\">\n                                    <tbody>\n                                    {props.children}\n                                    </tbody>\n                                </Table>\n                            )}\n                            onCellsChanged={(changes) => this.updateLocs(changes)}\n                        />}\n                        {this.props.session.type === TYPES.BREAK &&\n                        <Button color='primary' onClick={this.props.onToggle}>Break applies to...</Button>}\n                        {truth && <span>* Will actually start at {this.props.session.actualStartTime.time}</span>}\n                        <br/>\n                        {this.props.advanced &&\n                        <Button onClick={this.handleDelete} color='danger'><MdRemoveCircleOutline/> Delete</Button>}\n\n                    </Form>\n                    <br/>\n                </div>\n            );\n        }\n    }\n}\n","import React from 'react';\n\nimport ReactDataSheet from 'react-datasheet';\n\nimport {\n  Table,\n  Button,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter\n} from 'reactstrap';\nimport { TeamParams } from '../api/TeamParams';\n\nimport MdAddCircleOutline from 'react-icons/lib/md/add-circle-outline';\nimport FaCheckCircleO from 'react-icons/lib/fa/check-circle-o';\nimport FaTimesCircleO from 'react-icons/lib/fa/times-circle-o';\nimport BooleanInput from './BooleanInput';\nimport DateTimeInput from './DateTimeInput';\n\nexport default class TeamList extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      toAdd: 1,\n      selectedTeam: 0,\n      modal: false\n    };\n\n    this.toggle = this.toggle.bind(this);\n\n    this.updateCells = this.updateCells.bind(this);\n    this.deleteTeam = this.deleteTeam.bind(this);\n    this.changeToAdd = this.changeToAdd.bind(this);\n    this.addTeams = this.addTeams.bind(this);\n\n    this.setTeamExclude = this.setTeamExclude.bind(this);\n    this.setTeamExtra = this.setTeamExtra.bind(this);\n    this.setTeamStartTime = this.setTeamStartTime.bind(this);\n    this.setTeamEndTime = this.setTeamEndTime.bind(this);\n  }\n\n  toggle() {\n    this.setState({\n      modal: !this.state.modal\n    });\n  }\n\n  changeToAdd(ev) {\n    this.setState({\n      toAdd: ev.target.value\n    });\n  }\n\n  getDataGrid() {\n    let grid = [];\n    for (let i = 0; i < this.props.teams.length; i++) {\n      grid.push([]);\n      grid[i].push({ value: this.props.teams[i].number });\n      grid[i].push({ value: this.props.teams[i].name });\n      grid[i].push({ value: this.props.teams[i].affiliation });\n      grid[i].push({ value: this.props.teams[i].pitNum });\n      if (this.props.advanced) {\n        grid[i].push({\n          value: this.props.teams[i].excludeJudging ? (\n            <FaCheckCircleO size={20} />\n          ) : (\n            <FaTimesCircleO size={20} />\n          )\n        });\n        grid[i].push({\n          value: this.props.teams[i].extraTime ? (\n            <FaCheckCircleO size={20} />\n          ) : (\n            <FaTimesCircleO size={20} />\n          )\n        });\n        grid[i].push({\n          value: this.props.teams[i].startTime\n            ? this.props.teams[i].startTime.time\n            : '--'\n        });\n        grid[i].push({\n          value: this.props.teams[i].endTime\n            ? this.props.teams[i].endTime.time\n            : '--'\n        });\n      }\n    }\n    return grid;\n  }\n\n  updateCells(changes) {\n    const grid = this.getDataGrid().map(row => [...row]);\n    let T = this.props.teams;\n    changes.forEach(({ cell, row, col, value }) => {\n      grid[row][col] = { ...grid[row][col], value };\n    });\n    for (let row = 0; row < grid.length; row++) {\n      T[row].number = grid[row][0].value;\n      T[row].name = grid[row][1].value;\n      T[row].affiliation = grid[row][2].value;\n    }\n    this.props.onChange(T);\n  }\n\n  addTeams() {\n    let T = this.props.teams;\n    for (let i = 0; i < this.state.toAdd; i++) {\n      T.push(new TeamParams(T.length + 1));\n    }\n    this.props.onChange(T);\n    this.setState({ grid: this.getDataGrid() });\n  }\n\n  deleteTeam(idx) {\n    let T = this.props.teams;\n    T.splice(idx, 1);\n    this.props.onChange(T);\n    this.setState({ grid: this.getDataGrid() });\n  }\n\n  setTeamExclude(b) {\n    let T = this.props.teams;\n    T[this.state.selectedTeam].excludeJudging = b;\n    this.props.onChange(T);\n  }\n\n  setTeamExtra(b) {\n    let T = this.props.teams;\n    T[this.state.selectedTeam].extraTime = b;\n    this.props.onChange(T);\n  }\n\n  setTeamStartTime(t) {\n    let T = this.props.teams;\n    T[this.state.selectedTeam].startTime = t;\n    this.props.onChange(T);\n  }\n\n  setTeamEndTime(t) {\n    let T = this.props.teams;\n    T[this.state.selectedTeam].endTime = t;\n    this.props.onChange(T);\n  }\n\n  buildModal(team) {\n    return (\n      <div>\n        {team.number}: {team.name}\n        <BooleanInput\n          label='Exclude from judging?'\n          value={team.excludeJudging}\n          onChange={this.setTeamExclude}\n        />\n        <BooleanInput\n          label='Extra time needed?'\n          value={team.extraTime}\n          onChange={this.setTeamExtra}\n        />\n        <DateTimeInput\n          label='Arrives at: '\n          value={team.startTime}\n          onChange={this.setTeamStartTime}\n        />\n        <DateTimeInput\n          label='Must leave by: '\n          value={team.endTime}\n          onChange={this.setTeamEndTime}\n        />\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <Modal\n          isOpen={this.state.modal}\n          toggle={this.toggle}\n          className={this.props.className}\n        >\n          <ModalHeader toggle={this.toggle}>Advanced edit</ModalHeader>\n          <ModalBody>\n            {this.buildModal(this.props.teams[this.state.selectedTeam])}\n          </ModalBody>\n          <ModalFooter>\n            <Button color='secondary' onClick={this.toggle}>\n              Close\n            </Button>\n          </ModalFooter>\n        </Modal>\n        {this.props.cosmetic || (\n          <div>\n            <Button onClick={this.addTeams}>\n              <MdAddCircleOutline /> Add\n            </Button>\n            &nbsp;\n            <input\n              type='number'\n              value={this.state.toAdd}\n              min='1'\n              onChange={this.changeToAdd}\n            />\n            &nbsp; team{this.state.toAdd > 1 && 's'}&nbsp;\n            <br />\n            Number of teams: {this.props.teams.length}\n            <br />\n          </div>\n        )}\n        &nbsp;\n        <ReactDataSheet\n          data={this.getDataGrid()}\n          valueRenderer={cell => cell.value}\n          sheetRenderer={props => (\n            <Table className='datagrid-custom'>\n              <thead>\n                <tr>\n                  <th>Team number</th>\n                  <th>Team name</th>\n                  <th>Affiliation</th>\n                  <th>Pit No</th>\n                  {this.props.advanced && <th>Exclude from judging?</th>}\n                  {this.props.advanced && <th>Extra time?</th>}\n                  {this.props.advanced && <th>Arrives</th>}\n                  {this.props.advanced && <th>Leaves</th>}\n                  {this.props.advanced && <th>Advanced</th>}\n                  {this.props.cosmetic || <th width='20'></th>}\n                </tr>\n              </thead>\n              <tbody>{props.children}</tbody>\n            </Table>\n          )}\n          rowRenderer={props => (\n            <tr>\n              {props.children}\n              {this.props.advanced && (\n                <td className='cell'>\n                  <Button\n                    className='btn-sm'\n                    onClick={() => {\n                      this.setState({ selectedTeam: props.row });\n                      this.toggle();\n                    }}\n                  >\n                    Edit...\n                  </Button>\n                </td>\n              )}\n              {this.props.cosmetic || (\n                <td className='cell'>\n                  <Button\n                    color='danger'\n                    className='btn-sm'\n                    onClick={() => this.deleteTeam(props.row)}\n                  >\n                    <FaTimesCircleO size={20} />\n                  </Button>\n                </td>\n              )}\n            </tr>\n          )}\n          onCellsChanged={changes => this.updateCells(changes)}\n        />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport {\n    Nav, NavItem, NavLink, TabContent, TabPane,\n    Container, Col, Row, Button,\n    Modal, ModalHeader, ModalBody, ModalFooter\n} from 'reactstrap';\n\nimport MdAddCircleOutline from 'react-icons/lib/md/add-circle-outline';\n\nimport {TYPES} from '../api/SessionTypes';\nimport BasicsForm from \"./BasicsForm\";\nimport SessionForm from \"./SessionForm\"\nimport TeamList from \"../inputs/TeamList\";\nimport BooleanInput from \"../inputs/BooleanInput\";\nimport SessionParams from \"../api/SessionParams\";\n\nimport ToggleButton from 'react-toggle-button';\n\nexport default class DetailView extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.toggle = this.toggle.bind(this);\n        this.state = {\n            activeTab: 'judging',\n            advanced: false,\n            modal: false,\n            selectedSession: null\n        };\n\n        this.handleScheduleChange = this.handleScheduleChange.bind(this);\n        this.updateSessions = this.updateSessions.bind(this);\n        this.updateTeams = this.updateTeams.bind(this);\n        this.toggleAdvanced = this.toggleAdvanced.bind(this);\n        this.toggleModal = this.toggleModal.bind(this);\n        this.toggleApplies = this.toggleApplies.bind(this);\n        this.updateUniversal = this.updateUniversal.bind(this);\n        this.deleteSession = this.deleteSession.bind(this);\n        this.addSession = this.addSession.bind(this);\n    }\n\n    toggleAdvanced() {\n        this.setState({\n            advanced: !this.state.advanced\n        });\n    }\n\n    toggle(tab) {\n        if (this.state.activeTab !== tab) {\n            this.setState({\n                activeTab: tab\n            });\n        }\n    }\n\n    handleScheduleChange(s) {\n        this.props.onChange(s);\n    }\n\n    updateTeams(T) {\n        let E = this.props.event;\n        E.teams = T;\n        this.props.onChange(E);\n        console.log(this.props.event);\n    }\n\n    updateSessions(S) {\n        let E = this.props.event;\n        for (let i = 0; i < E.sessions.length; i++) {\n            if (E.sessions[i].id === S.id) {\n                E.sessions[i] = S;\n                break;\n            }\n        }\n        E.syncLocs(S);\n        this.props.onChange(E);\n    }\n\n    toggleModal(session) {\n        let value = !this.state.modal;\n        let s = (value) ? session : null;\n        this.setState({modal: value, selectedSession: s});\n    }\n\n    toggleApplies(container, session, include) {\n        if (include && !container.applies(session.id)) {\n            container.appliesTo.push(session.id);\n        }\n        if (!include && container.applies(session.id)) {\n            container.appliesTo.splice(container.appliesTo.indexOf(session.id), 1);\n        }\n        this.updateSessions(container);\n    }\n\n    updateUniversal(value) {\n        let S = this.state.selectedSession;\n        if (!S) return;\n        S.universal = value;\n        this.updateSessions(S);\n    }\n\n    deleteSession(S) {\n        let E = this.props.event;\n        console.log(S);\n        E.sessions.splice(E.sessions.indexOf(S), 1);\n        this.props.onChange(E);\n    }\n\n    addSession() {\n        let E = this.props.event;\n        let S = null;\n        if (this.state.activeTab === 'judging')\n            S = new SessionParams(E.uid_counter + 1, TYPES.JUDGING, \"Judging\", 4, E.startTime.clone(), E.endTime.clone());\n        else if (this.state.activeTab === 'rounds') {\n            S = new SessionParams(E.uid_counter + 1, TYPES.MATCH_ROUND, \"Round X\", 4, E.startTime.clone(), E.endTime.clone());\n            S.locations = E.sessions.filter(s => s.type === TYPES.MATCH_ROUND)[0].locations;\n        }\n        else if (this.state.activeTab === 'breaks') {\n            S = new SessionParams(E.uid_counter + 1, TYPES.BREAK, \"Break\", 1, E.startTime.clone(), E.endTime.clone());\n            S.universal = true;\n        } else if (this.state.activeTab === 'practice') {\n            S = new SessionParams(E.uid_counter + 1, TYPES.MATCH_ROUND_PRACTICE, \"Practice Round X\", 4, E.startTime.clone(), E.endTime.clone());\n            S.locations = E.sessions.filter(s => s.type === TYPES.MATCH_ROUND)[0].locations;\n        }\n        else return;\n        E.sessions.push(S);\n        E.uid_counter = E.uid_counter + 1;\n        this.props.onChange(E);\n    }\n\n    buildModal() {\n        let S = this.state.selectedSession;\n        if (!S) return;\n        return (\n            <div>\n                {S.name} applies to...<br/>\n                {S.type === TYPES.BREAK &&\n                <BooleanInput label=\"All?\" value={S.universal} onChange={this.updateUniversal}/>}\n                <hr/>\n                {this.props.event.sessions.filter(S => S.type !== TYPES.BREAK).map(session =>\n                    <BooleanInput key={session.id} disabled={S.universal} label={session.name}\n                                  value={S.applies(session.id)} onChange={(x) => this.toggleApplies(S, session, x)}/>\n                )}\n            </div>\n        );\n    }\n\n\n    renderSessions(type) {\n        return (\n            <Row>\n                {this.props.event.sessions.filter(S => S.type === type).sort((a, b) => {\n                    return a.id - b.id;\n                }).map(S => (\n                    <Col lg={6} md={12} key={S.id}>\n                        <SessionForm onDelete={this.deleteSession} onToggle={() => this.toggleModal(S)}\n                                     advanced={this.state.advanced}\n                                     session={S} onChange={this.updateSessions}/>\n                    </Col>\n                ))}\n            </Row>\n        )\n    }\n\n    render() {\n        return (\n            <Container>\n                <Modal isOpen={this.state.modal} toggle={this.toggle} className={this.props.className}>\n                    <ModalHeader toggle={this.toggleModal}>Advanced edit</ModalHeader>\n                    <ModalBody>\n                        {this.buildModal()}\n                    </ModalBody>\n                    <ModalFooter>\n                        <Button color=\"secondary\" onClick={this.toggleModal}>Close</Button>\n                    </ModalFooter>\n                </Modal>\n\n                <Nav pills>\n                    <NavItem>\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'basics') ? \"active\" : \"\"}\n                                 onClick={() => {\n                                     this.toggle('basics')\n                                 }}>\n                            Basics\n                        </NavLink>\n                    </NavItem>\n                    <NavItem>\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'teams') ? \"active\" : \"\"}\n                                 onClick={() => {\n                                     this.toggle('teams')\n                                 }}>\n                            Teams\n                        </NavLink>\n                    </NavItem>\n                    <NavItem>\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'judging') ? \"active\" : \"\"}\n                                 onClick={() => {\n                                     this.toggle('judging')\n                                 }}>\n                            Judging\n                        </NavLink>\n                    </NavItem>\n                    <NavItem>\n                        <NavLink href=\"#\" className={this.state.activeTab === 'rounds' ? \"active\" : \"\"}\n                                 onClick={() => {\n                                     this.toggle('rounds')\n                                 }}>\n                            Rounds\n                        </NavLink>\n                    </NavItem>\n                    <NavItem>\n                        <NavLink href=\"#\" className={this.state.activeTab === 'practice' ? \"active\" : \"\"}\n                                 onClick={() => {\n                                     this.toggle('practice')\n                                 }}>\n                            Practice\n                        </NavLink>\n                    </NavItem>\n                    <NavItem>\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'breaks') ? \"active\" : \"\"}\n                                 onClick={() => {\n                                     this.toggle('breaks')\n                                 }}>\n                            Breaks\n                        </NavLink>\n                    </NavItem>\n                    &nbsp;\n                    <div onClick={this.toggleAdvanced}>\n                        <small className=\"not-text\">Advanced</small>\n                        <ToggleButton value={this.state.advanced} onToggle={this.toggleAdvanced}/>\n                    </div>\n                    {this.state.advanced && this.state.activeTab !== 'basics' && this.state.activeTab !== 'teams' && (\n                        <NavItem>\n                            <NavLink href=\"#\" onClick={this.addSession}>\n                                <MdAddCircleOutline/>\n                            </NavLink>\n                        </NavItem>)\n                    }\n\n                </Nav>\n                <TabContent activeTab={this.state.activeTab}>\n                    <TabPane tabId=\"basics\">\n                        &nbsp;\n                        <BasicsForm advanced={this.state.advanced} event={this.props.event}\n                                    onChange={this.handleScheduleChange}/>\n                    </TabPane>\n                    <TabPane tabId=\"teams\">\n                        &nbsp;\n                        <TeamList advanced={this.state.advanced} teams={this.props.event.teams}\n                                  onChange={this.updateTeams}/>\n                    </TabPane>\n                    <TabPane tabId=\"judging\">\n                        &nbsp;\n                        {this.renderSessions(TYPES.JUDGING)}\n                    </TabPane>\n                    <TabPane tabId=\"rounds\">\n                        &nbsp;\n                        {this.renderSessions(TYPES.MATCH_ROUND)}\n                    </TabPane>\n                    <TabPane tabId=\"practice\">\n                        &nbsp;\n                        {this.renderSessions(TYPES.MATCH_ROUND_PRACTICE)}\n                    </TabPane>\n                    <TabPane tabId=\"breaks\">\n                        &nbsp;\n                        {this.renderSessions(TYPES.BREAK)}\n                    </TabPane>\n                </TabContent>\n            </Container>\n        );\n    }\n}\n","import React from 'react';\n\nimport { Col, FormGroup, Label } from 'reactstrap';\nimport uniqueId from 'react-html-id';\n\nexport default class TextAreaInput extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n\n    uniqueId.enableUniqueIds(this);\n  }\n\n  handleChange(event) {\n    const val = event.target.value;\n    this.props.onChange(val);\n  }\n\n  render() {\n    return (\n      <FormGroup row>\n        <Label\n          hidden={this.props.nolabel}\n          sm={this.props.large ? 2 : 6}\n          for={this.nextUniqueId()}\n        >\n          {this.props.label}\n        </Label>\n        <Col sm={this.props.nolabel ? 12 : this.props.large ? 10 : 6}>\n          <textarea\n            id={this.lastUniqueId()}\n            style={{ width: '100%' }}\n            rows={this.props.rows}\n            value={this.props.value}\n            placeholder={this.props.placeholder}\n            onChange={this.handleChange}\n          />\n        </Col>\n      </FormGroup>\n    );\n  }\n}\n","import React from 'react';\nimport TextInput from '../inputs/TextInput';\nimport NumberInput from '../inputs/NumberInput';\n//import BooleanInput from '../inputs/BooleanInput';\nimport DateTimeInput from '../inputs/DateTimeInput';\n\nimport {Container, Form, Table} from 'reactstrap';\n\nimport ReactDataSheet from 'react-datasheet';\nimport TextAreaInput from \"../inputs/TextAreaInput\";\n\nexport default class InitForm extends React.Component {\n    constructor(props) {\n        super(props);\n        // Default values....\n        this.state = {\n            grid: this.getDataGrid()\n        };\n\n        this.getDataGrid = this.getDataGrid.bind(this);\n        this.updateTitle = this.updateTitle.bind(this);\n        this.updateNTeams = this.updateNTeams.bind(this);\n        this.updateNTables = this.updateNTables.bind(this);\n        this.updateStartTime = this.updateStartTime.bind(this);\n        this.updateEndTime = this.updateEndTime.bind(this);\n        this.updateNDays = this.updateNDays.bind(this);\n        this.updateDays = this.updateDays.bind(this);\n        this.updatePilot = this.updatePilot.bind(this);\n        this.updateTeamNames = this.updateTeamNames.bind(this);\n        this.updateNPracs = this.updateNPracs.bind(this);\n\n        this.handleChange = this.handleChange.bind(this);\n    }\n\n    getDataGrid() {\n        let grid = [];\n        for (let i = 0; i < this.props.event.days.length; i++) {\n            grid.push([]);\n            grid[i].push({value: \"Name of Day \" + (i + 1), readOnly: true});\n            grid[i].push({value: this.props.event.days[i]});\n        }\n        return grid;\n    }\n\n    updateTitle(newTitle) {\n        let data = this.props.event;\n        data.title = newTitle;\n        this.handleChange(data);\n    }\n\n    updateNTeams(newN) {\n        let data = this.props.event;\n        data.nTeams = newN;\n        this.handleChange(data);\n    }\n\n    updateNPracs(newN) {\n        let data = this.props.event;\n        data.nPracs = newN;\n        this.handleChange(data);\n    }\n\n    updateStartTime(newTime) {\n        let data = this.props.event;\n        data.startTime = newTime;\n        this.handleChange(data);\n    }\n\n    updateEndTime(newTime) {\n        let data = this.props.event;\n        data.endTime = newTime;\n        this.handleChange(data);\n    }\n\n    updateDays(changes) {\n        const grid = this.state.grid.map(row => [...row]);\n        changes.forEach(({cell, row, col, value}) => {\n            grid[row][col] = {...grid[row][col], value}\n        });\n        this.setState({grid});\n        let A = [];\n        for (let i = 0; i < grid.length; i++) {\n            A.push(grid[i][1].value);\n        }\n        let S = this.props.event;\n        S.days = A;\n        this.props.onChange(S);\n    }\n\n    updateNDays(value) {\n        let E = this.props.event;\n        E.nDays = value;\n        E.endTime.mins = (E.endTime.mins % (24 * 60)) + ((value - 1) * 24 * 60);\n        this.setState({grid: this.getDataGrid()});\n        this.handleChange(E);\n    }\n\n    updateNTables(value) {\n        let E = this.props.event;\n        E.nTables = value;\n        this.handleChange(E);\n    }\n\n    updatePilot(value) {\n        let E = this.props.event;\n        E.pilot = value;\n        this.handleChange(E);\n    }\n\n    updateTeamNames(e) {\n        let E = this.props.event;\n        E.tempNames = e;\n        this.handleChange(E);\n    }\n\n    handleChange(data) {\n        if (this.props.onChange) this.props.onChange(data);\n    }\n\n    render() {\n        return (\n            <Container>\n                <Form onSubmit={this.handleSubmit}>\n                    <TextInput large label=\"Title: \" value={this.props.event.title} onChange={this.updateTitle}/>\n                    <NumberInput large min=\"4\" label=\"Number of teams: \" value={this.props.event.nTeams}\n                                 onChange={this.updateNTeams}/>\n                    <NumberInput large min=\"2\" step=\"2\" label=\"Number of competition tables: \"\n                                 value={this.props.event.nTables} onChange={this.updateNTables}/>\n                    <NumberInput large min=\"0\" step=\"1\" label=\"Number of practice rounds: \"\n                                 value={this.props.event.nPracs} onChange={this.updateNPracs}/>\n                    {/*<BooleanInput label=\"Pilot judging program?\" large value={this.props.event.pilot}\n                                  onChange={this.updatePilot}/>*/}\n                    <NumberInput label=\"Number of days\" large min={1} value={this.props.event.days.length}\n                                 onChange={this.updateNDays}/>\n                    <ReactDataSheet\n                        data={this.state.grid}\n                        valueRenderer={(cell) => cell.value}\n                        sheetRenderer={(props) => (\n                            <Table className=\"datagrid-custom\">\n                                <tbody>\n                                {props.children}\n                                </tbody>\n                            </Table>\n                        )}\n                        onCellsChanged={(changes) => this.updateDays(changes)}\n                    />\n                    <DateTimeInput large label=\"Start time: \" value={this.props.event.startTime}\n                                   onChange={this.updateStartTime}/>\n                    <DateTimeInput large label=\"End time: \" value={this.props.event.endTime}\n                                   onChange={this.updateEndTime}/>\n                    <TextAreaInput large label=\"Team names:\" rows={10}\n                                   placeholder=\"List of teams: (Name) OR (Number,Name) OR (Number,Name,Affiliation) OR (Number,Name,Affiliation,Pit)\"\n                                   onChange={this.updateTeamNames}/>\n                </Form>\n            </Container>\n        );\n    }\n}\n","import React from 'react';\n\nimport {\n    Navbar,\n    NavbarBrand,\n    NavbarToggler,\n    Collapse,\n    Nav,\n    NavItem,\n    NavLink,\n    UncontrolledDropdown,\n    DropdownToggle,\n    DropdownMenu,\n    DropdownItem\n} from 'reactstrap';\n\nimport ReactTooltip from 'react-tooltip'\n\nimport MdInfoOutline from 'react-icons/lib/md/info-outline'\nimport MdFileDownload from 'react-icons/lib/md/file-download'\nimport MdFileUpload from 'react-icons/lib/md/file-upload'\n\n// import firstlogo from \"../resources/firstlogo.png\"\nimport PreComputedImages from \"../resources/images.json\";\n\nexport default class TopBar extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isOpen: false,\n            advanced: false,\n        };\n\n        this.toggle = this.toggle.bind(this);\n        this.onFileChange = this.onFileChange.bind(this);\n    }\n\n    toggle() {\n        this.setState({\n            isOpen: !this.state.isOpen\n        });\n    }\n\n    onFileChange(e, f) {\n        let file = f || e.target.files[0];\n        let reader = new FileReader();\n        console.log(file);\n\n        reader.onload = () => {\n            this.props.onLoad(reader.result);\n        };\n        reader.readAsText(file);\n        // reader.readAsDataURL(file);\n    }\n\n    render() {\n        return (\n            <Navbar color=\"light\" light expand=\"md\">\n                <NavbarBrand><img alt=\"\" width=\"80px\" src={PreComputedImages.firstlogo}/></NavbarBrand>\n                <NavbarBrand>FLL in a Box\n                    <small>Version {this.props.version}</small>\n                </NavbarBrand>\n                <NavbarToggler onClick={this.toggle}/>\n                <Collapse isOpen={this.state.isOpen} navbar>\n                    <Nav className=\"ml-auto\" navbar>\n                        <NavItem>\n                            <NavLink>\n                            </NavLink>\n                        </NavItem>\n                        <UncontrolledDropdown nav inNavbar>\n                            <DropdownToggle data-tip=\"Info\" nav caret>\n                                <MdInfoOutline size={20}/>\n                            </DropdownToggle>\n                            <DropdownMenu right>\n                                <a target=\"_blank\" rel=\"noopener noreferrer\"\n                                   href={\"https://github.com/frewes/tournament-in-a-box\"}>\n                                    <DropdownItem>Manual</DropdownItem>\n                                </a>\n                                <a target=\"_blank\" rel=\"noopener noreferrer\"\n                                   href={\"https://goo.gl/forms/rJOM0xa24MVZqVhh2\"}>\n                                    <DropdownItem>Report an issue...</DropdownItem>\n                                </a>\n                                <DropdownItem divider/>\n                                <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"mailto:fred@firstaustralia.org\">\n                                    <DropdownItem>Contact developer</DropdownItem>\n                                </a>\n                            </DropdownMenu>\n                        </UncontrolledDropdown>\n                        <NavItem data-tip=\"Save current progress\" onClick={() => {\n                            this.props.onSave();\n                        }}><NavLink><MdFileDownload size={20}/></NavLink></NavItem>\n                        <ReactTooltip place=\"bottom\" type=\"light\" effect=\"solid\"/>\n                        <NavItem data-tip=\"Load previous schedule\"><NavLink><label><MdFileUpload size={20}/><input\n                            type=\"file\" accept=\".schedule\" onChange={this.onFileChange} hidden\n                            ref=\"input\"/></label></NavLink></NavItem>\n                    </Nav>\n                </Collapse>\n            </Navbar>\n        );\n    }\n}\n","import { TYPES } from '../api/SessionTypes';\nimport { DateTime } from '../api/DateTime';\n\nimport Instance from './Instance';\nimport { shuffle, hasDone } from './utilities';\n\nexport class Scheduler {\n  constructor(E) {\n    this.event = E;\n  }\n\n  empty() {\n    this.event.sessions.forEach(session => {\n      session.schedule = [];\n      session.usesSurrogates = false;\n    });\n    this.event.teams.forEach(team => {\n      team.schedule = [];\n      team.isSurrogate = false;\n    });\n  }\n\n  evaluate() {\n    this.event.errors = 0;\n    // Add errors for each session (errors due to empty spots)\n    this.event.sessions.forEach(session => {\n      session.errors = 0;\n      session.schedule.forEach(instance => {\n        session.errors +=\n          instance.teams.length - instance.teams.filter(t => t).length;\n      });\n      this.event.errors += session.errors;\n    });\n    // Adelaide Ken bug: Teams getting assigned weirdly. Count the number of these errors.\n    this.event.teams.forEach(team => {\n      for (let j = 0; j < team.schedule.length; j++) {\n        if (team.schedule[j].teams.indexOf(team.id) === -1) {\n          this.event.errors++;\n        }\n      }\n    });\n  }\n\n  buildAllTables() {\n    this.empty();\n    let willWork = null;\n    this.event.sessions.sort((a, b) => {\n      if (a.id === b.id) {\n        if (a.type.priority === b.type.priority)\n          return a.startTime.mins - b.startTime.mins;\n        return a.type.priority - b.type.priority;\n      } else {\n        return a.id - b.id;\n      }\n    });\n    this.event.sessions.forEach(session => {\n      // Make sure the start time isn't in a break\n      if (session.type !== TYPES.BREAK)\n        session.actualStartTime.mins = this.event.timeInc(\n          session.startTime,\n          0,\n          session.id\n        );\n      let end = -Infinity;\n      if (\n        !(\n          session.type === TYPES.MATCH_ROUND ||\n          session.type === TYPES.MATCH_ROUND_PRACTICE\n        )\n      ) {\n        end = this.tableSession(session);\n        session.actualEndTime.mins = end;\n        if (session.type !== TYPES.BREAK && end > session.endTime.mins) {\n          if (willWork) willWork = willWork + ', ' + session.name;\n          else willWork = session.name;\n        }\n      }\n    });\n    let T = TYPES.MATCH_ROUND_PRACTICE;\n    let end = -Infinity;\n    let offset = 0;\n    let locOffset = 0;\n    this.event.sessions\n      .filter(s => s.type === T)\n      .forEach(session => {\n        if (session.actualStartTime.mins < end)\n          session.actualStartTime.mins = end;\n        end = this.tableSession(session, offset, locOffset);\n        session.actualEndTime.mins = end;\n        if (session.schedule[session.schedule.length - 1].loc === 0)\n          locOffset = 1;\n        else locOffset = 0;\n        offset += session.schedule.length;\n        if (end > session.endTime.mins) {\n          if (willWork) willWork = willWork + ', ' + session.name;\n          else willWork = session.name;\n        }\n      });\n    T = TYPES.MATCH_ROUND;\n    this.event.sessions\n      .filter(s => s.type === T)\n      .forEach(session => {\n        if (session.actualStartTime.mins < end)\n          session.actualStartTime.mins = end;\n        end = this.tableSession(session, offset, locOffset);\n        session.actualEndTime.mins = end;\n        if (session.schedule[session.schedule.length - 1].loc === 0)\n          locOffset = 1;\n        else locOffset = 0;\n        offset += session.schedule.length;\n        if (end > session.endTime.mins) {\n          if (willWork) willWork = willWork + ', ' + session.name;\n          else willWork = session.name;\n        }\n      });\n  }\n\n  /**\n     Sets up all the timeslots for the given session.\n     numOffset: offset at which to start counting (facilitates round numbering)\n     @return Returns the time the schedule is finished (i.e. the end time of the last event)\n     */\n  tableSession(session, numOffset = 0, locD = 0) {\n    let teams = [];\n    this.event.teams.forEach(team => {\n      if (session.type !== TYPES.JUDGING || !team.excludeJudging)\n        teams.push(team);\n    });\n    if (session.type === TYPES.BREAK) session.nSims = teams.length;\n    let now = new DateTime(session.actualStartTime.mins);\n    let L = Math.ceil(teams.length / session.nSims);\n    let lastNTeams = teams.length % session.nSims;\n    lastNTeams = lastNTeams === 0 ? session.nSims : lastNTeams;\n    session.schedule = new Array(L);\n\n    // Figure out how many rounds to make extra long\n    let everyN = session.extraTimeEvery > 0 ? session.extraTimeEvery : Infinity;\n    let extraTimeTeams = teams.filter(x => x.extraTime).length;\n\n    let roundsSinceExtra = 0;\n    let flag = false;\n\n    let extraRoundsNeeded = Math.ceil(extraTimeTeams / session.nSims);\n    let extraRoundsMade =\n      (session.extraTimeFirst ? 1 : 0) +\n      (session.extraTimeEvery > 0 ? L / everyN : 0);\n    if (extraRoundsMade < extraRoundsNeeded) {\n      everyN = (L + 1) / (extraRoundsNeeded + 1);\n      everyN += Math.round(Math.random() * 2);\n      roundsSinceExtra += Math.floor(Math.random() * L);\n      flag = true;\n    }\n    let extraRounds = 0;\n    if (session.type === TYPES.BREAK) everyN = Infinity;\n    for (let i = 0; i < L; i++) {\n      let d = Math.floor(session.nLocs / session.nSims);\n      let locOffset = ((i + locD) % d) * session.nSims;\n      if (i % L < L - 1) {\n        // Check that the schedule will finish...\n        let whenDone = this.event.timeInc(now, session.len, session.id);\n        if (whenDone !== now.mins + session.len) now = new DateTime(whenDone);\n        session.schedule[i] = new Instance(\n          session.id,\n          i + 1 + numOffset,\n          now,\n          new Array(session.nSims),\n          locOffset\n        );\n        now = new DateTime(\n          this.event.timeInc(\n            now,\n            session.len + session.buf - session.overlap,\n            session.id\n          )\n        );\n        roundsSinceExtra++;\n        if ((i === 0 && session.extraTimeFirst) || roundsSinceExtra >= everyN) {\n          if (!(flag && extraRounds >= extraRoundsNeeded)) {\n            session.schedule[i].extra = true;\n            now = new DateTime(\n              this.event.timeInc(now, this.event.extraTime, session.id)\n            );\n            roundsSinceExtra = 0;\n            extraRounds++;\n          }\n        }\n      } else {\n        session.schedule[i] = new Instance(\n          session.id,\n          i + 1 + numOffset,\n          now,\n          new Array(lastNTeams),\n          locOffset\n        );\n        now = new DateTime(\n          now.mins + session.len + session.buf - session.overlap\n        );\n        roundsSinceExtra++;\n        if (roundsSinceExtra >= everyN) {\n          if (flag && extraRounds >= extraRoundsNeeded) {\n            console.log('Enough rounds added');\n          } else {\n            session.schedule[i].extra = true;\n            now = new DateTime(now.mins + this.event.extraTime);\n          }\n        }\n      }\n      // Not sure why this existed\n      // for (var t = 0; t < session.schedule[i].teams.length; t++) {\n      //     session.schedule[i].teams[t] = null;\n      // }\n    }\n    this.sortThingsOut();\n    return now.mins;\n  }\n\n  // Make sure everything is consistent.\n  sortThingsOut() {\n    this.event.sessions.forEach(session => {\n      session.schedule.forEach(instance => {\n        instance.time.days = this.event.days;\n      });\n    });\n  }\n\n  fillAllTables() {\n    this.initialFill();\n    this.swapFill();\n  }\n\n  initialFill() {\n    let oneSetOfTeams = this.event.teams.slice();\n    shuffle(oneSetOfTeams);\n    this.event.sessions.forEach(session => {\n      let teams = [];\n      shuffle(oneSetOfTeams).forEach(team => {\n        if (session.type !== TYPES.JUDGING || !team.excludeJudging)\n          teams.push(team);\n      });\n      session.schedule.forEach(instance => this.fillInstance(instance, teams));\n    });\n  }\n\n  fillInstance(instance, teams) {\n    for (let t = 0; t < instance.teams.length; t++) {\n      let T = -1;\n      for (let k = 0; k < teams.length; k++) {\n        if (this.event.canDo(teams[k], instance)) {\n          T = k;\n          break;\n        }\n      }\n      if (T !== -1) {\n        let team = teams.splice(T, 1)[0];\n        instance.teams[t] = team.id;\n        team.schedule.push(instance);\n      }\n    }\n  }\n\n  /**\n     Go through all sessions in the event and fix up errors through first-order swapping.\n     **/\n  swapFill(event) {\n    // 10 attempts.  Why not?\n    for (let j = 0; j < 10; j++) {\n      let fixed = 0;\n      this.evaluate();\n      this.event.sessions\n        .filter(s => s.errors > 0)\n        .forEach(s => {\n          fixed += this.swapFillSession(s, this.event.teams);\n        });\n      if (fixed === 0) break;\n    }\n  }\n\n  /**\n     Go through a given session, fix all errors with first-order swapping.\n     TODO: deal with the case where instances > 1?  How to do this?\n     @return Number of errors fixed\n     **/\n  swapFillSession(session, teams) {\n    let fixed = 0;\n    // Make list of teams that aren't in this session enough (lost set)\n    let lostTeams = [];\n    for (let i = 0; i < teams.length; i++)\n      if (hasDone(teams[i], session.id) < session.instances)\n        lostTeams.push(teams[i]);\n    // Find every empty slot in the schedule\n    session.schedule.forEach(instance_A => {\n      for (let j = 0; j < instance_A.teams.length; j++) {\n        if (instance_A.teams[j] != null) continue;\n        // Found empty slot!\n        // Now find a team A from the full set that can do this time\n        for (let tA = 0; tA < teams.length; tA++) {\n          if (!this.event.canDo(teams[tA], instance_A, session.id)) continue;\n          // Now, find a team B from the lost set that can take team A's instance\n          let instance_B = null;\n          for (let x = 0; x < teams[tA].schedule.length; x++) {\n            if (teams[tA].schedule[x].session_id === instance_A.session_id) {\n              instance_B = teams[tA].schedule.splice(x, 1)[0];\n              break;\n            }\n          }\n          let f = fixed;\n          if (instance_B == null) {\n            continue;\n            // Team A can just do instance A; no swap required, add the team in.\n            // instance_A.teams[j] = teams[tA].uid;\n            // teams[tA].schedule.push(instance_A);\n            // fixed++;\n            // break;\n          }\n          for (let tB = 0; tB < lostTeams.length; tB++) {\n            if (!this.event.canDo(lostTeams[tB], instance_B)) continue;\n            // Found a team that can swap with A!\n            // Now, swap teams A and B\n            // Add instanceA to teamA\n            instance_A.teams[j] = teams[tA].id;\n            teams[tA].schedule.push(instance_A);\n            // Add instanceB to teamB\n            for (let idx = 0; idx < instance_B.teams.length; idx++) {\n              if (instance_B.teams[idx] === teams[tA].id) {\n                instance_B.teams[idx] = lostTeams[tB].id;\n              }\n            }\n            lostTeams[tB].schedule.push(instance_B);\n            lostTeams.splice(tB, 1);\n            fixed++;\n            break;\n          }\n          if (f === fixed) teams[tA].schedule.push(instance_B);\n          else break;\n        }\n      }\n    });\n    return fixed;\n  }\n}\n","import React from 'react';\n\nimport {Table} from 'reactstrap';\n\nimport { TYPES } from '../api/SessionTypes';\n\nexport default class DayScheduleView extends React.Component {\n    constructor(props) {\n        super(props);\n        this.getItems = this.getItems.bind(this);\n    }\n\n\n    getItems() {\n        let sessions = this.props.event.sessions;\n        let sorted = sessions.sort((a, b) => {\n            return a.actualStartTime.mins - b.actualStartTime.mins\n        });\n        let items = [];\n        for (let i = 0; i < sorted.length; i++) {\n            items.push({\n                _id: i + 1,\n                sTime: sorted[i].actualStartTime.time,\n                eTime: sorted[i].actualEndTime.time,\n                contents: sorted[i].name,\n                break: sorted[i].type === TYPES.BREAK\n            });\n        }\n        return items;\n    }\n\n    render() {\n        let items = this.getItems();\n        return (<div>\n            <Table>\n                <thead>\n                <tr>\n                    <th>Start</th>\n                    <th>End</th>\n                    <th>Event</th>\n                </tr>\n                </thead>\n                <tbody>\n                {items.map(x => {\n                    return (\n                        <tr key={x._id} className={x.break ? \"break\" : \"\"}>\n                            <td>{x.sTime}</td>\n                            <td>{x.eTime}</td>\n                            <td>{x.contents}</td>\n                        </tr>);\n                })}\n                </tbody>\n            </Table>\n        </div>)\n    }\n}\n","import React from 'react';\nimport ReactDataSheet from 'react-datasheet';\n\nimport {Table} from 'reactstrap';\n\n\nexport default class SingleScheduleView extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            swapee: null\n        }\n\n        this.select = this.select.bind(this);\n    }\n\n    select(i, j) {\n        if (!this.props.editable) return; // Only swap if \"editable\"\n        if (i === 0 || j < 2) return; // Don't swap headers or times\n        let g = this.props.data;\n        let x = g[i][j];\n        if (!this.state.swapee) {\n            this.setState({swapee: x});\n        } else if (this.state.swapee === x) {\n            this.setState({swapee: null});\n        } else {\n            // SWAP\n            this.props.onSwap(this.props.id, this.state.swapee, x);\n            this.setState({swapee: null});\n            // alert(\"Not yet implemented\");\n        }\n    }\n\n    renderAsDataGrid() {\n        return (\n            <div>\n                <strong>{this.props.session.name}</strong>\n                <ReactDataSheet\n                    data={this.props.data}\n                    valueRenderer={(cell) => cell.value}\n                    sheetRenderer={(props) => (\n                        <Table className=\"datagrid-custom\">\n                            <tbody>\n                            {props.children}\n                            </tbody>\n                        </Table>\n                    )}\n                />\n            </div>\n        );\n    }\n\n    renderAsTable() {\n        return (\n            <div>\n                <strong>{this.props.session.name}</strong>\n                <Table className={this.props.editable ? \"datagrid-custom unselectable\" : \"datagrid-custom\"}>\n                    <tbody>\n                    {this.props.data.map((x, i) =>\n                        <tr key={i}>{x.map((y, j) =>\n                            <td onClick={() => this.select(i, j)} colSpan={y.colSpan}\n                                className={(this.state.swapee === y) ? y.className + \" selected\" : y.className}\n                                key={j}>{y.value}</td>)\n                        }</tr>)\n                    }\n                    </tbody>\n                </Table>\n            </div>\n        );\n\n    }\n\n    render() {\n        return this.renderAsTable();\n    }\n}","import React from 'react';\nimport ReactDataSheet from 'react-datasheet';\n\nimport {Table} from 'reactstrap';\n\n\nexport default class IndivScheduleView extends React.Component {\n\n    renderAsDataSheet() {\n        return (\n            <div>\n                <strong>Individual Schedules</strong>\n                <ReactDataSheet\n                    data={this.props.data}\n                    valueRenderer={(cell) => cell.value}\n                    sheetRenderer={(props) => (\n                        <Table className=\"datagrid-custom\">\n                            <tbody>\n                            {props.children}\n                            </tbody>\n                        </Table>\n                    )}\n                />\n            </div>\n        );\n    }\n\n    renderAsTable() {\n        return (\n            <div>\n                <strong>Individual Schedules</strong>\n                <Table className={\"datagrid-custom\"}>\n                    <tbody>\n                    {this.props.data.map((x, i) =>\n                        <tr key={i}>{x.map((y, j) =>\n                            <td colSpan={y.colSpan} className={y.className} key={j}>{y.value}</td>)\n                        }</tr>)\n                    }\n                    </tbody>\n                </Table>\n            </div>\n        );\n    }\n\n    render() {\n        return this.renderAsTable();\n    }\n\n}","import React from 'react';\n\nimport { Input, Col, FormGroup, Label, Button } from 'reactstrap';\nimport uniqueId from 'react-html-id';\nimport FaTimesCircleO from 'react-icons/lib/fa/times-circle-o';\n\nexport default class VolunteerInput extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleCountChange = this.handleCountChange.bind(this);\n    this.handleNameChange = this.handleNameChange.bind(this);\n    this.updateVol = this.updateVol.bind(this);\n\n    uniqueId.enableUniqueIds(this);\n  }\n\n  handleCountChange(event) {\n    let V = this.props.vol;\n    let newCount = event.target.value;\n    V.staff = V.staff.slice(0, newCount - 1);\n    newCount -= V.staff.length;\n    while (newCount-- > 0) V.staff.push('');\n    this.props.onChange(V);\n  }\n\n  handleNameChange(event) {\n    let V = this.props.vol;\n    V.name = event.target.value;\n    this.props.onChange(V);\n  }\n\n  updateVol(key, event) {\n    let V = this.props.vol;\n    V.staff[key] = event.target.value;\n    this.props.onChange(V);\n  }\n\n  render() {\n    return this.props.editable ? (\n      <FormGroup>\n        <FormGroup row>\n          <Col sm={3}>\n            <Input\n              type='text'\n              value={this.props.vol.name}\n              onChange={this.handleNameChange}\n            />\n          </Col>\n          <Col sm={3}>\n            <Input\n              type='number'\n              min={1}\n              value={this.props.vol.staff.length}\n              onChange={this.handleCountChange}\n            />\n          </Col>\n          <Col sm={5}>\n            {this.props.vol.staff.map((v, i) => {\n              return (\n                <Input\n                  key={i}\n                  type='text'\n                  value={v ? v : ''}\n                  onChange={e => {\n                    this.updateVol(i, e);\n                  }}\n                />\n              );\n            })}\n          </Col>\n          <Col sm={1}>\n            <Button color='danger' onClick={this.props.onDelete}>\n              <FaTimesCircleO size={20} />\n            </Button>\n          </Col>\n        </FormGroup>\n      </FormGroup>\n    ) : (\n      <FormGroup>\n        <FormGroup row>\n          <Label sm={4} for={this.nextUniqueId()}>\n            {this.props.vol.name} ({this.props.vol.staff.length})\n          </Label>\n          <Col sm={8}>\n            {this.props.vol.staff.map((v, i) => {\n              return (\n                <Input\n                  key={i}\n                  type='text'\n                  value={v ? v : ''}\n                  onChange={e => {\n                    this.updateVol(i, e);\n                  }}\n                />\n              );\n            })}\n          </Col>\n        </FormGroup>\n      </FormGroup>\n    );\n  }\n}\n","import React, {Component} from 'react';\n\nimport {Container, FormGroup, Alert, Col, Row} from 'reactstrap';\nimport VolunteerInput from \"../inputs/VolunteerInput\";\nimport {saveToFile_csv} from \"../scheduling/utilities.js\";\n\nexport default class VolunteerView extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            editable: false\n        };\n\n        this.toggleEditable = this.toggleEditable.bind(this);\n        this.onChange = this.onChange.bind(this);\n        this.downloadTemplate = this.downloadTemplate.bind(this);\n        this.deleteVol = this.deleteVol.bind(this);\n        this.importVols = this.importVols.bind(this);\n    }\n\n    toggleEditable() {\n        this.setState({editable: !this.state.editable});\n    }\n\n    onChange(v, i) {\n        let V = this.props.data;\n\n        V[i] = v;\n        this.props.onChange(V);\n    }\n\n    downloadTemplate() {\n        let content = \"role,names\\n\";\n        this.props.data.forEach(v => {\n            content += v.name + \",\"\n            v.staff.forEach((s, i) => {\n                if (s === \"\")\n                    content += \"Name \" + (i + 1) + \",\";\n                else\n                    content += s + \",\"\n            });\n            content += \"\\n\";\n        });\n        saveToFile_csv(\"volunteer_template.csv\", content);\n    }\n\n    deleteVol(idx) {\n        let V = this.props.data;\n        V.splice(idx, 1);\n        this.props.onChange(V);\n    }\n\n    importVols(e, f) {\n        let file = f || e.target.files[0];\n        let reader = new FileReader();\n        reader.onload = (e) => {\n            let V = [];\n            let lines = reader.result.split(\"\\n\");\n            if (lines[0].startsWith(\"role,names\"))\n                lines.shift();\n            lines.forEach(l => {\n                let fields = l.split(',');\n                if (!fields) return;\n                console.log(fields);\n                let name = fields.shift();\n                console.log(fields);\n                if (!name) return;\n                V.push({name: name, staff: fields.filter(f => f !== \"\")});\n            });\n            console.log(lines);\n            this.props.onChange(V);\n        };\n        reader.readAsText(file);\n    }\n\n    render() {\n        return (\n            <Container>\n                <br/>\n                <FormGroup>\n                    <Row>\n                        <Col sm={4}>\n                            <Alert onClick={this.toggleEditable}\n                                   color={this.state.editable ? \"success\" : \"danger\"}>Editable?</Alert>\n                        </Col>\n                        <Col sm={4}>\n                            <label onClick={this.downloadTemplate}>\n                                <Alert color=\"info\">Download sample template</Alert>\n                            </label>\n                        </Col>\n                        <Col sm={4}>\n                            <label>\n                                <Alert>Import from template</Alert>\n                                <input type=\"file\" accept=\".csv\" hidden ref=\"input\" onChange={this.importVols}/>\n                            </label>\n                        </Col>\n                    </Row>\n                    {this.props.data.map((vol, i) => {\n\n                        return (\n                            <VolunteerInput key={i} vol={vol} editable={this.state.editable}\n                                            onDelete={() => this.deleteVol(i)} onChange={(v) => this.onChange(v, i)}/>\n                        );\n                    })}\n                </FormGroup>\n            </Container>\n        );\n    }\n}\n","import React, {Component} from 'react';\n\nimport {Container, Row, Alert, Card} from 'reactstrap';\n\nexport default class SponsorView extends Component {\n    constructor(props) {\n        super(props);\n        this.addSponsor = this.addSponsor.bind(this);\n        this.deleteSponsor = this.deleteSponsor.bind(this);\n    }\n\n    addSponsor(e, f) {\n        let file = f || e.target.files[0];\n        console.log(file);\n        let reader = new FileReader();\n        reader.onload = (e) => {\n            let E = this.props.data;\n            let arr = file.name.split('.');\n            let extension = arr.pop();\n            E.addLocalSponsor({\n                name: arr.join('.'),\n                data: reader.result,\n                extension: extension\n            });\n            console.log(E.sponsors);\n            this.props.handleChange(E.sponsors);\n        };\n        reader.readAsDataURL(file);\n    }\n\n    deleteSponsor(i) {\n        // let i = e.target.idx;\n        // console.log(e.target);\n        console.log(i);\n        let E = this.props.data;\n        E.deleteLocalSponsor(i);\n        this.props.handleChange(E.sponsors);\n    }\n\n    render() {\n        return (\n            <Container>\n                <Row><h1>National sponsors</h1></Row>\n                <Row>\n                    {this.props.data.sponsors.national.map((img, i) => {\n                        return (\n                            <Card key={i} sm={3}>\n                                <img idx={i} alt={img.name} src={img.data} height={100}/>\n                            </Card>\n                        );\n                    })}\n                    <br/>\n                </Row>\n                <Row><h1>Local sponsors</h1></Row>\n                <Row>\n                    <small>Click logo to delete (local only)</small>\n                </Row>\n                <Row>\n                    {this.props.data.sponsors.local.map((img, i) => {\n                        return (\n                            <Card onClick={() => this.deleteSponsor(i)} key={i} sm={12}>\n                                <img idx={i} alt={img.name} src={img.data} height={100}/>\n                            </Card>\n                        );\n                    })}\n                </Row>\n                <Row sm={12}>\n                    <label>\n                        <Alert color=\"success\">Add!</Alert>\n                        <input type=\"file\" accept=\"image/*\" hidden ref=\"input\" onChange={this.addSponsor}/>\n                    </label>\n                </Row>\n            </Container>\n        );\n    }\n}\n","import pdfMake from 'pdfmake/build/pdfmake';\nimport pdfFonts from 'pdfmake/build/vfs_fonts';\n\npdfMake.vfs = pdfFonts.pdfMake.vfs;\n\nexport class PdfDoc {\n  constructor(format, title, landscape) {\n    this._format = format;\n    this.imageDict = {\n      header: this._format.header,\n      logo1: this._format.logoTopLeft,\n      logo2: this._format.logoTopRight,\n      logo3: this._format.logoBotLeft,\n      logo4: this._format.logoBotRight\n    };\n    this.styleDict = {\n      header: {\n        fontSize: this._format.titleFontSize,\n        bold: true,\n        alignment: 'center'\n      },\n      footer: {\n        fontSize: this._format.baseFontSize + 2,\n        bold: true,\n        alignment: 'center',\n        color: 'grey'\n      },\n      header2: {\n        fontSize: this._format.titleFontSize + 2,\n        bold: true,\n        alignment: 'center'\n      },\n      signTitle: { fontSize: 90, bold: true, alignment: 'center' },\n      signSubtitle: {\n        fontSize: 44,\n        bold: true,\n        alignment: 'center',\n        color: 'grey'\n      },\n      certTitle: { fontSize: 52, bold: true, alignment: 'center' },\n      certSubtitle: {\n        fontSize: 36,\n        bold: true,\n        alignment: 'center',\n        color: 'grey'\n      },\n      tablebody: {\n        fontSize: this._format.baseFontSize - 4,\n        alignment: 'center'\n      },\n      extraTime: { alignment: 'center', color: 'red' },\n      tablehead: {\n        fontSize: this._format.baseFontSize - 2,\n        bold: true,\n        alignment: 'center'\n      },\n      breakrow: { bold: true, alignment: 'center', fillColor: '#eeeeee' },\n      teamEntry: { fontSize: this._format.baseFontSize, alignment: 'center' }\n    };\n    // \"Doc\" object is used by pdf generator.\n    this.doc = {};\n    this.doc.content = [];\n    this.doc.header = {\n      text: title,\n      style: 'header',\n      //Left, top, right, bottom\n      margin: [0, 50, 0, 20]\n    };\n    this.doc.background = this.portraitBackground();\n    this.doc.footer = {\n      text: this.format.footerText,\n      style: 'footer',\n      margin: [0, 50, 0, 0]\n    };\n    this.doc.pageMargins = [40, 120, 40, 130];\n    this.doc.pageSize = 'A4';\n    this.doc.images = this.imageDict;\n    this.doc.styles = this.styleDict;\n    if (landscape) {\n      this.doc.pageOrientation = 'landscape';\n      this.doc.background = this.landscapeBackground();\n    }\n    this.filename = 'file';\n    this.blob = null;\n  }\n\n  get format() {\n    return this._format;\n  }\n\n  addContent(content) {\n    this.doc.content.push(content);\n  }\n\n  set filename(x) {\n    this._filename = x;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  empty() {\n    return this.doc.content.length === 0;\n  }\n\n  addPageBreak() {\n    this.doc.content.push({ text: ' ', pageBreak: 'after' });\n  }\n\n  DrawLine() {\n    this.doc.content.push({\n      canvas: [{ type: 'line', x1: 100, y1: 5, x2: 660, y2: 5, lineWidth: 3 }],\n      margin: [0, 60, 0, 10]\n    });\n  }\n\n  download(filename) {\n    if (!filename) filename = this.filename;\n    try {\n      pdfMake.createPdf(this.doc).download(filename);\n    } catch (err) {\n      alert('Error printing: ' + err.message);\n    }\n  }\n\n  open() {\n    try {\n      pdfMake.createPdf(this.doc).open();\n    } catch (err) {\n      alert('Error opening: ' + err.message);\n    }\n  }\n\n  getBlobPromise() {\n    return new Promise((resolve, reject) => {\n      try {\n      pdfMake.createPdf(this.doc).getBlob(blob => {\n        resolve(blob);\n      });\n    } catch (e)\n    {\n      console.error(e);\n      reject(e);\n    }\n    });\n  }\n\n  chomp() {\n    this.doc.content.splice(this.doc.content.length - 1);\n  }\n\n  portraitBackground() {\n    return [\n      // margin: [left, top, right, bottom]\n      {\n        image: 'header',\n        width: 530,\n        height: 20,\n        alignment: 'center',\n        margin: [0, 10, 0, 0]\n      },\n      {\n        table: {\n          widths: ['*', 'auto', '*'],\n          body: [\n            [\n              {\n                image: 'logo1',\n                fit: [100, 65],\n                margin: [50, 0, 0, 0],\n                alignment: 'left'\n              }, // Top left?\n              { text: '' },\n              {\n                image: 'logo2',\n                fit: [100, 65],\n                margin: [50, 0, 0, 0],\n                alignment: 'right'\n              } // Top right\n            ]\n          ]\n        },\n        layout: 'noBorders'\n      },\n      { text: '', margin: 310, alignment: 'center' },\n      {\n        table: {\n          widths: ['*', 'auto', '*'],\n          body: [\n            [\n              {\n                image: 'logo3',\n                fit: [100, 65],\n                margin: [50, 0, 0, 0],\n                alignment: 'left'\n              }, // Top left?\n              { text: '' },\n              {\n                image: 'logo4',\n                fit: [100, 65],\n                margin: [50, 0, 0, 0],\n                alignment: 'right'\n              } // Top right\n            ]\n          ]\n        },\n        layout: 'noBorders'\n      },\n      { image: 'header', width: 530, height: 20, alignment: 'center' }\n    ];\n  }\n\n  landscapeBackground() {\n    return [\n      // margin: [left, top, right, bottom]\n      {\n        image: 'header',\n        width: 800,\n        height: 20,\n        alignment: 'center',\n        margin: [0, 10, 0, 0]\n      },\n      {\n        table: {\n          widths: ['*', 'auto', '*'],\n          body: [\n            [\n              {\n                image: 'logo1',\n                fit: [100, 65],\n                margin: [50, 0, 0, 0],\n                alignment: 'left'\n              }, // Top left?\n              { text: '' },\n              {\n                image: 'logo2',\n                fit: [100, 65],\n                margin: [50, 0, 0, 0],\n                alignment: 'right'\n              } // Top right\n            ]\n          ]\n        },\n        layout: 'noBorders'\n      },\n      { text: '', margin: 190, alignment: 'center' },\n      {\n        table: {\n          widths: ['*', 'auto', '*'],\n          body: [\n            [\n              {\n                image: 'logo3',\n                fit: [100, 65],\n                margin: [50, 0, 0, 0],\n                alignment: 'left'\n              }, // Top left?\n              { text: '' },\n              {\n                image: 'logo4',\n                fit: [100, 65],\n                margin: [50, 0, 0, 0],\n                alignment: 'right'\n              } // Top right\n            ]\n          ]\n        },\n        layout: 'noBorders'\n      },\n      { image: 'header', width: 800, height: 20, alignment: 'center' }\n    ];\n  }\n}\n","import { PdfDoc } from '../templates/PdfDoc';\nimport { DateTime } from '../api/DateTime';\nimport { TYPES } from '../api/SessionTypes';\n\nexport function MakeSessionPDF(event, type) {\n  let maxLocs = 0;\n  event.sessions\n    .filter(s => s.type === type)\n    .forEach(session => (maxLocs = Math.max(maxLocs, session.nLocs)));\n  let doc = new PdfDoc(event.pageFormat, event.title, maxLocs > 4);\n\n  event.sessions\n    .filter(s => s.type === type)\n    .forEach(session => {\n      try {\n        doc.addContent({\n          text: session.name + ' planning',\n          style: 'header2',\n          margin: [0, 10]\n        });\n        doc.addContent(\n          sessionPage(session, event.getSessionDataGrid(session.id, true))\n        );\n        doc.addPageBreak();\n      } catch (err) {\n        alert('Error: ' + err.message);\n      }\n    });\n  if (doc.empty()) return null;\n  // Delete the last page break\n  doc.chomp();\n  doc.filename = (type.name + '-planning').replace(/ /g, '-');\n  return doc;\n}\n\nfunction sessionPage(session, data) {\n  // headers are automatically repeated if the table spans over multiple pages\n  // you can declare how many rows should be treated as headers\n  let t = { headerRows: 1, dontBreakRows: true };\n  t.widths = new Array(session.nLocs + 2);\n  // Pure guesswork to make these fields smaller\n  t.widths[0] = 20;\n  t.widths[1] = 40;\n\n  let w = (440 - t.widths[0] - t.widths[1]) / session.nLocs;\n  // NOTE for widths: I would absolutely love to set the column widths to \"automatic\" - that way, they'd be a lot neater.\n  //  However, for the moment PDFMake doesn't support word breaks in automatically sized columns.\n  for (let i = 2; i < session.nLocs + 2; i++) t.widths[i] = w; // (i < 2) ? 'auto' : '*';\n\n  // t.widths[0] = w;\n  t.body = [];\n  //Header row\n  let header = [];\n  for (let i = 0; i < data[0].length; i++)\n    header.push({ text: data[0][i].value, alignment: 'center' });\n  t.body.push(header);\n\n  // All individual rows\n  for (let i = 1; i < data.length; i++) {\n    let row = [];\n    row.push({ text: data[i][0].value.toString(), alignment: 'center' });\n    row.push({ text: data[i][1].value.toString(), alignment: 'center' });\n    if (data[i][2].colSpan) {\n      row.push({\n        colSpan: data[i][2].colSpan,\n        style: 'breakrow',\n        text: '' + data[i][2].value.toString()\n      });\n      t.body.push(row);\n      continue;\n    }\n    // let diff = session.nLocs;\n    for (let j = 2; j < data[i].length; j++) {\n      if (data[i][j] === null) row.push({});\n      else row.push({ text: data[i][j].value.toString(), style: 'teamEntry' });\n    }\n    t.body.push(row);\n  }\n  // if (session.usesSurrogates && session.fillerPolicy === USE_SURROGATES)\n  //   this.doc.content.push({text:\"\\n* Surrogate team; results not counted\",alignment:'center'});\n  return { table: t, layout: 'lightHorizontalLines' };\n}\n\nexport function MakeDaySchedulePdf(event) {\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\n\n  let t = { headerRows: 1, dontBreakRows: true };\n  t.widths = new Array(3);\n  t.widths[0] = 100;\n  t.widths[1] = 100;\n  t.widths[2] = 300;\n  t.body = [];\n  let header = [];\n  header.push({ text: 'Start' });\n  header.push({ text: 'Eind' });\n  header.push({ text: 'Activiteit' });\n  t.body.push(header);\n\n  let sorted = event.sessions.sort((a, b) => {\n    return a.actualStartTime.mins - b.actualStartTime.mins;\n  });\n  for (let i = 0; i < sorted.length; i++) {\n    let row = [];\n    if (sorted[i].type === TYPES.BREAK) {\n      row.push({ text: sorted[i].actualStartTime.time, fillColor: '#eeeeee' });\n      row.push({ text: sorted[i].actualEndTime.time, fillColor: '#eeeeee' });\n      row.push({ text: sorted[i].name + ' *', fillColor: '#eeeeee' });\n    } else {\n      row.push(sorted[i].actualStartTime.time);\n      row.push(sorted[i].actualEndTime.time);\n      row.push(sorted[i].name);\n    }\n    t.body.push(row);\n  }\n  doc.addContent({ text: 'Dagprogramma', style: 'header2', margin: [0, 10] });\n  doc.addContent({ table: t, layout: 'lightHorizontalLines' });\n\n  doc.addContent({ text: '\\n' });\n  doc.addContent({\n    text:\n      '* Tijdens de geplande pauzes vinden er geen wedstrijden of jurybeoordelingen plaats.'\n  });\n\n  doc.filename = 'Dagprogramma'.replace(/ /g, '-');\n  return doc;\n}\n\n\nexport function MakePracticeTableSignupPdf(event) {\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\n\n  let t = { headerRows: 1, dontBreakRows: true };\n  t.widths = ['auto', '*'];\n  t.body = [];\n  t.body.push(['Tijd', 'Team']);\n\n  let now = event.startTime.clone();\n  while (now.mins < event.endTime.mins - 1) {\n    now = new DateTime(event.timeIncPrac(now, 10));\n    t.body.push([now.displayTime(), '']);\n  }\n\n  doc.addContent({\n    text: 'Oefentafel aanmeldingsformulier',\n    style: 'header2',\n    margin: [0, 10]\n  });\n  doc.addContent({ table: t, layout: 'lightHorizontalLines' });\n  doc.addContent({\n    text:\n      '* Boek niet meer dan twee sessies tegelijk en geen sessies direct na elkaar. Iedereen wil graag de kans krijgen om te oefenen!',\n    style: 'footer'\n  });\n\n  doc.filename = 'oefentafel-aanmeldingsformulier'.replace(/ /g, '-');\n  return doc;\n}\n\nexport function MakeCoreValuesAllocationsPDF(event) {\n  if (!event.pilot) return null;\n\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\n\n  let data = event.getPilotDataGrid();\n\n  let t = { headerRows: 1, dontBreakRows: true };\n  t.widths = new Array(data[0].length);\n  let w = 475 / data[0].length;\n  for (let i = 0; i < data[0].length; i++) t.widths[i] = i < 1 ? 'auto' : '*';\n  t.widths[0] = w;\n  t.body = [];\n  //Header row\n  let header = [];\n  for (let i = 0; i < data[0].length; i++)\n    header.push({ text: 'Jury groep ' + (i + 1), alignment: 'center' });\n  t.body.push(header);\n\n  // All individual rows\n  for (let i = 0; i < data.length; i++) {\n    let row = [];\n    for (let j = 0; j < data[i].length; j++) {\n      if (data[i][j] === null) row.push({});\n      else row.push({ text: data[i][j].value.toString(), style: 'teamEntry' });\n    }\n    t.body.push(row);\n  }\n\n  doc.addContent({\n    text: 'Core values judging allocations',\n    style: 'header2',\n    margin: [0, 10]\n  });\n  doc.addContent({ table: t, layout: 'lightHorizontalLines' });\n\n  doc.filename = 'core-values-allocations';\n  return doc;\n}\n","import { PdfDoc } from '../templates/PdfDoc';\nimport { TYPES } from '../api/SessionTypes';\n\nexport function MakeTeamListPDF(event) {\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\n\n  let t = { headerRows: 1, dontBreakRows: true };\n  t.widths = new Array(4);\n  t.widths[0] = 100;\n  t.widths[1] = 200;\n  t.widths[2] = 100;\n  t.widths[3] = 50;\n  t.body = [];\n  let header = [];\n  header.push({ text: 'Nummer', alignment: 'center' });\n  header.push({ text: 'Naam' });\n  header.push({ text: 'Referentie' });\n  header.push({ text: 'Teamplek #' });\n  t.body.push(header);\n\n  event.teams.forEach(x => {\n    let row = [];\n    row.push({ text: x.number ?? \" \", alignment: 'center' });\n    row.push({ text: x.name ?? \" \" });\n    row.push({ text: x.affiliation ?? \" \" });\n    row.push({ text: x.pitNum ?? \" \" });\n    t.body.push(row);\n  });\n\n  doc.addContent({ text: 'Team Lijst', style: 'header2', margin: [0, 10] });\n  doc.addContent({ table: t, layout: 'lightHorizontalLines' });\n\n  doc.filename = 'team-lijst'.replace(/ /g, '-');\n  return doc;\n}\n\nexport function MakeAllTeamsPDF(event) {\n  let doc = new PdfDoc(event.pageFormat, event.title, true);\n\n  doc.addContent({\n    text: 'Alle Teams Planning',\n    style: 'header2',\n    margin: [0, 10]\n  });\n\n  let data = event.getIndivDataGrid(true);\n  let N = data[3].length;\n  let t = { headerRows: 2, dontBreakRows: true, keepWithHeaderRows: 1 };\n  t.widths = [];\n  let w = 525 / N;\n  for (let i = 0; i < N; i++) {\n    t.widths[i] = w - 2;\n  }\n  t.widths[1] = w + (N - 1) * 2;\n\n  // t.widths[1] = w;//'*';\n  t.body = [];\n  for (let k = 0; k < data.length; k++) {\n    t.body[k] = [];\n    let curStyle = k < 2 ? 'tablehead' : 'tablebody';\n    let col = 'blue';\n    for (let i = 0; i < data[k].length; i++) {\n      // Hack way to calculate alternating colours.  TODO: Fix\n      col = i % 4 > 1 ? 'blue' : 'black';\n      if (k === 0) col = i % 2 === 1 ? 'blue' : 'black';\n      if (data[k][i].colSpan) {\n        t.body[k].push({\n          colSpan: data[k][i].colSpan,\n          text: data[k][i].value?.toString() ?? \" \",\n          color: col,\n          style: curStyle\n        });\n        for (let dummy = 1; dummy < data[k][i].colSpan; dummy++)\n          t.body[k].push({});\n      } else\n        t.body[k].push({\n          text: (data[k][i].value?.toString() ?? \" \") + '',\n          color: col,\n          style: curStyle\n        });\n    }\n  }\n  doc.addContent({\n    table: t,\n    layout: 'lightHorizontalLines',\n    alignment: 'center'\n  });\n\n  doc.filename = 'alle-teams-planning'.replace(/ /g, '-');\n  return doc;\n}\n\nexport function MakeIndivTeamsPDF(event) {\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\n\n  event.teams.forEach(t => {\n    doc.addContent({\n      text: t.number + ': ' + t.name,\n      style: 'header2',\n      margin: [0, 10]\n    });\n    doc.addContent(teamPage(event, t));\n    doc.addContent({ text: ' ', pageBreak: 'after' });\n  });\n  // Delete the last page break\n  doc.chomp();\n  doc.filename = 'individueel-team-planning'.replace(/ /g, '-');\n  return doc;\n}\n\nexport function MakeHangerPDF(event) {\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\n\n  event.teams.forEach(t => {\n    //Team planning\n    doc.addContent({\n      text: t.number + ': ' + t.name,\n      style: 'header2',\n      margin: [0, 10]\n    });\n    doc.addContent(teamPage(event, t));\n    doc.addContent({ text: ' ', pageBreak: 'after' });\n\n    //Dag planning\n    t.widths = new Array(3);\n    t.widths[0] = 100;\n    t.widths[1] = 100;\n    t.widths[2] = 300;\n    t.body = [];\n    let header = [];\n    header.push({ text: 'Start' });\n    header.push({ text: 'Eind' });\n    header.push({ text: 'Activiteit' });\n    t.body.push(header);\n\n    let sorted = event.sessions.sort((a, b) => {\n      return a.actualStartTime.mins - b.actualStartTime.mins;\n    });\n    for (let i = 0; i < sorted.length; i++) {\n      let row = [];\n      if (sorted[i].type === TYPES.BREAK) {\n        row.push({ text: sorted[i].actualStartTime.time, fillColor: '#eeeeee' });\n        row.push({ text: sorted[i].actualEndTime.time, fillColor: '#eeeeee' });\n        row.push({ text: sorted[i].name + ' *', fillColor: '#eeeeee' });\n      } else {\n        row.push(sorted[i].actualStartTime.time);\n        row.push(sorted[i].actualEndTime.time);\n        row.push(sorted[i].name);\n      }\n      t.body.push(row);\n    }\n\n\n\n\n    doc.addContent({ text: 'Dagprogramma', style: 'header2', margin: [0, 10] });\n    doc.addContent({ table: t, layout: 'lightHorizontalLines' });\n\n    doc.addContent({ text: '\\n' });\n    doc.addContent({\n      text:\n        '* Tijdens de geplande pauzes vinden er geen wedstrijden of jurybeoordelingen plaats.'\n    });\n\n\n    doc.addContent({ text: ' ', pageBreak: 'after' });\n  });\n  // Delete the last page break\n  doc.chomp();\n  doc.filename = 'hanger-planning'.replace(/ /g, '-');\n  return doc;\n}\n\nfunction teamPage(event, team) {\n  let schedule = [];\n  for (let i = 0; i < team.schedule.length; i++)\n    if (team.schedule[i].teams) schedule.push(team.schedule[i]);\n  schedule.sort(function(a, b) {\n    return a.time.mins - b.time.mins;\n  });\n\n  let t = { headerRows: 1, dontBreakRows: true };\n  t.widths = new Array(3);\n  for (let i = 0; i < 3; i++) {\n    t.widths[i] = i < -1 ? 'auto' : '*';\n  }\n  t.body = [];\n  t.body[0] = [];\n  t.body[0][0] = { text: 'Tijd (#)' };\n  t.body[0][1] = { text: 'Activiteit' };\n  t.body[0][2] = { text: 'Locatie' };\n  for (let i = 0; i < schedule.length; i++) {\n    // If it's a break that applies to specific sessions, don't put it in.\n    if (\n      event.getSession(schedule[i].session_id).type === TYPES.BREAK &&\n      event.getSession(schedule[i].session_id).appliesTo.length > 0\n    )\n      continue;\n    let row = [];\n    let spot = schedule[i].teams.indexOf(team.id);\n    let num = ' (' + schedule[i].num + ')';\n    if (\n      schedule[i].teams.length - schedule[i].teams.indexOf(team.id) <=\n      schedule[i].surrogates\n    )\n      num = ' (' + schedule[i].num + ', surrogate)';\n    if (event.getSession(schedule[i].session_id).type === TYPES.BREAK) num = '';\n\n    let loc = event.getSession(schedule[i].session_id).locations[\n      spot + schedule[i].loc\n    ];\n    // if (event.getSession(schedule[i].session_id).type === TYPES.BREAK) loc = event.getSession(schedule[i].session_id).locations[0];\n    if (event.getSession(schedule[i].session_id).type === TYPES.BREAK) loc = '';\n    if (!loc) loc = '';\n    row.push({ text: schedule[i].time.time + num });\n    row.push({ text: event.getSession(schedule[i].session_id).name });\n    row.push({ text: '' + loc });\n    t.body.push(row);\n  }\n  return { table: t, layout: 'lightHorizontalLines' };\n}\n","import { PdfDoc } from \"../templates/PdfDoc\";\nimport { TYPES } from \"../api/SessionTypes\";\nimport { EventParams } from \"../api/EventParams\";\n\nexport function MakePitSignsPdf(event) {\n  let doc = new PdfDoc(event.pageFormat, event.title, true);\n  event.teams.forEach((t) => {\n    // margin: [left, top, right, bottom]\n    doc.addContent({\n      text: t.name,\n      style: \"signTitle\",\n      margin: [0, 40, 0, 10],\n    });\n    doc.addContent({\n      text: \"Team \" + t.number,\n      style: \"signSubtitle\",\n      margin: [0, 10],\n    });\n    doc.addPageBreak();\n  });\n  doc.chomp();\n  doc.filename = \"pit-signs\".replace(/ /g, \"-\");\n  return doc;\n}\n\nexport function MakeLocationSignsPdf(event) {\n  let baseLocations = [\n    \"Coaches meeting\",\n    \"Jury check-in\",\n    \"Teams niet toegestaan\",\n    \"Beheerder oefentafels\",\n    \"Oefentafels\",\n    \"Wachtrij\",\n    \"Stilte ruimte\",\n    \"Robot game\",\n    \"Team registratie\",\n    \"Vrijwilligersruimte\",\n  ];\n  let doc = new PdfDoc(event.pageFormat, event.title, true);\n  event.sessions\n    .filter((x) => x.type === TYPES.JUDGING)\n    .forEach((s) => {\n      s.locations.forEach((loc, i) => {\n        // margin: [left, top, right, bottom]\n        doc.addContent({\n          text: s.name + \" Ruimte \" + (i + 1),\n          style: \"signTitle\",\n          margin: [0, 40, 0, 10],\n        });\n        doc.addContent({ text: loc, style: \"signSubtitle\", margin: [0, 10] });\n        doc.addPageBreak();\n      });\n    });\n  let s = event.sessions.find((x) => x.type === TYPES.MATCH_ROUND);\n  s.locations.forEach((loc) => {\n    // margin: [left, top, right, bottom]\n    doc.addContent({ text: loc, style: \"signTitle\", margin: [0, 40, 0, 10] });\n    doc.addPageBreak();\n  });\n  baseLocations.forEach((loc) => {\n    // margin: [left, top, right, bottom]\n    doc.addContent({ text: loc, style: \"signTitle\", margin: [0, 40, 0, 10] });\n    doc.addPageBreak();\n  });\n  doc.chomp();\n  doc.filename = \"Locatie borden\".replace(/ /g, \"-\");\n  return doc;\n}\n\nexport function MakeAwardCertPdf(event) {\n  let F = event.pageFormat.footerText;\n  event.pageFormat.footerText = \"\";\n  let doc = new PdfDoc(event.pageFormat, \"\", true);\n  event.pageFormat.footerText = F;\n  // for (let i = 0; i < event.judgesAwards; i++) {\n  //   doc.addContent({\n  //     text: 'Judges Award',\n  //     style: 'signTitle',\n  //     margin: [0, 40, 0, 10]\n  //   });\n  //   doc.addContent({\n  //     text: '____________________',\n  //     style: 'signTitle',\n  //     margin: [0, 40, 0, 10]\n  //   });\n  //   doc.addContent({\n  //     text: event.title,\n  //     style: 'signSubtitle',\n  //     margin: [0, 10]\n  //   });\n  //   doc.addPageBreak();\n  // }\n  console.log(event.awards);\n  // console.log(EventParams.AWARD_NAMES[event.awardStyleIdx]);\n  event.awards.forEach((a) => {\n    // margin: [left, top, right, bottom]\n    doc.addContent({ text: a, style: \"certTitle\", margin: [0, 60, 0, 10] });\n    doc.DrawLine();\n    doc.addContent({\n      text: event.title,\n      style: \"certSubtitle\",\n      margin: [0, 10],\n    });\n    doc.addPageBreak();\n  });\n  doc.chomp();\n  doc.filename = \"award-certificates\".replace(/ /g, \"-\");\n  return doc;\n}\n\nexport function MakeParticipationCertPdf(event) {\n  let F = event.pageFormat.footerText;\n  event.pageFormat.footerText = \"\";\n  let doc = new PdfDoc(event.pageFormat, \"\", true);\n  event.pageFormat.footerText = F;\n  event.teams.forEach((t) => {\n    // margin: [left, top, right, bottom]\n    doc.addContent({\n      text: \"Certificaat van deelname\",\n      style: \"certTitle\",\n      margin: [0, 60, 0, 10],\n    });\n    doc.DrawLine();\n    doc.addContent({\n      text: event.title,\n      style: \"certSubtitle\",\n      margin: [0, 10],\n    });\n    doc.addContent({ text: t.name, style: \"certSubtitle\", margin: [0, 10] });\n    doc.addPageBreak();\n  });\n  doc.chomp();\n  doc.filename = \"participation-certificates\".replace(/ /g, \"-\");\n  return doc;\n}\n","import { TYPES } from '../api/SessionTypes';\n\nexport function MakeScoringSystemCSV(event) {\n  let csv = 'Version Number,1\\n';\n  csv += 'Block Format,1\\n';\n  csv += 'Number of Teams,' + event.nTeams + '\\n';\n\n  event.teams.forEach(t => {\n    csv += t.number + ',' + t.name + ',' + t.affiliation + ',\\n';\n  });\n\n  csv += 'Block Format,2\\n';\n  let rankingMatches = 0;\n  let allRounds = event.getSessions(TYPES.MATCH_ROUND);\n  allRounds.forEach(S => {\n    rankingMatches += S.schedule.length;\n  });\n  csv += 'Number of Ranking Matches,' + rankingMatches + '\\n';\n  csv += 'Number of Tables,' + allRounds[0].nLocs + '\\n';\n  csv += 'Number of Teams per Table,2\\n';\n  csv +=\n    'Number of Simultaneous Tables,' +\n    Math.floor(allRounds[0].nLocs / 2 / allRounds[0].nSims) +\n    '\\n';\n  csv += 'Table Names,';\n  allRounds[0].locations.forEach(l => {\n    csv += l.replace(' ', '-') + ',';\n  });\n  csv += '\\n';\n  allRounds.forEach(round => {\n    round.schedule.forEach(instance => {\n      csv += instance.num + ',';\n      csv += TimeToExcel(instance.time) + ',';\n      let extra = 0;\n      if (instance.extra) extra = event.extraTime;\n      let tmp = instance.time.clone();\n      tmp.mins = tmp.mins + round.len + extra;\n      csv += TimeToExcel(tmp) + ',';\n      for (let dummy = 0; dummy < instance.loc; dummy++) csv += ',';\n      instance.teams.forEach(t => {\n        csv += event.getTeam(t).number + ',';\n      });\n      for (\n        let dummy = instance.loc + instance.teams.length;\n        dummy < allRounds[0].nLocs;\n        dummy++\n      )\n        csv += ',';\n      csv += '\\n';\n    });\n  });\n\n  let allJudging = event.getSessions(TYPES.JUDGING);\n  csv += 'Block Format,3\\n';\n  csv += 'Number of Judged Events,' + allJudging.length + '\\n';\n  csv += 'Number of Event Time Slots,' + allJudging[0].schedule.length + '\\n';\n  csv += 'Number of Judging Teams,' + allJudging[0].nLocs + '\\n';\n\n  allJudging.forEach(session => {\n    csv += 'Event Name,' + session.name + '\\n';\n    csv += 'Room Names,';\n    session.locations.forEach(loc => {\n      csv += loc + ',';\n    });\n    csv += '\\n';\n    session.schedule.forEach(instance => {\n      csv += instance.num + ',';\n      csv += TimeToExcel(instance.time) + ',';\n      let extra = 0;\n      if (instance.extra) extra = event.extraTime;\n      let tmp = instance.time.clone();\n      tmp.mins = tmp.mins + session.len + extra;\n      csv += TimeToExcel(tmp) + ',';\n      for (let dummy = 0; dummy < instance.loc; dummy++) csv += ',';\n      instance.teams.forEach(t => {\n        csv += event.getTeam(t).number + ',';\n      });\n      csv += '\\n';\n    });\n  });\n\n  let practiceMatches = 0;\n  let allPRounds = event.getSessions(TYPES.MATCH_ROUND_PRACTICE);\n  if (allPRounds.length === 0) return { data: csv, filename: 'scoring_import' };\n  allPRounds.forEach(S => {\n    practiceMatches += S.schedule.length;\n  });\n  csv += 'Block Format,4\\n';\n  csv += 'Number of Practice Matches,' + practiceMatches + '\\n';\n  csv += 'Number of Tables,' + allRounds[0].nLocs / 2 + '\\n';\n  csv += 'Number of Teams per Table,2\\n';\n  csv +=\n    'Number of Simultaneous Tables,' +\n    Math.floor(allRounds[0].nLocs / 2 / allRounds[0].nSims) +\n    '\\n';\n  csv += 'Table Names,';\n  allRounds[0].locations.forEach(l => {\n    csv += l.replace(' ', '-') + ',';\n  });\n  csv += '\\n';\n  allPRounds.forEach(round => {\n    round.schedule.forEach(instance => {\n      csv += instance.num + ',';\n      csv += TimeToExcel(instance.time) + ',';\n      let extra = 0;\n      if (instance.extra) extra = event.extraTime;\n      let tmp = instance.time.clone();\n      tmp.mins = tmp.mins + round.len + extra;\n      csv += TimeToExcel(tmp) + ',';\n      for (let dummy = 0; dummy < instance.loc; dummy++) csv += ',';\n      instance.teams.forEach(t => {\n        csv += event.getTeam(t).number + ',';\n      });\n      for (\n        let dummy = instance.loc + instance.teams.length;\n        dummy < allRounds[0].nLocs;\n        dummy++\n      )\n        csv += ',';\n      csv += '\\n';\n    });\n  });\n  return { data: csv, filename: 'scoring_import' };\n}\n\nexport function MakeAppImportCsv(event) {\n  let data = event.getIndivDataGrid(true);\n\n  let csv = \"\";\n  // Turn the data grid into a CSV\n  for (let k = 0; k < data.length; k++) {\n    csv += data[k].map(x => x.colSpan === 1 ? x.value : \n      Array(x.colSpan).fill(x.value, 0, 1).fill(\"\",1)).flat().map(x => x.toString()).join(\",\") + \"\\n\";\n  }\n\n  return { data: csv, filename: 'app_import' };\n}\n\n// Excel represents time decimally as follows:\n// Time = x.yyyyyyyy\n// Where x = Number of days since 1/1/1900\n// and\t y = Proportion of day (mins/(24*60))\nexport function TimeToExcel(x) {\n  let t = x.time.replace(/$/, ':00');\n  if (x.mins % (24 * 60) < 12 * 60) t = t + ' AM';\n  else t = t + ' PM';\n  return t;\n  // var millenium = new Date();\n  // sd = new String(sd);\n  // millenium.setFullYear(1900,0,1);\n  // var tourn = new Date();\n  // tourn.setFullYear(sd.split(\"-\")[0],sd.split(\"-\")[1]-1,sd.split(\"-\")[2]);\n  // if (tournament.days.length > 1) {\n  // \tconsole.log(Date.daysBetween(millenium,tourn)+(m/(24*60)));\n  // \treturn Date.daysBetween(millenium,tourn)+(m/(24*60));\n  // } else return m/(24*60);\n}\n","import { PdfDoc } from '../templates/PdfDoc';\n\nexport function MakeVolunteerListPdf(event) {\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\n\n  let t = { headerRows: 1, dontBreakRows: true };\n  t.widths = new Array(2);\n  t.widths[0] = 200;\n  t.widths[1] = 300;\n  t.body = [];\n  t.body.push(['Role', 'Name']);\n\n  let colorDark = false;\n  event.volunteers.forEach(v => {\n    colorDark = !colorDark;\n    v.staff.forEach((s, i) => {\n      if (s === '') return;\n      t.body.push([\n        { text: i === 0 ? v.name : '', fillColor: colorDark ? '#eee' : '#fff' },\n        { text: s, fillColor: colorDark ? '#eee' : '#fff' }\n      ]);\n    });\n  });\n\n  doc.addContent({ text: 'Volunteer List', style: 'header2', margin: [0, 10] });\n  doc.addContent({ table: t, layout: 'lightHorizontalLines' });\n\n  doc.filename = 'vol-list'.replace(/ /g, '-');\n  return doc;\n}\n\nexport function MakeSigninPdf(event) {\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\n\n  let t = { headerRows: 1, dontBreakRows: true };\n  t.widths = new Array(3);\n  t.widths[0] = 100;\n  t.widths[1] = 200;\n  t.widths[2] = 200;\n  t.body = [];\n  let header = [];\n  header.push({ text: 'Naam' });\n  header.push({ text: 'Rollen' });\n  header.push({ text: 'Aangemeld?' });\n  t.body.push(header);\n\n  // Reorganise volunteers into a dict.\n  let data = {};\n  event.volunteers.forEach(v => {\n    v.staff.forEach(s => {\n      let name = s;\n      if (name === '') name = '[UNDEFINED]';\n      if (data[name]) data[name] = data[name] + ', ' + v.name;\n      else data[name] = v.name;\n    });\n  });\n\n  Object.keys(data)\n    .sort()\n    .forEach(k => {\n      let row = [];\n      if (k === '[UNDEFINED]') {\n        return;\n      } else {\n        row.push({ text: k });\n        row.push({ text: data[k] });\n        row.push({ text: '' });\n      }\n      t.body.push(row);\n    });\n\n  doc.addContent({\n    text: 'Vrijwiligers Aanmeldingsformulier',\n    style: 'header2',\n    margin: [0, 10]\n  });\n  doc.addContent({ table: t, layout: 'lightHorizontalLines' });\n  // === UNASSIGNED === //\n  /*\n    doc.addPageBreak();\n    doc.addContent({text: \"Unassigned volunteers\", style:'header2',margin:[0,10]});\n\n    if (data[\"[UNDEFINED]\"]) {\n\n      t = {headerRows: 1, dontBreakRows: true};\n      t.widths = new Array(3);\n      t.widths[0] = 100;\n      t.widths[1] = 200;\n      t.widths[2] = 200;\n      t.body = [];\n      let header = [];\n      header.push({text:\"Role\"});\n      header.push({text:\"Signed in?\"});\n      t.body.push(header);\n\n\n      // t.body.push({text: \"Unassigned roles\", colSpan: 3, color: \"grey\"})\n      t.body.push([{text: \"Unassigned roles\"}, {text: \"\"}, {text: \"\"}]);\n      let undef = data[\"[UNDEFINED]\"].split(\", \").sort();\n      undef.forEach(r => {\n        t.body.push([{text: r}, {text: \"\"}, {text: \"\"}]);\n      });\n    }\n    doc.addContent({table: t, layout: 'lightHorizontalLines'});\n    */\n  doc.filename = 'vrijwiligers-aanmeldingsformulier'.replace(/ /g, '-');\n  return doc;\n}\n","import PptxGenJS from 'pptxgenjs';\nimport PreComputedImages from '../resources/images.json';\n\nexport class PptPres {\n  constructor(title, pageFormat, logos) {\n    this.pptx = new PptxGenJS();\n    this.pptx.setLayout('LAYOUT_WIDE');\n\n    this.pptx.defineSlideMaster({\n      title: 'PRESENTATION_BASIC',\n      bkgd: 'FFFFFF',\n      objects: [\n        {\n          image: {\n            data: PreComputedImages.gamelogo,\n            // path: '../resources/gamelogo.jpg', //Doesn't work\n            x: 13.3 * 0.4,\n            y: 0,\n            w: 13.3 * 0.2,\n            h: 13.3 * 0.2,\n            sizing: 'contain'\n          }\n        },\n        {\n          placeholder: {\n            options: {\n              name: 'heading',\n              type: 'body',\n              x: '10%',\n              y: '40%',\n              w: '80%',\n              h: '20%',\n              fontSize: 66,\n              align: 'center',\n              fontFace: 'Palatino',\n              autoFit: 'true'\n            },\n            text: '___ Award'\n          }\n        },\n        {\n          text: {\n            text: title,\n            options: {\n              x: '20%',\n              y: '80%',\n              h: '10%',\n              w: '60%',\n              fontSize: 36,\n              align: 'center',\n              fontFace: 'Palatino',\n              autoFit: 'true'\n            }\n          }\n        },\n        // { 'image': {\n        //         data: pageFormat.header, // Doesn't work\n        //         // path: '../resources/FIRST_header.png',\n        //         x: 0, y: '90%', h: '10%', w: '100%'\n        //     } }\n        { rect: { x: 0.1, y: 7, w: 3, h: 0.5, fill: '00a651' } },\n        { rect: { x: 3.5, y: 7, w: 3, h: 0.5, fill: 'ed1c24' } },\n        { rect: { x: 6.9, y: 7, w: 3, h: 0.5, fill: 'f57e25' } },\n        { rect: { x: 10.3, y: 7, w: 3, h: 0.5, fill: '009cd7' } }\n      ]\n    });\n    this.pptx.defineSlideMaster({\n      title: 'PRESENTATION_WINNER',\n      bkgd: 'FFFFFF',\n      objects: [\n        {\n          image: {\n            data: PreComputedImages.gamelogo,\n            // path: '../resources/gamelogo.jpg', //Doesn't work\n            x: 13.3 * 0.4,\n            y: 0,\n            w: 13.3 * 0.2,\n            h: 13.3 * 0.2,\n            sizing: 'contain'\n          }\n        },\n        {\n          placeholder: {\n            options: {\n              name: 'winner',\n              type: 'body',\n              x: '10%',\n              y: '40%',\n              w: '80%',\n              h: '20%',\n              fontSize: 66,\n              align: 'center',\n              fontFace: 'Palatino',\n              autoFit: 'true'\n            },\n            text: '_________'\n          }\n        },\n        {\n          placeholder: {\n            options: {\n              name: 'award',\n              type: 'body',\n              x: '10%',\n              y: '60%',\n              w: '80%',\n              h: '10%',\n              fontSize: 36,\n              color: 'bbbbbb',\n              align: 'center',\n              fontFace: 'Palatino',\n              autoFit: 'true'\n            },\n            text: '___ Award'\n          }\n        },\n        {\n          text: {\n            text: title,\n            options: {\n              x: '20%',\n              y: '80%',\n              h: '10%',\n              w: '60%',\n              fontSize: 36,\n              align: 'center',\n              fontFace: 'Palatino',\n              autoFit: 'true'\n            }\n          }\n        },\n        // { 'image': {\n        //         data: pageFormat.header, // Doesn't work\n        //         // path: '../resources/FIRST_header.png',\n        //         x: 0, y: '90%', h: '10%', w: '100%'\n        //     } }\n        { rect: { x: 0.1, y: 7, w: 3, h: 0.5, fill: '00a651' } },\n        { rect: { x: 3.5, y: 7, w: 3, h: 0.5, fill: 'ed1c24' } },\n        { rect: { x: 6.9, y: 7, w: 3, h: 0.5, fill: 'f57e25' } },\n        { rect: { x: 10.3, y: 7, w: 3, h: 0.5, fill: '009cd7' } }\n      ]\n    });\n  }\n\n  addTitle(title) {\n    let slide = this.pptx.addNewSlide('PRESENTATION_BASIC');\n    slide.addText(title, { placeholder: 'heading' });\n  }\n\n  addWinner(title, winner) {\n    let slide = this.pptx.addNewSlide('PRESENTATION_WINNER');\n    slide.addText(title, { placeholder: 'award' });\n    if (winner) slide.addText(winner, { placeholder: 'winner' });\n  }\n\n  download() {\n    this.pptx.save();\n  }\n\n  getBlobPromise() {\n    return new Promise((resolve, reject) => {\n      this.pptx.save('jszip', blob => resolve(blob), 'blob');\n    });\n  }\n}\n","import { PptPres } from \"../templates/PptPres\";\nimport { EventParams } from \"../api/EventParams\";\nexport function MakeClosingPresentation(event) {\n  let doc = new PptPres(\n    event.title,\n    event.pageFormat,\n    event.sponsors.nationals\n  );\n\n  doc.addTitle(\"Afsluiting en prijsuitreiking\");\n\n  // for (let i = 0; i < event.judgesAwards; i++) {\n  //   doc.addTitle('_______ Judges Award');\n  //   doc.addWinner('_______ Judges Award');\n  // }\n\n  event.awards.forEach((a) => {\n    // margin: [left, top, right, bottom]\n    doc.addTitle(a);\n    doc.addWinner(a);\n  });\n\n  doc.addTitle(\"Afsluiting en prijsuitreiking\");\n\n  doc.filename = \"closing-slides\";\n\n  return doc;\n}\n","import { TYPES } from '../api/SessionTypes';\nimport {\n  MakeSessionPDF,\n  MakeDaySchedulePdf,\n  MakePracticeTableSignupPdf\n  // MakeCoreValuesAllocationsPDF\n} from './SessionOutputs';\nimport {\n  MakeTeamListPDF,\n  MakeAllTeamsPDF,\n  MakeIndivTeamsPDF,\n  MakeHangerPDF\n} from './TeamOutputs';\nimport {\n  MakePitSignsPdf,\n  MakeLocationSignsPdf,\n  MakeAwardCertPdf,\n  MakeParticipationCertPdf\n} from './SignOutputs';\nimport { MakeScoringSystemCSV, MakeAppImportCsv } from './DataOutputs';\nimport { MakeVolunteerListPdf, MakeSigninPdf } from './VolunteerOutputs';\nimport { MakeClosingPresentation } from '../outputs/PresentationOutput';\n\nimport JSZip from 'jszip';\nimport { saveAs } from 'file-saver';\n\nexport class Zipper {\n  constructor(event, saveFunc) {\n    this._event = event;\n    this.save = saveFunc;\n    this._idx = 0;\n    this.zipname = this.event.title.replace(' ', '_');\n    this.funcs = [\n      () =>\n        this.zipPDF(\n          MakeSessionPDF(event, TYPES.JUDGING),\n          '',\n          2 * this.event.nJudges + 5\n        ),\n      // () => this.zipPDF(MakeCoreValuesAllocationsPDF(event), \"\", this.event.nJudges + 2),\n      () => this.zipPDF(MakeSessionPDF(event, TYPES.MATCH_ROUND), '', 20),\n      () =>\n        this.zipPDF(MakeSessionPDF(event, TYPES.MATCH_ROUND_PRACTICE), '', 20),\n      // () => this.zipPDF(MakeSessionPDF(event, TYPES.MATCH_FILLER), \"\", 20),\n      // () => this.zipPDF(MakeSessionPDF(event, TYPES.MATCH_FILLER_PRACTICE), \"\", 20),\n      () => this.zipPDF(MakeTeamListPDF(event), '', 20),\n      () =>\n        this.zipPDF(\n          MakeDaySchedulePdf(event),\n          '',\n          this.event.nTeams + 20 + 2 * this.event.nJudges\n        ),\n      () => this.zipPDF(MakeAllTeamsPDF(event), '', 4),\n      () => this.zipPDF(MakeIndivTeamsPDF(event), '', 2),\n      () => this.zipPDF(MakeHangerPDF(event), '', 2),\n      () => this.zipPDF(MakePitSignsPdf(event), 'signage', 2),\n      () => this.zipPDF(MakeVolunteerListPdf(event), 'volunteers', 2),\n      () => this.zipPDF(MakeLocationSignsPdf(event), 'signage', 2),\n      () => this.zipPDF(MakeSigninPdf(event), 'volunteers', 2),\n      () => this.zipPDF(MakePracticeTableSignupPdf(event), 'signage', 4),\n      () => this.zipPDF(MakeAwardCertPdf(event), 'certificates', 2),\n      () => this.zipPDF(MakeParticipationCertPdf(event), 'certificates', 10),\n      () => this.zipCSV(MakeScoringSystemCSV(event), 'scoring-system'),\n      () => this.zipCSV(MakeAppImportCsv(event), 'app-import'),\n      () => this.zipSponsors(this.event.sponsors.national, 'scoring-system'),\n      () => this.zipSponsors(this.event.sponsors.local, 'scoring-system'),\n      () => this.zipPPT(MakeClosingPresentation(event))\n    ];\n    this.zip = new JSZip();\n  }\n\n  ProcessNext() {\n    this.funcs[this._idx++]();\n  }\n\n  ProcessGiven(idx) {\n    console.log('Processing ' + idx);\n    this.funcs[idx]();\n    this._idx = idx;\n  }\n\n  DownloadZip() {\n    this.zip.generateAsync({ type: 'blob' }).then(content => {\n      saveAs(content, this.zipname + '.zip');\n    });\n  }\n\n  zipPDF(pdf, folder, count) {\n    if (!pdf) return;\n    let loc = folder ? this.zip.folder(folder) : this.zip;\n    try {\n      console.log(\"Zipping \" + pdf.filename);\n      loc.file(pdf.filename + '_' + count + '.pdf', pdf.getBlobPromise());\n    } catch (err) {\n      alert('Error saving: ' + pdf.filename + '; ' + err.message);\n    }\n  }\n\n  zipCSV(csv, folder) {\n    if (!csv) return;\n    console.log(csv);\n    let loc = folder ? this.zip.folder(folder) : this.zip;\n    try {\n      loc.file(\n        csv.filename + '.csv',\n        new Blob([csv.data], { type: 'application/csv' })\n      );\n    } catch (err) {\n      alert('Error saving: ' + csv.filename + '.csv ; ' + err.message);\n    }\n  }\n\n  zipSponsors(sponsors, folder) {\n    if (sponsors.length === 0) return false;\n    let loc = folder ? this.zip.folder(folder) : this.zip;\n    this.zipAllLogos(sponsors, loc);\n    return true;\n  }\n\n  zipPPT(ppt, folder) {\n    if (!ppt) return;\n    let loc = folder ? this.zip.folder(folder) : this.zip;\n    try {\n      loc.file(ppt.filename + '.pptx', ppt.getBlobPromise());\n    } catch (err) {\n      alert('Error saving: ' + ppt.filename + '; ' + err.message);\n    }\n  }\n\n  zipAllLogos(logos, zip) {\n    logos.forEach(im => {\n      var uri = im.data;\n      var idx = uri.indexOf('base64,') + 'base64,'.length; // or = 28 if you're sure about the prefix\n      var content = uri.substring(idx);\n      zip.file(im.name + '.' + im.extension, content, { base64: true });\n    });\n  }\n\n  get event() {\n    return this._event;\n  }\n\n  get length() {\n    return this.funcs.length;\n  }\n\n  get FilesLeft() {\n    return this.funcs.length - this._idx;\n  }\n\n  get idx() {\n    return this._idx;\n  }\n}\n","import { TYPES } from '../api/SessionTypes';\nimport {\n  MakeSessionPDF,\n  MakeDaySchedulePdf,\n  MakePracticeTableSignupPdf\n  // MakeCoreValuesAllocationsPDF\n} from './SessionOutputs';\nimport {\n  MakeTeamListPDF,\n  MakeAllTeamsPDF,\n  MakeIndivTeamsPDF,\n  MakeHangerPDF\n} from './TeamOutputs';\nimport {\n  MakePitSignsPdf,\n  MakeLocationSignsPdf,\n  MakeAwardCertPdf,\n  MakeParticipationCertPdf\n} from './SignOutputs';\nimport { MakeScoringSystemCSV, MakeAppImportCsv } from './DataOutputs';\nimport { MakeVolunteerListPdf, MakeSigninPdf } from './VolunteerOutputs';\nimport { MakeClosingPresentation } from '../outputs/PresentationOutput';\n\nimport { Zipper } from './Zipper';\nimport { saveToFile_csv } from '../scheduling/utilities';\n\nexport class SingleOutput {\n  constructor(event, saveFunc) {\n    this._event = event;\n    this.save = saveFunc;\n    this.funcs = [\n      () =>\n        this.getPDF(\n          MakeSessionPDF(event, TYPES.JUDGING),\n          2 * this.event.nJudges + 5\n        ),\n      // () => this.getPDF(MakeCoreValuesAllocationsPDF(event), \"\", this.event.nJudges + 2),\n      () => this.getPDF(MakeSessionPDF(event, TYPES.MATCH_ROUND), 20),\n      () => this.getPDF(MakeSessionPDF(event, TYPES.MATCH_ROUND_PRACTICE), 20),\n      // () => this.getPDF(MakeSessionPDF(event, TYPES.MATCH_FILLER), 20),\n      // () => this.getPDF(MakeSessionPDF(event, TYPES.MATCH_FILLER_PRACTICE), 20),\n      () => this.getPDF(MakeTeamListPDF(event), 20),\n      () =>\n        this.getPDF(\n          MakeDaySchedulePdf(event),\n          this.event.nTeams + 20 + 2 * this.event.nJudges\n        ),\n      () => this.getPDF(MakeAllTeamsPDF(event), 4),\n      () => this.getPDF(MakeIndivTeamsPDF(event), 2),\n      () => this.getPDF(MakeHangerPDF(event), 2),\n      () => this.getPDF(MakePitSignsPdf(event), 2),\n      () => this.getPDF(MakeVolunteerListPdf(event), 2),\n      () => this.getPDF(MakeLocationSignsPdf(event), 2),\n      () => this.getPDF(MakeSigninPdf(event), 2),\n      () => this.getPDF(MakePracticeTableSignupPdf(event), 4),\n      () => this.getPDF(MakeAwardCertPdf(event), 2),\n      () => this.getPDF(MakeParticipationCertPdf(event), 10),\n      () => this.getCSV(MakeScoringSystemCSV(event)),\n      () => this.getCSV(MakeAppImportCsv(event)),\n      () => this.getSponsors(this.event.sponsors.national, 'scoring-system'),\n      () => this.getSponsors(this.event.sponsors.local, 'scoring-system'),\n      () => this.getPPT(MakeClosingPresentation(event))\n    ];\n  }\n\n  static funcNames = [\n    // Must be the same order as \"func\" above\n    'Jury planning',\n    // () => this.getPDF(MakeCoreValuesAllocationsPDF(event), \"\", this.event.nJudges + 2),\n    'Match planning',\n    'Oefen wedstrijd planning',\n    // \"Filler match schedule\",\n    // \"Filler practice match schedule\",\n    'Team lijst',\n    'Dag planning',\n    'Alle team planningen',\n    'Individueel team planning',\n    'Hanger planning',\n    'Teamplek borden',\n    'Vrijwilligers lijst',\n    'Locatie borden',\n    'Vrijwilligers aanmaald formulier',\n    'Oefentafel opgeef formulier',\n    'Award certificaten',\n    'Deelnemers certificaten',\n    'Scoring system import file',\n    'App import file',\n    'Nationale sponsors',\n    'Locale sponsors',\n    'Afsluiting powerpoint'\n  ];\n\n  get(idx) {\n    this.funcs[idx]();\n  }\n\n  getPDF(pdf, count) {\n    if (!pdf) return;\n    try {\n      pdf.download(pdf.filename + '_' + count + '.pdf');\n    } catch (err) {\n      alert('Error saving: ' + pdf.filename + '; ' + err.message);\n    }\n  }\n\n  getSponsors(sponsors, name) {\n    let z = new Zipper(this._event, this.save);\n    if (z.zipSponsors(sponsors, name)) z.DownloadZip();\n  }\n\n  getCSV(csv) {\n    if (!csv) return;\n    console.log(csv);\n    try {\n      saveToFile_csv(csv.filename + '.csv', csv.data);\n    } catch (err) {\n      alert('Error saving: ' + csv.filename + '.csv ; ' + err.message);\n    }\n  }\n\n  getPPT(ppt) {\n    if (!ppt) return;\n    try {\n      ppt.download(); //(ppt.filename + \".pptx\", ppt.getBlobPromise());\n    } catch (err) {\n      alert('Error saving: ' + ppt.filename + '; ' + err.message);\n    }\n  }\n  get event() {\n    return this._event;\n  }\n\n  get length() {\n    return this.funcs.length;\n  }\n}\n","import React, {Component} from 'react';\nimport {Zipper} from \"../outputs/Zipper.js\";\nimport {SingleOutput} from \"../outputs/SingleOutput.js\";\nimport {\n    Modal,\n    ModalHeader,\n    ModalBody,\n    ModalFooter,\n    Container,\n    Row,\n    Col,\n    Button, ButtonGroup,\n    Card, //CardText, CardTitle,\n    // UncontrolledDropdown, DropdownToggle, DropdownItem, DropdownMenu,\n    Form, FormGroup, Label, Input\n} from 'reactstrap';\nimport NumberInput from \"../inputs/NumberInput\";\nimport TextInput from \"../inputs/TextInput\";\n\nexport default class OutputGenView extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            pdf_modal: false,\n            running: false,\n            selectedIdx: 0,\n            checked: SingleOutput.funcNames.map((x,i) => {return true}), //return i<7\n            progress: 0\n        };\n        this.toggle = this.toggle.bind(this);\n        this.toggleChecked = this.toggleChecked.bind(this);\n        this.downloadOne = this.downloadOne.bind(this);\n        this.downloadSelected = this.downloadSelected.bind(this);\n        this.checkAll = this.checkAll.bind(this);\n        this.checkNone = this.checkNone.bind(this);\n        this.updateBaseSize = this.updateBaseSize.bind(this);\n        this.updateTitleSize = this.updateTitleSize.bind(this);\n        this.updateFooter = this.updateFooter.bind(this);\n        this.onTLChange = this.onTLChange.bind(this);\n        this.onTRChange = this.onTRChange.bind(this);\n        this.onBLChange = this.onBLChange.bind(this);\n        this.downloadAll = this.downloadAll.bind(this);\n        this.onBRChange = this.onBRChange.bind(this);\n    }\n\n    toggle() {\n        this.setState({\n            pdf_modal: !this.state.pdf_modal\n        });\n    }\n\n\n    downloadOne() {\n      if (this.props.data.errors > 0) alert(\"Errors in schedule!  This may not be a good output\");\n      if (this.state.running) return;\n      let z = new SingleOutput(this.props.data, this.props.save);\n      this.setState({running: true});\n      setTimeout(() => {\n        z.get(this.state.selectedIdx);\n        this.setState({running: false});\n      }, 50);\n    }\n\n    downloadSelected() {\n      if (this.props.data.errors > 0) alert(\"Errors in schedule!  This may not be a good output\");\n      if (this.state.running) return;\n      let N = this.state.checked.filter((x)=>x).length;\n      if (N === 0) return;\n      if (N === 1) {\n        let z = new SingleOutput(this.props.data, this.props.save);\n        this.setState({running: true});\n        let toDo = 0;\n        for (let i = 0; i < this.state.checked.length; i++)\n          if (this.state.checked[i]) {\n            toDo = i;\n            break;\n          }\n        setTimeout(() => {\n          z.get(toDo);\n          this.setState({running: false});\n        }, 50);\n      } else {\n        let z = new Zipper(this.props.data, this.props.save);\n        this.setState({running: true});\n        console.log(this.state.checked);\n        setTimeout(() => {\n            this.state.checked.forEach((x,i) => {if (x) z.ProcessGiven(i)});\n            z.DownloadZip();\n            this.setState({running: false});\n        }, 50);\n      }\n    }\n\n    downloadAll() {\n        if (this.props.data.errors > 0) alert(\"Errors in schedule!  This may not be a good output\");\n        if (this.state.running) return;\n        let z = new Zipper(this.props.data, this.props.save);\n        this.setState({running: true});\n        setTimeout(() => {\n            while (z.FilesLeft > 0)\n                z.ProcessNext();\n            z.DownloadZip();\n            this.setState({running: false});\n        }, 50);\n    }\n\n    checkAll() {\n      let C = this.state.checked.map((x) => {return true;});\n      this.setState({checked: C});\n    }\n\n    checkNone() {\n      let C = this.state.checked.map((x) => {return false;});\n      this.setState({checked: C});\n    }\n\n    toggleChecked(idx) {\n      let C = this.state.checked;\n      C[idx] = !C[idx];\n      this.setState({checked: C});\n    }\n\n    updateTitleSize(value) {\n        let E = this.props.data;\n        E.pageFormat.titleFontSize = value;\n        this.props.handleChange(E);\n    }\n\n    updateFooter(value) {\n        let E = this.props.data;\n        E.pageFormat.footerText = value;\n        this.props.handleChange(E);\n    }\n\n    updateBaseSize(value) {\n        let E = this.props.data;\n        E.pageFormat.baseFontSize = value;\n        this.props.handleChange(E);\n    }\n\n    onTLChange(e, f) {\n        let file = f || e.target.files[0];\n        let reader = new FileReader();\n        reader.onload = (e) => {\n            let E = this.props.data;\n            E.pageFormat.logoTopLeft = reader.result;\n            this.props.handleChange(E);\n        };\n        reader.readAsDataURL(file);\n    }\n\n    onTRChange(e, f) {\n        let file = f || e.target.files[0];\n        let reader = new FileReader();\n        reader.onload = (e) => {\n            let E = this.props.data;\n            E.pageFormat.logoTopRight = reader.result;\n            this.props.handleChange(E);\n        };\n        reader.readAsDataURL(file);\n    }\n\n    onBLChange(e, f) {\n        let file = f || e.target.files[0];\n        let reader = new FileReader();\n        reader.onload = (e) => {\n            let E = this.props.data;\n            E.pageFormat.logoBotLeft = reader.result;\n            this.props.handleChange(E);\n        };\n        reader.readAsDataURL(file);\n    }\n\n    onBRChange(e, f) {\n        let file = f || e.target.files[0];\n        let reader = new FileReader();\n        reader.onload = (e) => {\n            let E = this.props.data;\n            E.pageFormat.logoBotRight = reader.result;\n            this.props.handleChange(E);\n        };\n        reader.readAsDataURL(file);\n    }\n\n\n    // To add image uploading...\n    // https://codepen.io/hartzis/pen/VvNGZP\n\n    render() {\n        return (\n            <Container>\n                <Modal isOpen={this.state.pdf_modal} toggle={this.toggle}>\n                    <ModalHeader toggle={this.toggle}>Edit PDF Format</ModalHeader>\n                    <ModalBody>\n                        <Container>\n                            <Row>\n                                <Col><label>\n                                    <img alt={\"Top Left Logo\"} src={this.props.data.pageFormat.logoTopLeft}\n                                         height={100}/>\n                                    <input type=\"file\" accept=\"image/*\" hidden ref=\"input\" onChange={this.onTLChange}/>\n                                </label></Col>\n                                <Col><label>\n                                    <img alt={\"Top Right Logo\"} src={this.props.data.pageFormat.logoTopRight}\n                                         height={100}/>\n                                    <input type=\"file\" accept=\"image/*\" hidden ref=\"input\" onChange={this.onTRChange}/>\n                                </label></Col>\n                            </Row>\n                            <br/>\n                            <NumberInput min={4} value={this.props.data.pageFormat.titleFontSize}\n                                         label={\"Title font size\"} onChange={this.updateTitleSize}/>\n                            <br/>\n                            <NumberInput min={2} value={this.props.data.pageFormat.baseFontSize}\n                                         label={\"Base font size\"} onChange={this.updateBaseSize}/>\n                            <br/>\n                            <Row>\n                                <Col><label>\n                                    <img alt={\"Bottom Left Logo\"} src={this.props.data.pageFormat.logoBotLeft}\n                                         height={100}/>\n                                    <input type=\"file\" accept=\"image/*\" hidden ref=\"input\" onChange={this.onBLChange}/>\n                                </label></Col>\n                                <Col><label>\n                                    <img alt={\"Bottom Right Logo\"} src={this.props.data.pageFormat.logoBotRight}\n                                         height={100}/>\n                                    <input type=\"file\" accept=\"image/*\" hidden ref=\"input\" onChange={this.onBRChange}/>\n                                </label></Col>\n                            </Row>\n                            <br/>\n                            <TextInput value={this.props.data.pageFormat.footerText} label={\"Footer Text\"}\n                                       onChange={this.updateFooter}/>\n                        </Container>\n                        <br/>\n                    </ModalBody>\n                    <ModalFooter>\n                        <Button color=\"secondary\" onClick={this.toggle}>Close</Button>\n                    </ModalFooter>\n                </Modal>\n\n                <strong>Outputs</strong>\n                <hr/>\n                <Row>\n                    <Col lg=\"12\">\n                      <Button color=\"primary\" block onClick={this.toggle}>Edit PDF format...</Button>\n                      {/*<br/>\n                      <Card body>\n                        <CardTitle>All outputs</CardTitle>\n                        <Button color={this.state.running ? \"secondary\" : \"success\"}\n                                onClick={this.downloadAll}>{this.state.running ? \"Please wait...\" : \"Download all!\"}</Button>\n                      </Card>\n                      <br/>\n                      <Card body>\n                        <CardTitle>Single output</CardTitle>\n                        <ButtonGroup>\n                        <UncontrolledDropdown>\n                          <DropdownToggle caret>\n                            {SingleOutput.funcNames[this.state.selectedIdx]}\n                          </DropdownToggle>\n                          <DropdownMenu>\n                            {SingleOutput.funcNames.map((x,i) => {\n                              return <DropdownItem key={i} onClick={() => {this.setState({selectedIdx: i})}}>{x}</DropdownItem>;\n                            })}\n                          </DropdownMenu>\n                        </UncontrolledDropdown>\n                        <Button color={this.state.running ? \"secondary\" : \"success\"}\n                                onClick={this.downloadOne}>{this.state.running ? \"Please wait...\" : \"Download one\"}</Button>\n                                </ButtonGroup>\n                      </Card>\n                      <br/>*/}\n                      <Card body>\n                        <Form>\n                          <FormGroup row>\n                          {SingleOutput.funcNames.map((x,i) => {\n                            return (\n                              <Col sm={{ size: 3 }} key={i}>\n                              <FormGroup check>\n                                <Label check>\n                                  <Input type=\"checkbox\" id=\"checkbox2\" checked={this.state.checked[i]} onChange={() => this.toggleChecked(i)}/>{' '}\n                                  {SingleOutput.funcNames[i]}\n                                </Label>\n                              </FormGroup>\n                              </Col>\n                            );\n                          })}\n                          </FormGroup>\n                        </Form>\n                        <ButtonGroup>\n                          <Button onClick={this.checkAll} color=\"info\">All</Button>\n                          <Button onClick={this.checkNone} color=\"warning\">None</Button>\n                        </ButtonGroup>\n                        <br/>\n                        <Button color={this.state.running ? \"secondary\" : \"success\"}\n                                onClick={this.downloadSelected}>{this.state.running ? \"Please wait...\" : \"Download these\"}</Button>\n                      </Card>\n                    </Col>\n                </Row>\n                <br/>\n                {/*<Row>*/}\n                {/*<Col lg=\"6\">*/}\n                {/*<Card body>*/}\n                {/*<CardTitle>CSV only</CardTitle>*/}\n                {/*<CardText>Export to CSV format used by the FLL scoring system</CardText>*/}\n                {/*<Button color=\"success\" onClick={this.generateCSV}>Go!</Button>*/}\n                {/*</Card>*/}\n                {/*</Col>*/}\n                {/*<Col lg=\"6\">*/}\n                {/*<Card body>*/}\n                {/*<CardTitle>PDF only</CardTitle>*/}\n                {/*<CardText>Export ready-to-print formatted PDFs</CardText>*/}\n                {/*<Button color=\"primary\" block onClick={this.toggle}>Edit format...</Button>*/}\n                {/*<Button color=\"success\" block onClick={this.generatePDF}>Go!</Button>*/}\n                {/*</Card>*/}\n                {/*</Col>*/}\n                {/*</Row>*/}\n            </Container>\n        );\n    }\n}\n","import React from 'react';\nimport SingleScheduleView from \"./SingleScheduleView\";\nimport IndivScheduleView from \"./IndivScheduleView\";\nimport VolunteerView from \"./VolunteerView\";\nimport SponsorView from \"./SponsorView\";\nimport OutputGenView from \"./OutputGenView\";\n\nimport {TYPES} from \"../api/SessionTypes\";\n\nimport {Container, Row, Col, Nav, NavItem, NavLink, TabContent, TabPane} from 'reactstrap';\nimport SessionForm from \"./SessionForm\";\nimport BasicsForm from \"./BasicsForm\";\nimport TeamList from '../inputs/TeamList';\nimport ToggleButton from 'react-toggle-button';\n\nexport default class FullScheduleView extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            activeTab: 'sessions',\n            editable: false\n        }\n\n        this.getItems = this.getItems.bind(this);\n        this.onSwap = this.onSwap.bind(this);\n        this.updatePDFSettings = this.updatePDFSettings.bind(this);\n        this.updateVolunteers = this.updateVolunteers.bind(this);\n        this.updateSponsors = this.updateSponsors.bind(this);\n        this.toggleEditable = this.toggleEditable.bind(this);\n    }\n\n    onSwap(sID, a, b) {\n        let E = this.props.event;\n        let err = E.swapTeams(sID, a.id, b.id);\n        if (err) alert(err);\n        else this.props.onSwap(E);\n    }\n\n    getItems() {\n        return this.props.event.sessions;\n    }\n\n    toggle(tab) {\n        if (this.state.activeTab !== tab) {\n            this.setState({\n                activeTab: tab\n            });\n        }\n    }\n\n    updateSponsors(T) {\n        let E = this.props.event;\n        E.sponsors = T;\n        this.props.onChange(E);\n    }\n\n    updateVolunteers(V) {\n        let E = this.props.event;\n        E.volunteers = V;\n        this.props.onChange(E);\n    }\n\n    //TODO make cosmetic\n    updateDays(T) {\n\n    }\n\n    //TODO make cosmetic\n    updateTeams(T) {\n        let E = this.props.event;\n        E.teams = T;\n        this.props.onChange(E);\n        console.log(this.props.event);\n    }\n\n    //TODO make cosmetic\n    updateSessions(S) {\n        let E = this.props.event;\n        for (let i = 0; i < E.sessions.length; i++) {\n            if (E.sessions[i].id === S.id) {\n                E.sessions[i] = S;\n                this.props.onChange(E);\n                break;\n            }\n        }\n    }\n\n    updatePDFSettings(S) {\n        let E = this.props.event;\n        E.pageFormat = S.pageFormat;\n        this.props.onChange(E);\n    }\n\n    toggleEditable() {\n        this.setState({editable: !this.state.editable});\n    }\n\n    render() {\n        return (\n            <Container>\n                <Nav pills>\n                    {/*<NavItem><NavLink>{this.props.event.errors} error{this.props.event.errors !== 1 && \"s\"}</NavLink></NavItem>*/}\n                    {/*<NavItem>*/}\n                    {/*<NavLink href=\"#\" className={(this.state.activeTab === 'display') ? \"active\" : \"\"}*/}\n                    {/*onClick={() => { this.toggle('display')}}>*/}\n                    {/*Display Parameters*/}\n                    {/*</NavLink>*/}\n                    {/*</NavItem>*/}\n                    <NavItem>\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'sessions') ? \"active\" : \"\"}\n                                 onClick={() => {\n                                     this.toggle('sessions')\n                                 }}>\n                            Session schedules\n                        </NavLink>\n                    </NavItem>\n                    <NavItem>\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'indiv') ? \"active\" : \"\"}\n                                 onClick={() => {\n                                     this.toggle('indiv')\n                                 }}>\n                            Individual schedules\n                        </NavLink>\n                    </NavItem>\n                    <NavItem>\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'vols') ? \"active\" : \"\"}\n                                 onClick={() => {\n                                     this.toggle('vols')\n                                 }}>\n                            Volunteers\n                        </NavLink>\n                    </NavItem>\n                    <NavItem>\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'sponsors') ? \"active\" : \"\"}\n                                 onClick={() => {\n                                     this.toggle('sponsors')\n                                 }}>\n                            Sponsors\n                        </NavLink>\n                    </NavItem>\n                    <NavItem>\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'outputs') ? \"active\" : \"\"}\n                                 onClick={() => {\n                                     this.toggle('outputs')\n                                 }}>\n                            Generate Outputs\n                        </NavLink>\n                    </NavItem>\n                    {(this.props.event.errors === 0 && this.state.activeTab === 'sessions') ? <NavItem>\n                        <div onClick={this.toggleEditable}>\n                            <small className=\"not-text\">Editable</small>\n                            &nbsp;\n                            <ToggleButton value={this.state.editable} onToggle={this.toggleEditable}/></div>\n                    </NavItem> : \"\"}\n\n                </Nav>\n                <TabContent activeTab={this.state.activeTab}>\n                    <TabPane tabId='display'>\n                        &nbsp;\n                        <BasicsForm event={this.props.event} cosmetic onChange={this.updateDays}/>\n                        {this.props.event.sessions.map(S =>\n                            <SessionForm key={S.id} cosmetic session={S} onChange={this.updateSessions}/>)}\n                        <TeamList cosmetic teams={this.props.event.teams} onChange={this.updateTeams}/>\n                    </TabPane>\n                    <TabPane tabId='sessions'>\n                        &nbsp;\n                        <Row>\n                            {this.getItems().filter(x => x.type !== TYPES.BREAK)\n                                .sort((a, b) => {\n                                    return a.type.priority - b.type.priority\n                                })\n                                .map(x => {\n                                    return (\n                                        <Col sm=\"12\" md=\"6\" key={x.id}>\n                                            <SingleScheduleView id={x.id}\n                                                                data={this.props.event.getSessionDataGrid(x.id)}\n                                                                editable={this.state.editable} onSwap={this.onSwap}\n                                                                session={x}/>\n                                        </Col>);\n                                })}\n                        </Row>\n                    </TabPane>\n                    <TabPane tabId='indiv'>\n                        <IndivScheduleView data={this.props.event.getIndivDataGrid()}/>\n                    </TabPane>\n                    <TabPane tabId='vols'>\n                        <VolunteerView data={this.props.event.volunteers} onChange={this.updateVolunteers}/>\n                    </TabPane>\n                    <TabPane tabId='sponsors'>\n                        <SponsorView data={this.props.event} handleChange={this.updateSponsors}/>\n                    </TabPane>\n                    <TabPane tabId='outputs'>\n                        <OutputGenView data={this.props.event} save={this.props.save}\n                                       handleChange={this.updatePDFSettings}/>\n                    </TabPane>\n                </TabContent>\n            </Container>\n        );\n    }\n}\n","import React, { Component } from \"react\";\n\nimport { DateTime } from \"./api/DateTime\";\nimport { EventParams } from \"./api/EventParams\";\nimport DetailView from \"./ui/DetailView\";\nimport InitForm from \"./ui/InitForm\";\nimport TopBar from \"./ui/TopBar\";\n\nimport { Scheduler } from \"./scheduling/Scheduler\";\n\nimport { freeze, saveToFile_json, thaw } from \"./scheduling/utilities\";\n\nimport { Button, Col, Container, Jumbotron, Row } from \"reactstrap\";\nimport DayScheduleView from \"./ui/DayScheduleView\";\nimport FullScheduleView from \"./ui/FullScheduleView\";\n\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"react-datasheet/lib/react-datasheet.css\";\nimport \"./App.css\";\nimport \"./react-datagrid-custom.css\";\n\nconst VERSION = \"25.0.0\";\n\n// Should set this up as github.io page under the firstaustralia repo\n// That way github manages load balancing and doesn't crash\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      display: \"Initialise\",\n      version: VERSION,\n      eventParams: new EventParams(\n        VERSION,\n        \"2025 FLL Competition\",\n        24,\n        new DateTime(8.5 * 60),\n        new DateTime(17 * 60)\n      ),\n      processing: false,\n    };\n    this.initSchedule = this.initSchedule.bind(this);\n    this.handleScheduleChange = this.handleScheduleChange.bind(this);\n    this.customise = this.customise.bind(this);\n    this.generate = this.generate.bind(this);\n    this.onSave = this.onSave.bind(this);\n    this.onLoad = this.onLoad.bind(this);\n    this.updatePDFSettings = this.updatePDFSettings.bind(this);\n    this.update = this.update.bind(this);\n  }\n\n  initSchedule(initState) {\n    let E = new EventParams(\n      this.state.version,\n      initState.title,\n      initState.nTeams,\n      initState.startTime,\n      initState.endTime\n    );\n\n    this.setState({\n      eventParams: E,\n    });\n  }\n\n  handleScheduleChange(E) {\n    this.setState({\n      eventParams: E,\n    });\n    // I don't love this way of doing it...\n    let S = new Scheduler(E);\n    S.buildAllTables();\n  }\n\n  customise() {\n    this.state.eventParams.populateFLL();\n    let S = new Scheduler(this.state.eventParams);\n    S.buildAllTables();\n    this.setState({ display: \"Customise\" });\n    window.scrollTo(0, 0);\n  }\n\n  generate() {\n    console.log(\"GENERATING\");\n    this.setState({ processing: true });\n    setTimeout(() => {\n      let S = new Scheduler(this.state.eventParams);\n      let count = 500;\n      do {\n        S.buildAllTables();\n        S.fillAllTables();\n        S.evaluate();\n      } while (this.state.eventParams.errors > 0 && count-- > 0);\n      if (this.state.eventParams.errors > 0)\n        alert(\"Schedule generated with errors! Please adjust parameters\");\n      this.setState({ display: \"Review\" });\n      this.state.eventParams.buildVolunteerSheet();\n      this.setState({ processing: false });\n      window.scrollTo(0, 0);\n    }, 50);\n  }\n\n  onSave(fname, zip) {\n    let filename = fname;\n    let json_str = JSON.stringify(this.state, freeze);\n    if (!filename) filename = this.state.eventParams.title.replace(/ /g, \"_\");\n    if (zip) {\n      try {\n        zip.file(\n          filename + \".schedule\",\n          new Blob([json_str], { type: \"application/json\" })\n        );\n      } catch (err) {\n        alert(\"Error saving: \" + filename + \".csv ; \" + err.message);\n      }\n    } else {\n      saveToFile_json(filename + \".schedule\", json_str);\n    }\n    // let json_str = JSON.stringify(this.state.eventParams,freeze);\n    // Write to file\n  }\n\n  onLoad(json_str) {\n    let E = JSON.parse(json_str, thaw);\n    console.log(E);\n    // let disp = 'Customise';\n    // if (E.schedule !== null) disp = 'Review';\n    this.setState(E);\n  }\n\n  updatePDFSettings(S) {\n    let E = this.state.eventParams;\n    E.titleFontSize = S.titleFontSize;\n    E.baseFontSize = S.baseFontSize;\n    E.logoTopLeft = S.logoTopLeft;\n    E.logoTopRight = S.logoTopRight;\n    E.logoBotLeft = S.logoBotLeft;\n    E.logoBotRight = S.logoBotRight;\n    E.footerText = S.footerText;\n    this.setState({ eventParams: E });\n  }\n\n  update(event) {\n    // let E = this.state.eventParams;\n    // E.teams = event.teams;\n    // for (let i = 0; i < E.sessions.length; i++) {\n    //     E.sessions = event.sessions;\n    // }\n    // console.log(this.state.eventParams.sessions[6].schedule[0].teams.map(x => this.state.eventParams.getTeam(x).number));\n    // console.log(event.sessions[6].schedule[0].teams.map(x => event.getTeam(x).number));\n    this.setState({ eventParams: event });\n  }\n\n  render() {\n    let mainWindow = <h1>An error occurred</h1>;\n    if (this.state.display === \"Initialise\") {\n      mainWindow = (\n        <Jumbotron>\n          <h1 className=\"App-intro\">Basic setup</h1>\n          <InitForm\n            event={this.state.eventParams}\n            onChange={this.handleScheduleChange}\n          />\n          <Button color=\"warning\" onClick={this.customise}>\n            Customise\n          </Button>\n          &nbsp;\n          <Button\n            color=\"success\"\n            onClick={() => {\n              this.state.eventParams.populateFLL();\n              this.generate();\n            }}\n          >\n            {this.state.processing ? \"Generating...\" : \"Generate\"}\n          </Button>\n        </Jumbotron>\n      );\n    } else if (this.state.display === \"Customise\") {\n      mainWindow = (\n        <Row>\n          <Col lg=\"3\">\n            &nbsp;\n            <br />\n            <Button color=\"success\" onClick={this.generate}>\n              {this.state.processing\n                ? \"Generating...\"\n                : \"Run Schedule Generation\"}\n            </Button>\n            <br />\n            &nbsp;\n            <DayScheduleView event={this.state.eventParams} />\n          </Col>\n          <Col lg=\"9\">\n            <Jumbotron>\n              <DetailView\n                onChange={this.handleScheduleChange}\n                event={this.state.eventParams}\n              />\n            </Jumbotron>\n          </Col>\n        </Row>\n      );\n    } else if (this.state.display === \"Review\") {\n      mainWindow = (\n        <Row>\n          <Col lg=\"3\">\n            &nbsp;\n            <br />\n            <Button\n              color=\"warning\"\n              onClick={() => this.setState({ display: \"Customise\" })}\n            >\n              Change parameters\n            </Button>\n            &nbsp;\n            <br />\n            &nbsp;\n            <DayScheduleView event={this.state.eventParams} />\n          </Col>\n          <Col lg=\"9\">\n            <Jumbotron>\n              <FullScheduleView\n                event={this.state.eventParams}\n                save={this.onSave}\n                onChange={this.updatePDFSettings}\n                onSwap={this.update}\n              />\n            </Jumbotron>\n          </Col>\n        </Row>\n      );\n    }\n    return (\n      <Container fluid className=\"App\">\n        <TopBar\n          version={this.state.version}\n          onSave={this.onSave}\n          onLoad={this.onLoad}\n        />\n        {mainWindow}\n      </Container>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n"],"sourceRoot":""}